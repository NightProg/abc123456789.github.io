(()=>{CanvasRenderingContext2D.prototype.roundRect=function(t,e,a,i,s){return a<2*s&&(s=a/2),i<2*s&&(s=i/2),this.beginPath(),this.moveTo(t+s,e),this.arcTo(t+a,e,t+a,e+i,s),this.arcTo(t+a,e+i,t,e+i,s),this.arcTo(t,e+i,t,e,s),this.arcTo(t,e,t+a,e,s),this.closePath(),this};const a=window.GameConfig.gamever,i=window.GameConfig.testingMode,s=window.GameConfig.testingMode&&!i,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",l=function(t){if(options_disableFilter)return t;for(var e in window.GameConfig.badWords)t=h(t,window.GameConfig.badWords[e]);return t},h=function(t,e){let a=t.normalize("NFKC").toLowerCase().indexOf(e);return a>=0&&(t=function(t,e,a){let i=e,s=a;for(var r=t.split(""),n=i;n<s;n++)r[n]="*";return r.join("")}(t,a,a+e.length),t=h(t,e)),t};console.log("\n\n\n"),console.log("-----------Game Version "+a+(s?" (BETA)":"")+" ----------------"),console.log("\n\n\n");var c=14,p=57,g=87,u={customClassesForOType:{},setClassForAnimalType:function(t,e){this.setCustomClassForGameObjType(t,2,e)},setCustomClassForGameObjType:function(t,e,a){this.customClassesForOType[e]||(this.customClassesForOType[e]={oTypeMainClass:null,secondaryTypeClasses:{}});var i=this.customClassesForOType[e];null==a?(null!=i.oTypeMainClass&&console.log("ERROR 'GameObjType.setCustomClassForGameObjType': a class ("+this.customClassesForOType[e]+") is already set for oType "+e+"! Check for duplicate calls!"),i.oTypeMainClass=t):(a in i.secondaryTypeClasses&&console.log("ERROR 'GameObjType.setCustomClassForGameObjType': a class is already set for oType "+e+" AND secondaryType (eg. animalType) "+a+"! Check for duplicate calls!"),i.secondaryTypeClasses[a]=t),this.onClassSet(t,e,a)},getClassForGameObjType:function(t,e){if(t in this.customClassesForOType){var a=this.customClassesForOType[t];return null==e||0==e?a.oTypeMainClass:e in a.secondaryTypeClasses?a.secondaryTypeClasses[e]:a.oTypeMainClass}return Ms},newlyVis_createGameObjFromMsg:function(t){var e=t.readUInt8(),a=null;2!=e&&e!=c&&e!=g||(a=t.readUInt8());var i=u.createGameObjOfOType(e,a);return i.worldUpd_readMsgNewlyVisible(t,e,a),i},createGameObjOfOType:function(t,e){return new(this.getClassForGameObjType(t,e))(t,e)},onClassSet:function(t){}},m=46,f=90,y=function(t){var e={};switch(t){case 95:e.aniName="Drone Maker",e.aniDesc="",e.upgradeText="",e.aniCol="#F500BD",e.skinName="";break;case 96:e.aniName="Drone",e.aniDesc="",e.upgradeText="",e.aniCol="#FF3AD2",e.skinName="";break;case 93:e.aniName="Goliath BullFrog",e.aniDesc="",e.upgradeText="",e.aniCol="#4A8526",e.skinName="jungle/bullfrog/bullfrog";break;case 78:e.aniName="Shrew",e.aniDesc="",e.upgradeText="",e.aniCol="#D39761",e.skinName="jungle/shrew";break;case 94:e.aniName="Gaur",e.aniDesc="",e.upgradeText="Upgraded to Gaur!",e.aniCol="#616161",e.skinName="jungle/gaur/0/gaur";break;case 79:e.aniName="Gecko",e.aniDesc="",e.upgradeText="Upgraded to Gecko\nPress W to dash from enemies, you can also climb trees!",e.aniCol="#99EE0F",e.skinName="jungle/gecko";break;case 80:e.aniName="Viper",e.aniDesc="",e.upgradeText="Upgraded to Viper\nYou can poison your preys with your bite, you can also climb hills, trees and Rocks!",e.aniCol="#19CE00",e.skinName="jungle/viper";break;case 81:e.aniName="Chameleon",e.aniDesc="",e.upgradeText="Upgraded to Chameleon\nHold W to turn invisible, very useful to suprise your opponents!",e.aniCol="#19CE00",e.skinName="jungle/chameleon";break;case 82:e.aniName="Capybara",e.aniDesc="",e.upgradeText="Upgraded to CAPYBARA\nYou're very fast and resilient!",e.aniCol="#9D5E2A",e.skinName="jungle/capybara";break;case 83:e.aniName="Kingfisher",e.aniDesc="",e.upgradeText="Upgraded to KINGFISHER!\nyou can use your ability to hop onto your opponents and annoy them with your beck!",e.aniCol="#00C0C6",e.skinName="jungle/kingfisher/kingfisher";break;case 84:e.aniName="Parrot",e.aniDesc="",e.upgradeText="Upgraded to PARROT\nRelease W to release a screech or climb a tree and fly from them!",e.aniCol="#19CE00",e.skinName="jungle/parrot";break;case 85:e.aniName="Basilisk",e.aniDesc="",e.upgradeText="Upgraded to Basilisk\nYou can leave behind a small pool of poison for an unsuspecting animal!",e.aniCol="#19CE00",e.skinName="jungle/basilisk";break;case 86:e.aniName="Iguana",e.aniDesc="",e.upgradeText="Upgraded to Iguana!\nYou can slap your enemies with your muscular tail!",e.aniCol="#19CE00",e.skinName="jungle/iguana/iguana";break;case 87:e.aniName="Tortoise",e.aniDesc="",e.upgradeText="Upgraded to TORTOISE!\nPress W to power up and dash to your enemies!",e.aniCol="#19CE00",e.skinName="jungle/tortoise/tortoise";break;case 88:e.aniName="Giant Flying Fox",e.aniDesc="",e.upgradeText="Upgraded to GIANT FLYING FOX!\nFly and dive to your prey and drag them closer to you!",e.aniCol="#19CE00",e.skinName="jungle/giant_flying_fox/giant_flying_fox";break;case 89:e.aniName="Alligator",e.aniDesc="",e.upgradeText="Upgraded to ALLIGATOR!\nDash and trash your preys using your ability!",e.aniCol="#19CE00",e.skinName="jungle/alligator";break;case f:e.aniName="Bies",e.aniDesc="",e.upgradeText="Upgraded to Bies!\nUsing your ability, spin fast and become a tornado and pull your opponents close!",e.aniCol="#1E7008",e.skinName="jungle/bies/bies";break;case 91:e.aniName="Quetzalcoatlus",e.aniDesc="",e.upgradeText="Upgraded to QUETZALCOATLUS!\nYou're an wonderful prey hunter, fly to the sky and let your screeches reach onto your preys!",e.aniCol="#19CE00",e.skinName="jungle/quetzalcoatlus/quetzalcoatlus";break;case 92:e.aniName="Jungle Monster",e.aniDesc="",e.upgradeText="Upgraded to Jungle Monster!\nA powerful animal that uses its tongue to combat its opponents! \n(TIP :Swallow your prey then spit them near a dangerous place!)",e.aniCol="#19CE00",e.skinName="jungle/jungle_monster/jungle_monster";break;case 45:e.aniName="Snail",e.aniDesc="",e.upgradeText="You're a super slow snail!",e.aniCol="#fcc02b",e.skinName="ocean/snail";break;case 1:e.aniName="Mouse",e.aniDesc="",e.upgradeText="",e.aniCol="#9BA9B9",e.skinName="land/mouse";break;case 2:e.aniName="Rabbit",e.aniDesc="",e.upgradeText="UPGRADED to RABBIT! \nPress W to burrow a hole to hide in!",e.aniCol="#AA937E",e.skinName="land/rabbit";break;case 3:e.aniName="Pig",e.aniDesc="",e.upgradeText="UPGRADED to PIG!\n Pigs move FAST through MUD! (Can use 'stink' to defend itself!)",e.aniCol="#DD6BD4",e.skinName="land/pig";break;case 4:e.aniName="Fox",e.aniDesc="",e.upgradeText="UPGRADED to FOX! ,\n You can kick players out of hiding holes! (Press W when in one!)\n+ Hide in red berry bushes!",e.aniCol="#FF9D43",e.skinName="land/fox";break;case 5:e.aniName="Deer",e.aniDesc="",e.upgradeText="UPGRADED to DEER! \nPress W to dig up food! \nDig in mud for better food!\n Hint:Check water areas for new food sources!",e.aniCol="#C4773E",e.skinName="land/deer";break;case 6:e.aniName="Mole",e.aniDesc="",e.upgradeText="UPGRADED to MOLE!\n Hold W to dig underground!\nGo under anything, do surprise attacks!",e.aniCol="#4C4A45",e.skinName="land/mole";break;case 7:e.aniName="Zebra",e.aniDesc="",e.upgradeText="UPGRADED to ZEBRA! \nPress W to kick side ways!",e.aniCol="#FFFFFF",e.skinName="land/zebra";break;case 8:e.aniName="Lion",e.aniDesc="",e.upgradeText="UPGRADED to LION!\n Press W to release a mighty ROAR (Rawr!)!",e.aniCol="#f8c923",e.skinName="land/lion";break;case 9:e.aniName="CHEETAH",e.aniDesc="",e.upgradeText="UPGRADED to CHEETAH!\n Press W to get a speed boost! (Every 8 seconds)!",e.aniCol="#CAC05B",e.skinName="land/bigcat/cheetah";break;case 10:e.aniName="Bear",e.aniDesc="",e.upgradeText="UPGRADED to BEAR!\n Bears climb through green hills! (Press W to use your claw!)",e.aniCol="#99591C",e.skinName="land/bear";break;case 11:e.aniName="Croc",e.aniDesc="",e.upgradeText="UPGRADED to CROCODILE!\n Press W to bite and drag around animals! \n+ (Now hide in water spots)+ Swim well in Mud, Lakes & Oceans!",e.aniCol="#30F51C",e.skinName="land/croc";break;case 13:e.aniName="Hippo",e.aniDesc="",e.upgradeText="UPGRADED to HIPPO!\nHippos are great swimmers, dominate the Lakes/Oceans/Mud!",e.aniCol="#945A99",e.skinName="land/hippo";break;case 12:e.aniName="Rhino",e.aniDesc="",e.upgradeText="UPGRADED to RHINO!\n Press W to CHARGE with your mighty horn!",e.aniCol="#94a3a9",e.skinName="land/rhino";break;case 15:e.aniName="Shrimp",e.aniDesc="",e.upgradeText="",e.aniCol="#f88e37",e.skinName="ocean/shrimp";break;case 16:e.aniName="Trout",e.aniDesc="",e.upgradeText="UPGRADED to TROUT!\nHint: Hold Left-click to RUN! (Uses extra water)",e.aniCol="#ac8686",e.skinName="ocean/trout";break;case 17:e.aniName="Crab",e.aniDesc="",e.upgradeText="UPGRADED to CRAB!\n Crabs can survive on dry land!\n (On land, Press W to go into your shell!)",e.aniCol="#bf2408",e.skinName="ocean/crab";break;case 18:e.aniName="Squid",e.aniDesc="",e.upgradeText="UPGRADED to SQUID!\n Squids can use INK when injured (press W!) \n+ you can hide in plankton bushes!",e.aniCol="#40dda4",e.skinName="ocean/squid";break;case 19:e.aniName="Shark",e.aniDesc="",e.upgradeText="UPGRADED to SHARK!\n A vicious predator of the oceans!",e.aniCol="#999fc6",e.skinName="ocean/shark";break;case 22:e.aniName="Sea-horse",e.aniDesc="",e.upgradeText="UPGRADED to SEA HORSE!\n An agile hunter!",e.aniCol="#73BE2F",e.skinName="ocean/seahorse";break;case 23:e.aniName="Jellyfish",e.aniDesc="",e.upgradeText="UPGRADED to JELLYFISH!\n A slowly-turning animal that can grow quite large!",e.aniCol="#FDB9BA",e.skinName="ocean/jellyfish";break;case 21:e.aniName="Turtle",e.aniDesc="",e.upgradeText="UPGRADED to TURTLE!\n Lives well on land & water! (On land, Press W to go into your shell!)",e.aniCol="#502E1A",e.skinName="ocean/turtle";break;case 20:e.aniName="Stringray",e.aniDesc="",e.upgradeText="UPGRADED to STINGRAY!\n Use electic shock (Release W key!) to shock animals! \n(Takes time to recharge)",e.aniCol="#164336",e.skinName="ocean/stingray";break;case 24:e.aniName="The Kraken",e.aniDesc="",e.upgradeText="UPGRADED to THE KRAKEN!\n Terrorize the oceans, and be feared by all!\n (Release W to use whirlpool ability!)",e.aniCol="#64a034",e.skinName="ocean/kraken";break;case 25:e.aniName="Pufferfish",e.aniDesc="",e.upgradeText="UPGRADED to PUFFERFISH!\n (Hold W to inflate- become spiky, and dangerous to touch!)",e.aniCol="#6C5C2C",e.skinName="ocean/pufferfish";break;case 26:e.aniName="Killer Whale",e.aniDesc="",e.upgradeText="UPGRADED to Killer Whale! \nWhales blow out water when diving! (And sometimes other loot!)",e.aniCol="#141414",e.skinName="ocean/killerwhale";break;case 27:e.aniName="Swordfish",e.aniDesc="",e.upgradeText="UPGRADED to "+e.aniName+"!\n (Press W to rush with your sharp nose!)",e.aniCol="#689CD7",e.skinName="ocean/swordfish";break;case 28:e.aniName="Gorilla",e.aniDesc="",e.upgradeText="UPGRADED to "+e.aniName+"!\n Gorillas are very fast on hills/trees!\n Press W to throw bananas! (from trees)",e.aniCol="#323232",e.skinName="land/gorilla";break;case 29:e.aniName="Octopus",e.aniDesc="",e.upgradeText="UPGRADED to Octopus!\nHold W to use your 'Disguise' ability!\n(Hint: wait for prey to bite you- they get stunned!)",e.aniCol="#ff8340",e.skinName="ocean/octopus";break;case 14:e.aniName="Dragon",e.aniDesc="",e.upgradeText="UPGRADED to "+e.aniName+"!\n (You're amazing!) \nFly over everything, Hold W to shoot fire!",e.aniCol="#22FF8A",e.skinName="land/dragon";break;case m:e.aniName="Black Dragon",e.aniDesc="",e.upgradeText="UPGRADED to "+e.aniName+"!\n Black dragons drink lava instead of water! Black dragons only heal on healing stones/lava!",e.aniCol="black",e.skinName="volcano/blackdragon";break;case 52:e.aniName="Giant Spider",e.aniDesc="",e.upgradeText="UPGRADED to "+e.aniName+"!\n Place web around the game to catch prey!",e.aniCol="black",e.skinName="land/giantSpider/0";break;case 50:e.aniName="Cobra",e.aniDesc="",e.upgradeText="UPGRADED to "+e.aniName+"!\n Hold W to Spit venom, and poison animals with your bite!",e.aniCol="black",e.skinName="land/cobra";break;case 51:e.aniName="Boa Constrictor",e.aniDesc="",e.upgradeText="UPGRADED to "+e.aniName+"!\n Coil and suffocate other animals!",e.aniCol="black",e.skinName="land/boa/boaConstrictor";break;case 53:e.aniName="T-REX",e.aniDesc="",e.upgradeText="UPGRADED to "+e.aniName+" The Dinosaur!\n This ancient dinosaur has powerful jaws that can drag prey around!!",e.aniCol="#862A2A",e.skinName="land/trex";break;case 55:e.aniName="Giraffe",e.aniDesc="",e.upgradeText="UPGRADED to Giraffe!\nGiraffe have huge legs and stomp anyone in their way!",e.aniCol="#E9BD23",e.skinName="land/giraffe";break;case 56:e.aniName="Eagle",e.aniDesc="",e.upgradeText="UPGRADED to Eagle!\nEagles can fly up other animals in the air! !\n",e.aniCol="#5b400d",e.skinName="land/eagle";break;case 41:e.aniName="Arctic Fox",e.aniDesc="",e.upgradeText="UPGRADED to "+e.aniName+"!\n You can kick players out of hiding holes! (Press W when in one!)\n+ Hide in red berry bushes!",e.aniCol="#CFCFCF",e.skinName="arctic/arcticfox";break;case 31:e.aniName="Arctic Hare",e.aniDesc="",e.upgradeText="UPGRADED to "+e.aniName+"!\n \nPress W to burrow a hole to hide in!",e.aniCol="#D5D5D5",e.skinName="arctic/arctichare";break;case 32:e.aniName="The Yeti!",e.aniDesc="",e.upgradeText="UPGRADED to "+e.aniName+"!\n So it really exists... \n Hold W to turn into snow, release W to freeeeeze!",e.aniCol="#839eb5",e.skinName="arctic/yeti";break;case 33:e.aniName="Chipmunk",e.aniDesc="",e.upgradeText="",e.aniCol="#A77C30",e.skinName="arctic/chipmunk";break;case 34:e.aniName="Muskox",e.aniDesc="",e.upgradeText="UPGRADED to "+e.aniName+"!\n Press W to charge with your horns! \nPlus move decently on ice!",e.aniCol="#231f18",e.skinName="arctic/muskox";break;case 35:e.aniName="Penguin",e.aniDesc="",e.upgradeText="UPGRADED to "+e.aniName+"!\n Left-click to run!\n (HOLD W to slide FAST on ice)!",e.aniCol="#FFFFFF",e.skinName="arctic/penguin";break;case 36:e.aniName="Polar Bear",e.aniDesc="",e.upgradeText="UPGRADED to "+e.aniName+"!\n Polar bears can climb hills! \n+ They're amazing swimmers!",e.aniCol="#e4e4e4",e.skinName="arctic/polarbear";break;case 37:e.aniName="Seal",e.aniDesc="",e.upgradeText="UPGRADED to "+e.aniName+"!\n Seals can slide on ice (Hold W) + can climb hills (rocks too!)",e.aniCol="#cfcfcf",e.skinName="arctic/seal";break;case 38:e.aniName="Snow leopard",e.aniDesc="",e.upgradeText="UPGRADED to "+e.aniName+"!\n Press W to get a speed boost! (Every 8 seconds)!",e.aniCol="#cfcfcf",e.skinName="arctic/snowleopard";break;case 39:e.aniName="Walrus",e.aniDesc="",e.upgradeText="UPGRADED to "+e.aniName+"!\n You can slide on ice (Hold W) + can climb hills (rocks too!)",e.aniCol="#633838",e.skinName="arctic/walrus";break;case 40:e.aniName="Reindeer",e.aniDesc="",e.upgradeText="UPGRADED to "+e.aniName+"!\n Press W to dig up food! \n Your sharp hooves let you turn very well on ice!",e.aniCol="#a68976",e.skinName="arctic/reindeer";break;case 30:e.aniName="Wolf",e.aniDesc="",e.upgradeText="UPGRADED to "+e.aniName+"!\n Wolf paws turn very well on ice!\n Press W to howl!",e.aniCol="#6B6B6B",e.skinName="arctic/wolf";break;case 42:e.aniName="Wolverine",e.aniDesc="",e.upgradeText="UPGRADED to "+e.aniName+"!\n Press W to Let out a Powerful GROWL! (Knocks back prey!)",e.aniCol="#843A0F",e.skinName="arctic/wolverine";break;case 43:e.aniName="Mammoth",e.aniDesc="",e.upgradeText="UPGRADED to "+e.aniName+"!\n Press W to roll snowballs with your trunk!\n The bigger the snowball gets, the longer the freeze!",e.aniCol="#9d4717",e.skinName="arctic/mammoth";break;case 44:e.aniName="Donkey",e.aniDesc="",e.upgradeText="UPGRADED to "+e.aniName+"!\n Press W to Kick any animal behind you",e.aniCol="#8c7c64",e.skinName="land/donkey";break;case 47:e.aniName="Sabertooth Tiger",e.aniDesc="",e.upgradeText="UPGRADED to Sabertooth Tiger!\nSabertooth Tigers are great swimmers, dominate the Lakes/Oceans/Mud!",e.aniCol="#945A99",e.skinName="arctic/sabertoothtiger";break;case 48:e.aniName="Elephant",e.aniDesc="",e.upgradeText="UPGRADED to "+e.aniName+"!\n Use your long trunk to attack and eat food!",e.aniCol="#945A99",e.skinName="land/elephant";break;case 49:e.aniName="Blue Whale",e.aniDesc="",e.upgradeText="UPGRADED to Blue Whale!\n Smash with your powerful tail!",e.aniCol="#945A99",e.skinName="ocean/whale/0/whale";break;case 58:e.aniName="Duck",e.aniDesc="",e.upgradeText="UPGRADED to a DUCK!",e.aniCol="#FF9000",e.skinName="duck";break;case 59:e.aniName="Duckling",e.aniDesc="",e.upgradeText="UPGRADED to a DUCK!",e.aniCol="#FF9000",e.skinName="land/oldDuck/duckling";break;case 57:e.aniName="Hedgehog",e.aniDesc="",e.upgradeText="UPGRADED to Hedgehog!\n (Hold W to become spiky, and dangerous to touch!)",e.aniCol="#5b400d",e.skinName="land/hedgehog";break;case 61:e.aniName="King Crab",e.aniDesc="",e.upgradeText="UPGRADED to a KING CRAB!\n Smash your opponents with your strong arms!\n(TIP : Hold your ability for 6 seconds to do a double punch, deals x2 damage!)",e.aniCol="#971f0e",e.skinName="ocean/kingcrab";break;case 60:e.aniName="Lemming",e.aniDesc="",e.upgradeText="Upgraded to a LEMMING!\n Roll snowballs and impact your opponents!",e.aniCol="#A77C30",e.skinName="arctic/lemming";break;case 62:e.aniName="Frog",e.aniDesc="",e.upgradeText="UPGRADED to Frog!!",e.aniCol="#FF9000",e.skinName="land/frog/frog";break;case 63:e.aniName="Ostrich",e.aniDesc="",e.upgradeText="UPGRADED to Ostrich!\nWith brisk and agile posture, you're sure to pack a punch!\nPress W to gain a burst of speed and kick right after!",e.aniCol="#FF9000",e.skinName="land/ostrich/ostrich";break;case 64:e.aniName="Pelican",e.aniDesc="",e.upgradeText="UPGRADED to Pelican! \nPick up water (and prey!) in your mouth,\nfly, and drop water on prey! (press W again)",e.aniCol="#FF9000",e.skinName="ocean/pelican/pelican";break;case 65:e.aniName="Falcon",e.aniDesc="",e.upgradeText="UPGRADED to Falcon! \nFly, and do a powerful dive attack! Aim it well.",e.aniCol="#FF9000",e.skinName="land/falcon/falcon";break;case 66:e.aniName="Snowy Owl",e.aniDesc="",e.upgradeText="UPGRADED to Snowy Owl!\n Aim the crosshair, \n right click/W when it's on top of prey, to attack!",e.aniCol="#FF9000",e.skinName="arctic/snowyowl/snowyowl";break;case 69:e.aniName="Baby Ostrich",e.aniDesc="",e.upgradeText="UPGRADED to Baby Ostrich!!",e.aniCol="#FF9000",e.skinName="land/ostrich/ostrich-baby";break;case 68:e.aniName="Phoenix",e.upgradeText="UPGRADED to Phoenix!\nCreate powerful fire tornados to burn your enemies alive!",e.aniCol="#FF9000",e.skinName="volcano/phoenix/phoenix";break;case 77:e.aniName="Beaver",e.upgradeText="UPGRADED to Beaver!",e.aniCol="#FF9000",e.skinName="beaver/beaver";break;case 76:let t=["Mighty\n","Ominous\n","Otodus\n","Great\n","The "];e.aniName=t[Math.floor(Math.random()*t.length)]+"Megalodon",e.upgradeText="UPGRADED to Megalodon!\nSuprise your preys with your fast dash ability!(goes through hills & rocks too!)",e.aniCol="#FF9000",e.skinName="ocean/megalodon/megalodon";break;case 70:e.aniName="Sea Monster",e.upgradeText="UPGRADED to Sea Monster!\nCreate an gigantic whirlpool to scare off your enemies!",e.aniCol="#FF9000",e.skinName="ocean/seamonster/whirlpool";break;case 71:e.aniName="Lava Monster",e.upgradeText="UPGRADED to Lava Monster!\nMake an powerful sinkhole to catch your prey!",e.aniCol="#FF9000",e.skinName="volcano/lavamonster/lavamonster";break;case 72:e.aniName="Ice Monster",e.upgradeText="UPGRADED to Ice Monster!\nWait for your shards to grow and throw them at your enemies!\n(TIP : Your shards grow faster on ICE!)",e.aniCol="#FF9000",e.skinName="arctic/icemonster/icemonster";break;case 73:e.aniName="Dino Monster",e.upgradeText="UPGRADED to Dino Monster!\nThrow your opponents in the sky with your strong horns!",e.aniCol="#FF9000",e.skinName="land/dinomonster";break;case 74:e.aniName="Pigeon",e.upgradeText="UPGRADED to Pigeon!\nHold right click (or W) to fly!\n",e.aniCol="#FF9000",e.skinName="land/pigeon/pigeon";break;case 75:e.aniName="Toucan",e.upgradeText="UPGRADED to Toucan!\nHold right click (or W) to fly!(HINT: Start flying from a fruit tree or bush to throw fruit upon landing!)",e.aniCol="#FF9000",e.skinName="land/toucan/toucan";break;default:e.aniName="(Animal)",e.aniDesc="",e.aniCol="#000000",e.upgradeText="UPGRADED!"}return e},b=100,w=function(t,e){return Math.random()*(e-t)+t},v=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},T=function(t,e){var a=e.split("?")[0],i=[],s=-1!==e.indexOf("?")?e.split("?")[1]:"";if(""!==s){for(var r=(i=s.split("&")).length-1;r>=0;r-=1)i[r].split("=")[0]===t&&i.splice(r,1);a=a+"?"+i.join("&")}return a},k=function(t){return t*(180/Math.PI)},I=function(t){return t*(Math.PI/180)},P=function(t,e){return(t>>e)%2!=0},A=function(t,e){var a,i=(a=k(e-t),(a=Math.trunc(a)%360+(a-Math.trunc(a)))>0?a:a+360);return i>180&&(i-=360),I(i)},C=function(t,e,a){return Math.min(a,Math.max(e,t))},S=function(t){return unescape(encodeURIComponent(t))},x=function(t){return M(t)},M=function(t,e){if(null===t)return null;if(0===t)return"0";e=!e||e<0?0:e;var a=t.toPrecision(2).split("e"),i=1===a.length?0:Math.floor(Math.min(a[1].slice(1),14)/3),s=i<1?t.toFixed(0+e):(t/Math.pow(10,3*i)).toFixed(2);return(s<0?s:Math.abs(s))+["","K","M","B","T"][i]},_=function(t,e,a,i){Ot.fillStyle=i,Ot.beginPath(),Ot.arc(t,e,Math.max(0,a),0,2*Math.PI),Ot.fill()},N=function(t,e,a,i,s){Ot.strokeStyle=s,Ot.lineWidth=i,Ot.beginPath(),Ot.arc(t,e,Math.max(0,a),0,2*Math.PI),Ot.stroke()},D=function(t,e,a,i){return a*Math.sin(i*Math.PI/e*t)},F=function(t,e){(i||e)&&console.log(t)};function U(t){var e=new Date(null);e.setSeconds(t);var a=e.getMinutes(),i=e.getSeconds(),s="";return a>0&&(s=a+"m "),i>0&&(s+=i+"s"),s}function E(t,e){t&&(this._fntSize=t),e&&(this._color=e)}function B(t,e,a,i,s,r,n){this.x=t,this.y=e,this.w=a,this.h=i,this.aniT=s,this.species=n,this.teamID=0,this.buttonTXT=new E(12,"white"),this.buttonTXT.renderScale=1.5,this.buttonTXT.setText(y(s).aniName),this.buttonTXT.multiLine=!0,this.isHighLighted=!1,this.biomeNum=r;var o=u.createGameObjOfOType(2,s);o.animalType=s,o.animalSpecies=n,o.curBiome=r,o.lava=100,this.buttonTXT.setText(o.animalInfo().aniName),o.x=o.ox=o.nx=0,o.y=o.oy=o.ny=0,o.rad=o.oRad=o.nRad=30,o.alwaysPlainOutline=!0,this.drawnAniObj=o,this.buttonScaleF=1,this.testPosHitsButton=function(t,e){return!(t<this.x-this.w/2||t>this.x+this.w/2||e<this.y-this.w/2||e>this.y+this.w/2)},this.setPosAndSize=function(t,e,a,i,s,r){this.w=a,this.h=i,this.x=t+a*(.5-s),this.y=e+i*(.5-r)},this.draw=function(){Ot.save(),Ot.translate(this.x,this.y),Ot.scale(this.buttonScaleF,this.buttonScaleF);var t=Ot.globalAlpha;switch(Ot.globalAlpha=.75*t,this.biomeNum){case dt:Ot.fillStyle="#1C91B8";break;case ct:Ot.fillStyle="#26A73A";break;case pt:Ot.fillStyle="#B2B2B2";break;case gt:Ot.fillStyle=Z;break;case ut:Ot.fillStyle="#328909";break;case mt:Ot.fillStyle="#FF2E00"}Ot.roundRect(0-this.w/2,0-this.h/2,this.w,this.h,10).fill(),this.isHighLighted&&(Ot.fillStyle="white",Ot.globalAlpha=.2*t,Ot.roundRect(0-this.w/2,0-this.h/2,this.w,this.h,10).fill()),Ot.globalAlpha=t,this.drawnAniObj.nRad=this.drawnAniObj.rad=.6*a/2*ie,Ot.save(),Ot.scale(2,2),this.drawnAniObj.teamID=bt,this.drawnAniObj.draw(),Ot.restore(),this.buttonTXT.setFontSize(23*ie),this.buttonTXT.x=0,this.buttonTXT.y=.5*-this.h*.75,this.buttonTXT.draw(),Ot.restore()}}function O(t){this.buttonTXT=new E(10,"white"),this.buttonTXT.renderScale=1.5,this.buttonTXT.setText(t),this.draw=function(){this.visible&&(Ot.save(),Ot.globalAlpha=.2,Ot.fillStyle=this.pressed?"white":"#000000",Ot.fillRect(this.x-this.w/2,this.y-this.h/2,this.w,this.h),Ot.globalAlpha=.2,this.buttonTXT.setFontSize(25*ie),this.buttonTXT.x=this.x,this.buttonTXT.y=this.y,this.buttonTXT.draw(),Ot.restore())}}E.prototype={strokeW:1,strokeColor:"#000000",multiLine:!1,_text:"",_color:"#000000",x:0,y:0,_fntSize:16,_canvas:null,_ctx:null,_dirty:!1,renderScale:1.5,_scale:1,width:0,height:0,setColor:function(t){this._color!=t&&(this._color=t,this._dirty=!0)},setFontSize:function(t){this._fntSize!=t&&(this._fntSize=t,this._dirty=!0)},setText:function(t){t!=this._text&&(this._text=t,this._dirty=!0)},getRenderedCanvas:function(){if(null==this._canvas&&(this._canvas=document.createElement("canvas"),this._ctx=this._canvas.getContext("2d")),this._dirty){this._dirty=!1;var t=this._canvas,e=this._ctx,a=this._text,i=this._scale,s=this._fntSize*this.renderScale,r=s+"px Arial";e.font=r;var n=~~(.2*s);if(e.font=r,this.multiLine){for(var o=1.2*e.measureText("M").width,l=a.split("\n"),h=0,c=0;c<l.length;++c)h=Math.max(h,e.measureText(l[c]).width);this.width=(h+6)*i,this.height=(o*l.length+n)*i,t.width=this.width,t.height=this.height,this.width/=this.renderScale,this.height/=this.renderScale,e.globalAlpha=1,e.font=r,this.strokeW>0&&(e.shadowOffsetX=this.strokeW,e.shadowOffsetY=this.strokeW,e.shadowColor=this.strokeColor),e.fillStyle=this._color,e.textAlign="center";var d=3+t.width/2,p=s-n/2;for(c=0;c<l.length;++c)e.fillText(l[c],d,p),p+=o}else this.width=(e.measureText(a).width+6)*i,this.height=(s+n)*i,t.width=this.width,t.height=this.height,this.width/=this.renderScale,this.height/=this.renderScale,e.globalAlpha=1,e.font=r,this.strokeW>0&&(e.shadowOffsetX=this.strokeW,e.shadowOffsetY=this.strokeW,e.shadowColor=this.strokeColor),e.fillStyle=this._color,e.fillText(a,3,s-n/2)}return this._canvas},draw:function(){if(this._text){var t=this.renderScale,e=this.getRenderedCanvas(),a=e.width/t,i=e.height/t;this.setPos(a,i),Ot.drawImage(e,this.x-a/2,this.y-i/2,a,i)}},setPos:function(t,e){}},window.CachedText=E,window.AniChoiceButton=B,O.prototype={x:0,y:0,w:0,h:0,visible:!0,buttonTXT:null,pressed:!1,pressedTouchID:-1,touchEnabled:!0,testPosHitsButton:function(t,e){return!(t<this.x-this.w/2||t>this.x+this.w/2||e<this.y-this.w/2||e>this.y+this.w/2)},setPosAndSize:function(t,e,a,i,s,r){this.w=a,this.h=i,this.x=t+a*(.5-s),this.y=e+i*(.5-r)},onButtonTouchStart:function(){},onButtonTouchEnd:function(){}},window.TouchButton=O;var R=function(t){this.buttonTXT=new E(10,"white"),this.buttonTXT.renderScale=1.5,this.buttonTXT.multiLine=!0,this.abilityButtonName=new E(10,"white"),this.abilityButtonName.renderScale=1.5,this.abilityButtonName.setText(t),this.isMiniRechargeBut=!1,this.abil_Type=0,this.abil_possible=this.abil_usable=this.abil_recharging=this.abil_active=!1,this.abil_rechargeEndT=0,this.abil_rechargeTotalT=0,this.abil_rechargeBarA=0,this.abil_avilableA=0,this.isQability=!1,this.draw=function(){if(this.visible&&(this.abil_rechargeBarA+=.1*((this.abil_recharging?1:0)-this.abil_rechargeBarA),this.abil_avilableA+=.1*((this.abil_usable||this.abil_active?1:.2)-this.abil_avilableA),this.isMiniRechargeBut&&(this.h=.6*this.w),this.abil_possible)){Ot.save(),this.isMiniRechargeBut?(this.h=.8*this.w,Ot.translate(this.x,this.y+.36*this.h),Ot.scale(.65,.65)):Ot.translate(this.x,this.y);var t=.2*this.abil_avilableA,e=this.pressed||(this.isQability?pe:de)?"#CECECE":"#000000";this.abil_active&&(e=nt,t=.7),Ot.fillStyle=e,Ot.globalAlpha=1*t,Ot.fillRect(0-this.w/2,0-this.h/2,this.w,this.h);var a=function(t){var e={},a=xe[ea];switch(t){case 110:e.abilName="Leave Poison",e.abilImg="skins/"+y(aa).skinName+".png";break;case 109:e.abilName="Spit\nMeteorite!",e.abilImg="skins/volcano/blackdragon/abilityMeteorite.png";break;case 105:e.abilName="Wing & Tail \nSlap",e.abilImg="skins/volcano/blackdragon/ability_tailwingslap.png";break;case 104:e.abilName="Fly High!",e.abilImg="skins/volcano/blackdragon/ability_wingslap.png";break;case 103:e.abilName="Wing Slash",e.abilImg="skins/volcano/blackdragon/ability_wingslap.png";break;case 102:e.abilName="Wing Slap",e.abilImg="skins/volcano/blackdragon/ability_wingslap.png";break;case 97:e.abilName="Offensive\nTail Slap",e.abilImg="skins/volcano/blackdragon/ability_tailslap.png";break;case 98:e.abilName="Defensive\nTail Slap",e.abilImg="skins/volcano/blackdragon/ability_tailslap.png";break;case 99:case 96:e.abilName="Tail Slap",e.abilImg="skins/volcano/blackdragon/ability_tailslap.png";break;case 93:e.abilName="Giant Fire";break;case 94:e.abilName="Multiple\nFireballs";break;case 95:e.abilName="Shotgun\nFire";break;case 108:e.abilName="Flamethrower";break;case 106:e.abilName="Thrusting\nFire";break;case 107:e.abilName="Multi-Thrusting\nFire";break;case 92:e.abilName="Fly High",e.abilImg="img/fly_ability.png";break;case 90:if(e.abilName="Kick and Ram!",a){var i=a.animalInfo();e.abilImg="skins/jungle/gaur/"+a.animalSpecies+"/gaur_ability2.png"}break;case 89:e.abilName="Hyper Spin!",e.abilImg="skins/"+y(aa).skinName+".png";break;case 5:e.abilName="Whirlpool!",e.abilImg="skins/"+y(aa).skinName+".png";break;case 88:e.abilName="Screech!\n(FLY from Trees!)",a&&(i=a.animalInfo(),e.abilImg="skins/jungle/parrot/"+a.animalSpecies+"/parrot.png");break;case 87:e.abilName="Dive & drag!",e.abilImg="skins/"+y(aa).skinName+".png";break;case 86:e.abilName="Tail Whip!",e.abilImg="skins/jungle/iguana/tail_whip.png";break;case 85:e.abilName="Swallow Prey!",e.abilImg="skins/"+y(aa).skinName+"_ability.png";break;case 84:e.abilName="Dash n' Thrash!",e.abilImg="skins/"+y(aa).skinName+".png";break;case 83:e.abilName="Fly and Screech!",e.abilImg="skins/jungle/quetzalcoatlus/quetzalcoatlus_ability.png";break;case 82:e.abilName="Turn Invisible!",e.abilImg="skins/"+y(aa).skinName+".png";break;case 81:e.abilName="Hold to REBOUND\n(FLY from Trees!)",e.abilImg="skins/jungle/kingfisher/kingfisher_ability.png";break;case 80:e.abilName="Dash Attack",e.abilImg="skins/jungle/tortoise/tortoise2.png";break;case 76:e.abilName="Dash Kick",e.abilImg="skins/"+y(aa).skinName+".png";break;case 77:e.abilName="Toss in air",e.abilImg="skins/"+y(aa).skinName+".png";break;case 78:e.abilName="Dash and Grab!",e.abilImg="skins/ocean/megalodon/ability_megalodon_up.png";break;case 32:e.abilName="Tail Slap",a&&(i=a.animalInfo(),e.abilImg="skins/"+i.skinName+".png");break;case 31:e.abilName="Trunk Hit",e.abilImg="skins/"+y(aa).skinName+".png";break;case b:e.abilName="Dive",e.abilImg="img/ability_dive.png";break;case 25:e.abilName="Dig For Food",e.abilImg="skins/"+y(aa).skinName+".png";break;case 2:e.abilName="Shell",e.abilImg="skins/"+y(aa).skinName+"2.png";break;case 21:e.abilName="Bite Drag",e.abilImg="skins/"+y(aa).skinName+".png";break;case 36:e.abilName="Suffocate prey",e.abilImg="skins/"+y(aa).skinName+".png";break;case 55:e.abilName="Fly with water",e.abilImg="skins/ocean/pelican/ability_pelican.png";break;case 7:e.abilName="Disguise",e.abilImg="skins/"+y(aa).skinName+".png";break;case 22:e.abilName="Burrow Hole",e.abilImg="skins/"+y(aa).skinName+".png";break;case 23:e.abilName="Pull from Hole",e.abilImg="skins/"+y(aa).skinName+".png";break;case 9:e.abilName="Charge",e.abilImg="skins/"+y(aa).skinName+".png";break;case 17:e.abilName="Roll snow",e.abilImg="img/snowball.png";break;case 34:e.abilName="Venom Spit",e.abilImg="skins/"+y(aa).skinName+".png";break;case 35:e.abilName="Spin Web",e.abilImg="img/spiderWeb.png";break;case 13:e.abilName="Throw Snow",e.abilImg="skins/"+y(aa).skinName+".png";break;case 16:e.abilName="Drop Snow",e.abilImg="img/snowball.png";break;case 18:e.abilName="Loud Noise",e.abilImg="skins/"+y(aa).skinName+".png";break;case 14:e.abilName="Claw Slash",e.abilImg="img/ability_claw.png";break;case 4:e.abilName="Ink",e.abilImg="skins/"+y(aa).skinName+".png";break;case 3:e.abilName="Shock",e.abilImg="skins/"+y(aa).skinName+".png";break;case 1:e.abilName="Hold to Dig",e.abilImg="skins/"+y(aa).skinName+".png";break;case 12:e.abilName="Howl",e.abilImg="skins/"+y(aa).skinName+".png";break;case 24:e.abilName="Throw Banana",e.abilImg="skins/0"+y(aa).skinName+".png";break;case 28:e.abilName="Cause Wave",e.abilImg="skins/"+y(aa).skinName+".png";break;case 15:e.abilName="Extra Boost",9==aa?a&&(i=a.animalInfo(),e.abilImg="skins/"+i.skinName+".png"):e.abilImg="skins/"+y(aa).skinName+".png";break;case 8:e.abilName="Slide on ice",e.abilImg="skins/"+y(aa).skinName+".png";break;case 10:e.abilName="Inflate",e.abilImg="skins/"+y(aa).skinName+".png";break;case 49:e.abilName="Spikes",e.abilImg="skins/"+y(aa).skinName+"2.png";break;case 19:case 30:e.abilName="Fire",e.abilImg="img/fire.png";break;case 51:e.abilName="Arm Smash",e.abilImg="img/ability_crabSmashSkin.png";break;case 37:e.abilName="Jaws Bite",a&&(i=a.animalInfo(),e.abilImg="skins/land/trex/0/ability_trexBite.png");break;case 46:e.abilName="Jaws Bite",e.abilImg="skins/"+y(aa).skinName+".png";break;case 54:e.abilName="Command Babies",e.abilImg="skins/ostrich/ostrich-baby.png";break;case 58:e.abilName="Target prey",e.abilImg="skins/"+y(aa).skinName+".png";break;case 57:e.abilName="Sky dive",a&&(i=a.animalInfo(),e.abilImg="skins/"+i.skinName+".png");break;case 38:e.abilName="Ambush Attack",(a=xe[ea])&&(i=a.animalInfo(),e.abilImg="skins/"+i.skinName+".png");break;case 42:e.abilName="Stomp",e.abilImg="skins/"+y(aa).skinName+".png";break;case 47:e.abilName="Fly with prey",a&&(i=a.animalInfo(),e.abilImg="skins/eagle/"+a.animalSpecies+"/eagle.png");break;case 48:e.abilName="Stink",e.abilImg="skins/"+y(aa).skinName+".png";break;case 64:case 65:e.abilName="HOLD to fly",(a=xe[ea])&&(i=a.animalInfo(),e.abilImg="skins/"+i.skinName+".png");break;case 75:e.abilName="Freeze Prey!",(a=xe[ea])&&(i=a.animalInfo(),e.abilImg="skins/"+y(aa).skinName+".png");break;case 61:e.abilName="Flame Trail",a&&(e.abilImg="skins/volcano/phoenix/"+a.animalSpecies+"/phoenix_ability.png");break;case 66:e.abilName="Sink Hole",e.abilImg="skins/"+y(aa).skinName+".png";break;case 63:e.abilName="Giant Whirlpool",e.abilImg="skins/"+y(aa).skinName+".png";break;case 74:e.abilName="Spit Rock",e.abilImg="skins/"+y(aa).skinName+".png";break;case 72:e.abilName="Zombie Infection",e.abilImg="img/ability_infection.png";break;default:e.abilName="Ability",e.abilImg="skins/"+y(aa).skinName+".png"}return e}(this.abil_Type);if(19==this.abil_Type||30==this.abil_Type||93==this.abil_Type||94==this.abil_Type||95==this.abil_Type||106==this.abil_Type||107==this.abil_Type||108==this.abil_Type){var i=Math.trunc(ft/120)%5;if(o=ve("img/fireball/"+i+".png")){var s=.4*this.w,r=0;if(xe[ea]){var n=xe[ea].spawnTime;r=D((ft-n)/1e3,1,10,2)}Ot.globalAlpha=1*this.abil_avilableA,Ot.drawImage(o,-s,.85*-s-r,2*s,2*s+r)}}else{var o,l=a.abilImg,h=xe[ea];h&&(68==h.animalType||71==h.animalType||75==h.animalType&&4==h.animalSpecies||49==h.animalType&&1==h.animalSpecies)&&this.abil_Type==b&&(l="img/ability_dive_lava.png"),(o=ve(l))&&(s=.4*this.w,Ot.globalAlpha=1*this.abil_avilableA,Ot.drawImage(o,-s,.85*-s,2*s,2*s))}this.buttonTXT.setText(a.abilName),this.buttonTXT.setFontSize(25*ie),this.buttonTXT.x=0,this.buttonTXT.y=.35*-this.w,this.buttonTXT.draw(),this.abilityButtonName.setFontSize(25*ie),this.abilityButtonName.x=.4*-this.h,this.abilityButtonName.y=.4*this.w,this.abilityButtonName.draw();var c=Math.max(0,this.abil_rechargeEndT-ft);if(this.abil_rechargeBarA+=.1*((this.abil_recharging?1:0)-this.abil_rechargeBarA),this.abil_rechargeBarA>.01){Ot.globalAlpha=1*this.abil_rechargeBarA*.35,Ot.fillStyle="#000000";var d=.8*this.w,p=.5*this.h;Ot.fillRect(0-d/2,0-p/2,d,p),Ot.globalAlpha=1*this.abil_rechargeBarA*1,Ot.fillStyle="#F3C553",Ot.fillRect(0-d/2,0-p/2,d*(c/this.abil_rechargeTotalT),p)}Ot.restore()}}};R.prototype=Object.create(O.prototype),window.AbilityButton=R;var W=document.getElementById("gmButton_FFA");W.onclick=function(){window.history.pushState({},document.title,"/"+T("serverType",document.location.search)),location.href=z("serverType=FFA")};var j=document.getElementById("gmButton_HG");function G(t){t=t.split("+").join(" ");for(var e,a={},i=/[?&]?([^=]+)=([^&]*)/g;e=i.exec(t);)a[decodeURIComponent(e[1])]=decodeURIComponent(e[2]);return a}function z(t){return _url=location.href,_url+=(_url.split("?")[1]?"&":"?")+t,_url}j.onclick=function(){window.history.pushState({},document.title,"/"+T("serverType",document.location.search)),location.href=z("serverType=HG")};let H=(xa=G(document.location.search)).serverType;"true"==xa.session&&(document.getElementById("sessionMenu").style.display="block"),"HG"===H?j.disabled=!0:W.disabled=!0;var L=xa.mobileios>0,X=xa.mobileAndroid>0,Y=L||X,V=(xa.videoson,.175),q="#3FBA54",K="#09992F",J="#4E66E4",Z="#ff6000",Q="#FC1F00",$="#4651a6",tt="#152A59",et=$,at="#c8b745",it="#4AA91D",st="#F35F53",rt="#EF3C31",nt="#4AE05E",ot="#8C9688",lt="#878053",ht=function(t){switch(t){case dt:return"#007ec0";case pt:return"grey";case ut:return it;case gt:return"#4c3324";case mt:return"#4C2424";default:return K}},ct=0,dt=1,pt=2,gt=3,ut=4,mt=5,ft=+new Date,yt=+new Date,bt=0,wt=!1,vt=!1,Tt=!1,kt=!1,It=null,Pt=0,At=[],Ct=!1,St=0,xt=null,Mt=!1,_t=!1,Nt=document.getElementById("gCanvas"),Dt=null,Ft=null,Ut=0,Et=0,Bt=0,Ot=Nt.getContext("2d");Ot.shadowColor="black";var Rt=Math.min(window.devicePixelRatio,2),Wt=1==("ontouchstart"in window||navigator.maxTouchPoints);Wt&&console.log("mobile touch device detected!");var jt,Gt,zt={},Ht=function(t){if(!zt.hasOwnProperty(t)&&!qe){var e=new Audio(t);console.log("loading audio: "+t),zt[t]=e,t==Yt&&e.addEventListener("ended",(function(){this.currentTime=0;try{this.play()}catch(t){}}),!1),e.volume=.7,e.muted=qe}return zt[t]},Lt=null,Xt="",Yt="audio/music_menu.mp3",Vt=function(t){if(Lt&&(Lt.pause(),Lt.currentTime=0),Xt=t,!qe){console.log("changed music to "+t),Lt=Ht(t);try{Lt.play()}catch(t){}}},qt=function(){var t=document.getElementById("button_mute_img");if(t){for(var e in t.src=qe?"img/sound_off.png":"img/sound_on.png",zt)zt.hasOwnProperty(e)&&(zt[e].muted=qe);!qe&&Xt&&null==Lt&&Vt(Xt)}},Kt=!1,Jt=camzoom_n=2.7,Zt=(Jt=1,0),Qt=0,$t=0,te=0,ee=0,ae=0,ie=1,se=0,re=0,ne=0,oe=0,le=0,he=0,ce=!1,de=!1,pe=!1,ge=0,ue=0,me=0,fe=0,ye=0,be=0,we={},ve=function(t){return we.hasOwnProperty(t)||(we[t]=new Image,we[t].src=t),0!=we[t].width&&we[t].complete?we[t]:null},Te=100,ke=Array.apply(null,new Array(100)).map(Number.prototype.valueOf,0),Ie=Array.apply(null,new Array(100)).map(Number.prototype.valueOf,0),Pe=Array.apply(null,new Array(100)).map(Number.prototype.valueOf,0),Ae=Array.apply(null,new Array(100)).map(Number.prototype.valueOf,0),Ce=!1,Se=[],xe={},Me=[],_e=!1,Ne=0,De=1,Fe=!1,Ue=0,Ee=1,Be=!1,Oe=0,Re=1,We=!1,je=+new Date,Ge=!1,ze=!1,He=!1,Le=!1,Xe=!1,Ye=!1,Ve=!1,qe=!1,Ke=!1;function Je(t,e,a){var i=document.getElementById("optionsContainer"),s=document.createElement("label");s.innerHTML="<input type='checkbox' id='"+t+"'><span style='color: "+a+";''>"+e+"</span>",i.appendChild(s)}Je("options_noImages","No Animal images  ","white"),Je("options_noNames","No Names & Chat  ","white"),Je("options_lowGraphics","Use Low graphics ","white"),Wt&&(Je("options_noJoystick","No Joystick","#194614"),Je("options_leftHanded","LEFT-handed Joystick","#194614")),Je("options_noXpPopup","Don't show +XP popups","white"),Je("options_disableFilter","Disable Word Filter","white"),window.localStorage&&Je("options_keepSameToken","Keep Same Session ID (can help regain your session if disconnected.)","white"),window.localStorage&&(Ke=window.localStorage.getItem("options_keepSameToken")+0>0,(jt=document.getElementById("options_keepSameToken"))&&(jt.checked=Ke),options_disableFilter=window.localStorage.getItem("options_disableFilter")+0>0,(jt=document.getElementById("options_disableFilter"))&&(jt.checked=options_disableFilter),ze=window.localStorage.getItem("options_noNames")+0>0,(jt=document.getElementById("options_noNames"))&&(jt.checked=ze),Ge=window.localStorage.getItem("options_noImages")+0>0,(jt=document.getElementById("options_noImages"))&&(jt.checked=Ge),He=window.localStorage.getItem("options_lowGraphics")+0>0,(jt=document.getElementById("options_lowGraphics"))&&(jt.checked=He),Le=window.localStorage.getItem("options_disableSnowFall")+0>0,(jt=document.getElementById("options_disableSnowFall"))&&(jt.checked=Le),Xe=window.localStorage.getItem("options_noJoystick")+0>0,(jt=document.getElementById("options_noJoystick"))&&(jt.checked=Xe),Ye=window.localStorage.getItem("options_leftHanded")+0>0,(jt=document.getElementById("options_leftHanded"))&&(jt.checked=Ye),Ve=window.localStorage.getItem("options_noXpPopup")+0>0,(jt=document.getElementById("options_noXpPopup"))&&(jt.checked=Ve),qe=window.localStorage.getItem("options_muted")+0>0,qt()),(Gt=document.getElementById("button_mute"))&&(Gt.onclick=function(){qe=!qe,qt();try{window.localStorage.setItem("options_muted",qe?1:0)}catch(t){}}),document.getElementById("settingsButton").onclick=function(){var t=document.getElementById("optionsDiv");let e="flex"==t.style.display;t.style.display=e?"none":"flex";var a=Ht("audio/click.mp3");if(a)try{a.play()}catch(t){}},document.getElementById("closeBut").onclick=function(){var t=document.getElementById("optionsDiv");t.style.display="flex"==t.style.display?"none":"flex";var e=Ht("audio/click.mp3");if(e)try{e.play()}catch(t){}},(Gt=document.getElementById("options_keepSameToken"))&&(Gt.onchange=function(){if(window.localStorage){Ke=this.checked;try{window.localStorage.setItem("options_keepSameToken",Ke?1:0)}catch(t){}}}),(Gt=document.getElementById("options_disableFilter"))&&(Gt.onchange=function(){if(window.localStorage){options_disableFilter=this.checked;try{window.localStorage.setItem("options_disableFilter",options_disableFilter?1:0)}catch(t){}}}),(Gt=document.getElementById("options_noNames"))&&(Gt.onchange=function(){if(window.localStorage){ze=this.checked;try{window.localStorage.setItem("options_noNames",ze?1:0)}catch(t){}}}),(Gt=document.getElementById("options_noNames"))&&(Gt.onchange=function(){if(window.localStorage){ze=this.checked;try{window.localStorage.setItem("options_noNames",ze?1:0)}catch(t){}}}),(Gt=document.getElementById("options_lowGraphics"))&&(Gt.onchange=function(){if(window.localStorage){He=this.checked;try{window.localStorage.setItem("options_lowGraphics",He?1:0)}catch(t){}wn()}}),(Gt=document.getElementById("options_disableSnowFall"))&&(Gt.onchange=function(){if(window.localStorage){Le=this.checked;try{window.localStorage.setItem("options_disableSnowFall",Le?1:0)}catch(t){}wn()}}),(Gt=document.getElementById("options_noJoystick"))&&(Gt.onchange=function(){if(window.localStorage){Xe=this.checked;try{window.localStorage.setItem("options_noJoystick",Xe?1:0)}catch(t){}wn()}}),(Gt=document.getElementById("options_leftHanded"))&&(Gt.onchange=function(){if(window.localStorage){Ye=this.checked;try{window.localStorage.setItem("options_leftHanded",Ye?1:0)}catch(t){}wn(),console.log("options_leftHanded: saved as "+window.localStorage.getItem("options_leftHanded"))}}),(Gt=document.getElementById("options_noXpPopup"))&&(Gt.onchange=function(){if(window.localStorage){Ve=this.checked;try{window.localStorage.setItem("options_noXpPopup",Ve?1:0)}catch(t){}wn()}});var Ze=0,Qe=+new Date,$e=(new Date,"?".repeat(32));if(localStorage){let t=localStorage.getItem("captchaSecretKey");t&&($e=t)}let ta=null;ta=Ke&&window.localStorage.getItem("DataSession")?window.localStorage.getItem("DataSession"):function(t){let e="";const a=o.length;for(let t=0;t<50;t++)e+=o.charAt(Math.floor(Math.random()*a));return e}(),window.localStorage&&window.localStorage.setItem("DataSession",ta);var ea=0,aa=1,ia=!1,sa=!1,ra=!1,na=!1,oa=+new Date,la=!1,ha=!1,ca=0,da=waterBarPerc_n=100,pa=xp=xpPer=0,ua=(infectionBarPerc_n=100,new E(16,"white")),ma=new E(16,"white"),fa=new E(16,"white"),ya=new E(16,"white"),ba=(new E(16,"white"),new E(10,"white"));ya.multiLine=!0,ya.renderScale=1,ba.multiLine=!0,ba.renderScale=1;var wa="",va=[],Ta=new R("Q");Ta.isQability=!0,Ta.onButtonTouchStart=function(){xn(Sn,!0)},Ta.onButtonTouchEnd=function(){xn(Sn,!1)},Ta.abil_possible=!0,Ta.abil_usable=!0,Ta.abil_Type=9,Ta.abil_usable,va.push(Ta);var ka=new R("W");ka.onButtonTouchStart=function(){xn(Tn,!0)},ka.onButtonTouchEnd=function(){xn(Tn,!1),Pa.pressed&&-1==Pa.pressedTouchID&&(Pa.pressed=!1,xn(vn,!1))},va.push(ka);var Ia=new R("W");Ia.isMiniRechargeBut=!1,Ia.touchEnabled=!1,va.push(Ia);var Pa=new O("HOLD TO RUN");Pa.onButtonTouchStart=function(){xn(vn,!0)},Pa.onButtonTouchEnd=function(){xn(vn,!1)},va.push(Pa);var Aa=new O("CHAT");Aa.onButtonTouchStart=function(){fn()},va.push(Aa);var Ca=new O("S");Ca.onButtonTouchStart=function(){xn(Pn,!0)},va.push(Ca);var Sa=new O("DOWNâ†“");Sa.onButtonTouchStart=function(){xn(In,!0)},va.push(Sa);var xa,Ma=!1,_a=-1,Na=0,Da=0,Fa=0,Ua=0,Ea=0,Ba=0,Oa=0,Ra=0,Wa=0,ja=(yt=+Date.now(),null);function Ga(){if(!La||1!=ja.readyState)return;let t=new $r(100);t.writeUInt8(76),t.writeString(La),en(t),document.getElementById("btnSession").classList="disable-button",setTimeout((()=>{document.getElementById("btnSession").classList=""}),6e4)}(xa=G(document.location.search)).token;let za=document.getElementById("colorChoice");za.onchange=function(){za.style.color=Ha[za.selectedIndex].color,za.style["font-weight"]=700};let Ha=[];document.getElementById("btnSession").onclick=function(){let t=document.getElementById("sessionLogin").value;La=t,Ga(),localStorage.setItem("specialLoginToken",t)},document.getElementById("logoutButton").onclick=function(){window.localStorage.removeItem("specialLoginToken"),location.reload()};let La=null;window.localStorage&&window.localStorage.getItem("specialLoginToken")&&(La=window.localStorage.getItem("specialLoginToken"));var Xa=!1;if(!Y){var Ya=document.createElement("div");Ya.innerHTML="&nbsp;",Ya.className="adsbox",document.body.appendChild(Ya),window.setTimeout((function(){0===Ya.offsetHeight&&(console.log("@@@@@@@@@@ is is blocked"),Xa=!0,document.getElementById("blockedImg").style.display="block"),Ya.remove(),console.log("AdBlock Enabled? ",Xa)}),1e3)}Y||(function(t,e,a,i,s,r,n){t.GoogleAnalyticsObject=s,t[s]=t[s]||function(){(t[s].q=t[s].q||[]).push(arguments)},t[s].l=1*new Date,r=e.createElement(a),n=e.getElementsByTagName(a)[0],r.async=1,r.src="https://www.google-analytics.com/analytics.js",n.parentNode.insertBefore(r,n)}(window,document,"script",0,"ga"),ga("create","UA-36494583-11","auto"),ga("send","pageview"));var Va=0,qa=0;if(window.localStorage){var Ka=1*window.localStorage.getItem("lastAdShowT")||0,Ja=+new Date-Ka;qa=Ja>0?Ka:0,Va=1*window.localStorage.getItem("gamesSinceAd")}new Date;var Za=!1,Qa=!1,$a=!1,ti=new E(10,"white");ti.setText("Connecting..."),ti.renderScale=1;var ei,ai=function(t){if(Za||console.log("ad isn't playing!"),Za=!1,$a=!1,Qa=!1,document.getElementById("pvVidContainer").style.display="none",document.getElementById("my-content-2").style.display="none",t&&(Va=0,qa=+new Date,window.localStorage))try{window.localStorage.setItem("lastAdShowT",qa),window.localStorage.setItem("gamesSinceAd",Va)}catch(t){}if(!ia&&!oi){Lt&&(Lt.volume=.7);var e=Ht("audio/click.mp3");if(e)try{e.play()}catch(t){}console.log("Video done (success: "+t+"), joining game!"),pn(!1)}},ii=!1;window.onBoltLoaded=function(t){console.log("onBoltLoaded: playerName '"+t+"'"),Bolt.on(t,"showHiddenContainer",(function(){console.log("BOLT showHiddenContainer fired"),ai(ii)})),Bolt.on(t,Bolt.BOLT_AD_STARTED,(function(){clearTimeout(null),console.log("AD STARTED: SUCCESS"),$a=!0,ii=!0})),Bolt.on(t,Bolt.BOLT_AD_ERROR,(function(){console.log("AD ERROR EVENT FIRED"),ai(ii)}))},L&&function(t){if(window.WebViewJavascriptBridge)return t(WebViewJavascriptBridge);if(window.WVJBCallbacks)return window.WVJBCallbacks.push(t);window.WVJBCallbacks=[t];var e=document.createElement("iframe");e.style.display="none",e.src="wvjbscheme://__BRIDGE_LOADED__",document.documentElement.appendChild(e),setTimeout((function(){document.documentElement.removeChild(e)}),0)}((function(t){ei=t})),!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform),navigator.userAgent.toLowerCase().indexOf("android"),new Date;var si=+new Date+0,ri=0,ni=!1,oi=!1,li=0,hi=[],ci=!1,di=0,pi=0;function gi(t,e){new Date}var ui=250,mi=250,fi=0,yi=0,bi=0,wi=[],vi=0,Ti=0,ki=[];function Ii(t){var e=new Ts(t);return ki.push(e),e}function Pi(t,e,a){if(t){Ot.fillStyle=e,Ot.beginPath();var i=Rt*Math.max(3,t.rad*(Ft.width/me));Ot.arc(ge-(10*Rt+Ft.width*ie)+t.x*(Ft.width*ie)/me,10*Rt+t.y*(Ft.height*ie)/fe,i*a,0,2*Math.PI),Ot.fill()}}function Ai(t){document.getElementById("startMenuWrapper").style.display=t?"block":"none"}function Ci(){Ai(!0),document.getElementById("moneyRectangle").style.marginTop="55px",document.getElementById("mopeMenu").style.display="block",document.getElementById("endScreen").style.display="none"}var Si=function(t,e,a,i,s){t.fillText(e,i,s),t.fillText(": "+a,i+120,s)},xi=0,Mi=0,_i=null,Ni=0;function Di(){if(0==At.length)return function(){if(null!=Bn&&null!=Bn.interfaceButtons)for(d=0;d<Bn.interfaceButtons.length;d++){var t=Bn.interfaceButtons[d];if(void 0!==t.reqID){var e=!0,a=!1;for(r=0;r<At.length;r++)if(At[r].id==t.reqID){a=!0;break}if(a||(e=!1),!e||wt){var i=Bn.interfaceButtons.indexOf(t);-1!=i&&Bn.interfaceButtons.splice(i,1)}}}}(),void(_i=null);if(null==_i&&(_i=document.createElement("canvas")),null!=_i){var t,e=_i.getContext("2d");t=200+80*At.length+10,_i.width=430,_i.height=t;var a=300;Ni=a,e.globalAlpha=.2,e.fillStyle="#000000",e.fillRect(0,0,_i.width,_i.height),e.fillStyle="#000000",e.fillRect(5,5,_i.width-10,_i.height-10);var i=5;e.globalAlpha=1,e.fillStyle="#FFFFFF",e.font="30px Arial",i+=55;var s="1v1 REQUEST";for(e.font="30px Arial",e.fillText(s,_i.width/2-e.measureText(s).width/2,i),a=100,r=0;r<At.length;r++){var n=At[r];e.save(),e.fillStyle="red",e.globalAlpha=.5,e.fillRect(_i.width-60,10,50,50),e.restore(),e.save(),s=""+n.dur,e.font="30px Arial",e.fillText(s,_i.width-35-e.measureText(s).width/2,45),e.restore(),e.font="20px Arial",s=n.requestee+" invites you for 1v1 ",e.fillText(s,_i.width/2-e.measureText(s).width/2,a);var o=20;Si(e,"Animal","",o,i=a+40);var l=y(n.aniType),h=ve("./skins/"+l.skinName+".png");if(h&&(e.save(),e.drawImage(h,o+130,i-30,50,50),e.restore()),o+=210,Si(e,"1v1 Wins",n.wins,o,i),i+=40,o=20,3==ye||n.kills,3==ye){e.save();var c=o+155,p=i-5;e.fillStyle=Bn.teamColors[n.teamID],e.beginPath(),e.arc(c,p,10,0,2*Math.PI),e.fill(),e.restore()}o+=210,a+=100;var g=Fi(n,"Accept");g.yPos=a,g.update=function(){this.x=ge/2-140,this.y=Ni+this.yPos+10};var u=Fi(n,"Reject");u.yPos=a,u.update=function(){this.x=ge/2-40,this.y=Ni+this.yPos+10};var m=Fi(n,"Ignore");m.yPos=a,m.update=function(){this.x=ge/2+60,this.y=Ni+this.yPos+10},a+=80}}}function Fi(t,e){var a=!1;for(Vi=0;Vi<Bn.interfaceButtons.length;Vi++)if((i=Bn.interfaceButtons[Vi]).reqID==t.id&&i.label==e)return a=!0,i;if(!a){var i=new Br(0,0,80,40,e,20);return i.reqID=t.id,i.reqAction=i.onClick=function(){this.isHighLighted=!1;var t=0;switch(this.label){case"Accept":t=1;break;case"Reject":t=0;break;case"Ignore":t=2}var e=new $r(3);e.writeUInt8(53),e.writeUInt8(t),en(e)},i.onInterfaceReset=function(){this.isVisible=!0},i.isVisible=!0,Bn.interfaceButtons.push(i),i}}var Ui=10*Rt,Ei=15*Rt,Bi=!1,Oi="",Ri="",Wi=null,ji="",Gi=[],zi=[],Hi={},Li=["Team Mode","Wild Mope"];function Xi(t,e,a){this.name=t,this.ip=e,this.serverConnURL=e,this.region=a}Xi.prototype={name:"Server",ip:"0.0.0.0",serverConnURL:"0.0.0.0",region:"",playersCount:-2,gameMode:0,BR_waitingForPlayers:!1,ping:1e4,domOptionIndex:0,getServerListString:function(){var t="";2==this.gameMode&&(t=this.BR_waitingForPlayers?" -STARTING NEW GAME":" -GAME IN PROGRESS");var e=this.playersCount<0?"...":this.playersCount;return this.name+" ["+e+" players "+(this.playersCount>=ds?"-FULL!":"")+"]"+t}},null==H?H="FFA":(window.GameConfig.servers[H]||(H="FFA"),"TEST"!=H&&window.history.pushState({},document.title,"/"+T("serverType",document.location.search)));let Yi=window.GameConfig.servers[H];for(var Vi=0;Vi<Yi.length;Vi++){let t=Yi[Vi];qi=t.name,Ki=t.ip,Ji=t.reg,Zi=void 0,Qi=void 0,Qi=new Xi(qi,Ki,Ji),Gi.push(Qi),Ji in Hi||(Zi=Ji,zi.push(Zi),Hi[Zi]=[]),Hi[Ji].push(Qi)}var qi,Ki,Ji,Zi,Qi,$i=function(t){};window.loadedCaptcha=function(){window.captchaWidget=hcaptcha.render("captcha-1",{sitekey:"f8c53026-dfdf-4214-882b-223aab09ec1c",callback:function(t){$i(t)}})};var ts=i?zi[0]:zi[v(0,Math.max(0,zi.length-1-1))],es=0,as=Gi[es],is=(ts=as.region,as),ss=!1,rs=!1;const ns=(t,e=1e4)=>new Promise(((a,i)=>{new RegExp("(https?|ftp|file)://[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]").test(t)||i("invalid url");try{const i=performance.now();fetch(t).then((()=>a(performance.now()-i))).catch((()=>a(e))),setTimeout((()=>{a(e)}),e)}catch(t){i(t)}}));function os(t){for(var e=0;e<=Li.length;e++)if(Li[e]==t)return!0;return!1}async function ls(){let t=1;for(var e=0;e<Gi.length;e++){var a=Gi[e];try{var i=await fetch(window.location.protocol+"//"+a.ip+"/serverInfo",{mode:"cors"});i=await i.json(),a.playersCount=i.players,t+=i.players}catch{a.playersCount=-1}}Ut=t,setTimeout(bs,1e3)}function hs(){ss&&(rs=!0),ss=!1,console.log("@@@@  Fastest region is "+is.region+" with ping "+is.ping+"ms "),ts=is.region,function(){console.log("Joining best server..."),console.log("region "+ts+" servsInReg "+Hi[ts]);var t=Hi[ts].slice();t.sort((function(t,e){return t.playersCount<e.playersCount?1:t.playersCount>e.playersCount?-1:0}));for(var e=!1,a=!0,i=0;i<t.length;i++){var s=t[i];if(s.playersCount<ds&&s.playersCount>=0&&(a=!1),s.playersCount<400&&s.playersCount>=0){as=s,es=ys.indexOf(as),e=!0;break}}if(!e)if(a){for(a=!0,i=0;i<Gi.length;i++)if(Gi[i].playersCount<ds){as=Gi[i],es=ys.indexOf(as),ts=as.region;break}}else as=t[v(0,t.length-1)],es=ys.indexOf(as);console.log("Connecting to best server..."),ms(as)}()}ls();var cs,ds=500;var ps=0,gs=null,us=!1;async function ms(t,e=!1){if(us=e,as=t,ts=t.region,es=ys.indexOf(t),console.log("gameServerConnect : ",es,t),bs(),fs(),an()&&(theWs=ja,ja=null,theWs.close()),t==gs){if(ps>1){for(console.log("too many fails, trying next server"),(es+=1)>ys.length-1&&(es=0);null==ys[es];)es+=1;as=ys[es],fs()}}else ps=0,gs=t;la=!1,Ai(!0),document.getElementById("connecting").style.visibility="visible",document.getElementById("txtServer").innerHTML="("+as.name+")";var i=("https:"===window.location.protocol?"wss://":"ws://")+as.serverConnURL,s="false";try{s=await fetch(window.location.protocol+"//"+as.ip+"/captchaKey?key="+$e+"&gameID="+ta,{mode:"cors"}),s=await s.text()}catch{}document.getElementById("connecting").style.visibility="hidden",document.getElementById("captcha-1").style.display="block",document.getElementById("nickInputContainer").style.display="none";var r=document.getElementById("serverResponse");r.style.display="block",r.style.opacity=1,r.textContent="Please Verify Captcha",cs&&(clearTimeout(cs),cs=null),$i=function(e){document.getElementById("captcha-1").style.display="none",document.getElementById("nickInputContainer").style.display="block",r.style.display="none",r.style.opacity=0,console.log("Connecting to "+as.name+" ("+i+")..."),i+=null==e?"/?CaptchaKey="+$e:"/?captchaToken="+function(t){let e=t.split("");return[25,89,102,196,223].forEach((t=>{e[t]+="P"})),e.join("")}(e),i+="&gameID="+ta,ja=new WebSocket(i),hcaptcha.reset(window.captchaWidget),ja.binaryType="arraybuffer",ja.onopen=function(){console.log("socket connected!"),ps=0,document.getElementById("startMenu").style.visibility="visible",document.getElementById("connecting").style.visibility="hidden"},ja.onmessage=function(t){!function(t){switch((V=new Qr(t)).readUInt8()){case 1:if(ye=V.readUInt8(),be=V.readUInt8(),On(),serverVer=V.readUInt16(),serverVer>a)return void setTimeout((function(){Y||(window.onbeforeunload=null),console.log("Old client (ver "+a+"/"+serverVer+")"),alert("bettermope.io has been updated! You need to refresh to get the latest version of the game! (If this keeps appearing, hold SHIFT when pressing refresh!)"),window.location.reload(!0)}),1500);serverVer<a&&console.log("Old server version detected!"),Ai(!0);break;case 3:console.log("Joined new game room!"),Ga();var e=1==V.readUInt8(),i=1==V.readUInt8();ia=!i,sa=i,me=V.readUInt16(),fe=V.readUInt16(),ye=V.readUInt8(),Zt=ee=$t=V.readUInt16()/4,Qt=ae=te=V.readUInt16()/4,camzoom_n=V.readUInt16()/1e3,Jt=1.2*camzoom_n,function(t){ui=mi*(me/fe),Ft||(Ft=document.createElement("canvas")),Ft.width=ui,Ft.height=mi;var e=Ft.getContext("2d");e.fillStyle=q,e.fillRect(0,0,Ft.width,Ft.height);var a=ui/200,i=1.25;fi=t.readUInt16(),yi=me,bi=t.readUInt16(),jungleH=t.readUInt16(),jungleW=me;var s=ui/me;e.fillStyle=xs,e.fillRect((me/2-jungleW/2)*s,(fe-jungleH)*s,jungleW*s,jungleH*s),e.fillStyle="white",e.fillRect((me/2-yi/2)*s,0*s,yi*s,bi*s);for(var r=0;r<1;r++)e.fillStyle=et,s=ui/me,e.fillRect((me-fi)*s,0,fi*s,fe*s);var n=t.readUInt16();for(e.fillStyle=et,r=0;r<n;r++){var o=t.readUInt16()*(ui/me),l=t.readUInt16()*(mi/fe),h=t.readUInt16()*(ui/me),c=t.readUInt16()*(mi/fe);s=ui/me,e.fillRect(h-o/2,c-l/2,o,l)}for(n=t.readUInt16(),r=0;r<n;r++){var d=t.readUInt16()*(ui/me),p=t.readUInt16()*(mi/fe);if(e.fillStyle=1==t.readUInt8()?"#59362A":"#8A681B",0==t.readUInt8()){var g=5*t.readUInt8();e.beginPath(),e.arc(d,p,Math.max(1,g*(ui/me)),0,2*Math.PI),e.fill()}else{var u=t.readUInt16()*(ui/me),m=t.readUInt16()*(mi/fe);s=ui/me,e.fillRect(d-u/2,p-m/2,u,m)}}for(n=t.readUInt16(),e.fillStyle=et,r=0;r<n;r++){var f=t.readUInt8()*a,y=t.readUInt8()*i,b=5*t.readUInt8();e.beginPath(),e.arc(f,y,Math.max(1,b*(ui/me)),0,2*Math.PI),e.fill()}for(n=t.readUInt16(),e.fillStyle="#907A33",r=0;r<n;r++)f=t.readUInt8()*a,y=t.readUInt8()*i,b=5*t.readUInt8(),e.beginPath(),e.arc(f,y,Math.max(1,b*(ui/me)),0,2*Math.PI),e.fill();for(n=t.readUInt16(),e.fillStyle="#7BB7BB",r=0;r<n;r++)f=t.readUInt8()*a,y=t.readUInt8()*i,b=5*t.readUInt8(),e.beginPath(),e.arc(f,y,Math.max(1,b*(ui/me)),0,2*Math.PI),e.fill();for(n=t.readUInt16(),r=0;r<n;r++)f=t.readUInt8()*a,y=t.readUInt8()*i,b=5*t.readUInt8(),e.fillStyle=t.readUInt8()?Q:Z,e.beginPath(),e.arc(f,y,Math.max(1,b*(ui/me)),0,2*Math.PI),e.fill();for(n=t.readUInt16(),r=0;r<n;r++){f=t.readUInt8()*a,y=t.readUInt8()*i,b=5*t.readUInt8();var w=t.readUInt8();let s=K;switch(w){case dt:s=at;break;case pt:s="#D9D9D9";break;case ut:s=it;break;case gt:case mt:s="#614129"}e.fillStyle=s,e.beginPath(),e.arc(f,y,Math.max(1,b*(ui/me)),0,2*Math.PI),e.fill()}for(n=t.readUInt16(),r=0;r<n;r++){f=t.readUInt8()*a,y=t.readUInt8()*i,b=5*t.readUInt8(),w=t.readUInt8();let s=ot;switch(w){case ut:s=lt;break;case gt:case mt:s="#776864"}e.fillStyle=s,e.beginPath(),e.arc(f,y,Math.max(1,b*(ui/me)),0,2*Math.PI),e.fill()}for(n=t.readUInt16(),e.fillStyle="#A89937",r=0;r<n;r++)f=t.readUInt8()*a,y=t.readUInt8()*i,b=5*t.readUInt8(),e.beginPath(),e.arc(f,y,Math.max(1,b*(ui/me)),0,2*Math.PI),e.fill();for(n=t.readUInt16(),e.fillStyle=st,r=0;r<n;r++)f=t.readUInt8()*a,y=t.readUInt8()*i,e.beginPath(),e.arc(f,y,Math.max(2.5,ui/me*40),0,2*Math.PI),e.fill();for(n=t.readUInt16(),e.fillStyle=J,r=0;r<n;r++)f=t.readUInt8()*a,y=t.readUInt8()*i,e.beginPath(),e.arc(f,y,Math.max(2.5,ui/me*50),0,2*Math.PI),e.fill()}(V),e&&Fn(),ra=!0,na||(document.getElementById("onconnectDiv").style.visibility="visible"),na=!0,Ai(!0),us&&gn(),document.activeElement.blur();break;case 6:console.log("You spawned ingame!"),Kt=!0,ia=!0,Vt("audio/music_game.mp3"),Y||(window.onbeforeunload=function(t){return"You're alive in a game, close mope.io?"});break;case 2:var s=V.readUInt8();if(i=V.readUInt8(),console.log("MsgRequestJoinAGame: server response "+s),1==s){if(console.log("Successfuly joined gameroom!"),Ai(!1),Va+=1,window.localStorage)try{window.localStorage.setItem("gamesSinceAd",Va)}catch(t){}(r=document.getElementById("serverResponse")).style.display="none",r.style.opacity=0,r.textContent=""}else{console.log(s);var r=document.getElementById("spawnXpLabel");0==s?(r.style.display="block",r.style.opacity=1,r.textContent="Error: Server is full!"):2==s&&(r.style.display="block",r.style.opacity=1,r.textContent="Game already in progress!"),Ai(!0),document.getElementById("onconnectDiv").style.visibility="visible"}break;case 10:Et=V.readUInt16(),Bt=V.readUInt16();break;case 24:console.log("Animal choice appeared!");var n=V.readUInt8();if(5==n&&(oi=!1),0==n||1==n){var o=1==n,c=V.readUInt8(),d=V.readUInt8();oi=!0,li=0,hi=[],ci=o,di=+new Date,pi=di+1e3*c;for(var p=0;p<d;p++){var g=new B(0,0,100,100,V.readUInt8(),V.readUInt8(),V.readUInt8());g.teamID=bt,hi.push(g)}}break;case 8:var m=V.readUInt16(),f=V.readUInt8();for(lbData=[],p=0;p<f;++p){var y={rank:V.readUInt16(),name:V.readString(),score:V.readUInt32()};y.rank!=m&&(y.name=l(y.name)),lbData.push(y)}!function(t,e,a){if(Dt=null,0!=t.length){var i=(Dt=document.createElement("canvas")).getContext("2d"),s=55;s+=22*t.length,Dt.width=270,Dt.height=s,i.globalAlpha=.2,i.fillStyle="#000000",i.roundRect(0,0,Dt.width,Dt.height,10).fill(),i.globalAlpha=1,i.fillStyle="#FFFFFF";var r,n=as.name;for(i.font="24px Arial",He||(i.shadowOffsetX=1,i.shadowOffsetY=1),i.shadowColor="black",i.fillText(n,Dt.width/2-i.measureText(n).width/2,40),i.textAlign="left",i.font="17px Arial",r=0;r<t.length;++r)n=ze?"":t[r].name||"bettermope.io",a==t[r].rank?(i.fillStyle="#FEED92",ze&&(n="you")):i.fillStyle="#FFFFFF",n=t[r].rank+". "+n+" ("+x(t[r].score)+")",i.fillText(n,15,65+22*r)}}(lbData,0,m);break;case 17:Te=V.readUInt32();break;case 18:var b=V.readUInt8(),w=V.readUInt8(),v=V.readUInt8(),T=0==v;ea=V.readUInt32(),Te=V.readUInt32();var k=u.createGameObjOfOType(2,b);k.animalType=b,k.animalSpecies=w;var I=k.animalInfo();2!=v&&Ii(T?"You downgraded to "+I.aniName+"! \nDont lose too much xp!":I.upgradeText),Ce||(Ce=!0,ke=Array.apply(null,new Array(100)).map(Number.prototype.valueOf,0),Ie=Array.apply(null,new Array(100)).map(Number.prototype.valueOf,0),Pe=Array.apply(null,new Array(100)).map(Number.prototype.valueOf,0),Ae=Array.apply(null,new Array(100)).map(Number.prototype.valueOf,0)),ke=Array.apply(null,new Array(100)).map(Number.prototype.valueOf,0);for(var P=V.readUInt8(),A=0;A<P;A++)ke[V.readUInt8()-1]=1;for(Ie=Array.apply(null,new Array(100)).map(Number.prototype.valueOf,0),P=V.readUInt8(),A=0;A<P;A++){var C=V.readUInt8();Ie[C-1]=1}for(Pe=Array.apply(null,new Array(100)).map(Number.prototype.valueOf,0),P=V.readUInt8(),A=0;A<P;A++)Pe[V.readUInt8()-1]=1;for(Ae=Array.apply(null,new Array(100)).map(Number.prototype.valueOf,0),P=V.readUInt8(),A=0;A<P;A++)Ae[V.readUInt8()-1]=1;ni=1==b||15==b||33==b||78==b,si=+new Date+9e3,ri=0,null!=Bn&&Bn.setPlayer();break;case 14:GameAdsRenew("gameadsbanner"),ls(),F("@@@@@@@@@@@@@ Player died");var S=V.readUInt8(),M=V.readUInt32();null!=Bn&&Bn.interfaceReset(),nn=null,ia=!1,sa=!0,wt=!1,Ps=!1,oi=!1,resetAfk(),254!=S&&(1==S?(j=Ii("Oh no, You were eaten! \n Watch out for red-circled players!")).text.setColor("#F1C34C"):2==S?(j=Ii("Oh no, You died from a tail-bite!\n Watch your tail!")).text.setColor("#F1C34C"):4==S?((j=Ii("You died of thirst :( Don't let your water run out!")).text.setColor("#F1C34C"),new Date):13==S?((j=Ii("You died from burning! (Get to water when on fire!)")).text.setColor("#F1C34C"),new Date):24==S?(M=0,new Date):((j=Ii("You died! Watch your health!")).text.setColor("#F1C34C"),new Date)),oi=!1,resetAfk(),window.setTimeout((function(){if(!ia){if(console.log("showing mobile ad......"),L&&ei&&L&&(console.log("Showing ad IOS..."),ei.callHandler("adShowCallBack",{foo:"bar"},(function(t){console.log("JS got response "+t)}))),X&&(console.log("Showing ad android..."),window.location="myscheme://showAdmob"),Ai(!0),254!=S){wa=M>0?"You'll spawn with +"+x(M)+" XP!":"";var t=document.getElementById("spawnXpLabel");t.style.opacity=0,wa&&setTimeout((function(){ia||(t.style.display="block",t.style.opacity=1)}),1e3),document.getElementById("spawnXpLabel").textContent=wa}Y||(window.onbeforeunload=null)}}),2e3);break;case 4:!function(t){ft=+new Date,yt=ft,rn(t),newMiniMapObjs=[];for(var e=t.readUInt16(),a=0;a<e;a++){var i={x:t.readUInt16(),y:t.readUInt16(),rad:15,color:t.readString()};newMiniMapObjs.push(i)}var s=t.readUInt16();for(a=0;a<s;a++){var r=(c=u.newlyVis_createGameObjFromMsg(t)).id,n=xe[r];delete xe[r];var o=Se.indexOf(n);-1!=o&&Se.splice(o,1),xe[r]=c,Se.push(c)}s=t.readUInt16();for(var l=0;l<s;l++)r=t.readUInt32(),(c=xe[r])?c.worldUpd_readMsgUpdate(t):console.log("Error: Updated GameObj id "+r+" doesn't exist!");s=t.readUInt16();for(var h=0;h<s;h++){var c,d=t.readUInt32();(c=xe[d])?c.worldUpd_readMsgRemovedObj(t):console.log("Error: Removed GameObj id "+r+" doesn't exist!")}null!=Bn&&Bn.worldUpdate(t)}(V);break;case 19:var _=V.readUInt32(),N=xe[_];if(N){var D=V.readString();if(_!=ea)for(var p in window.GameConfig.badWords)D=h(D,window.GameConfig.badWords[p]);N.gotChat(D)}break;case 29:ks=[],Ps=!0,As=0,Cs=+new Date;var U=V.readUInt8();for(p=0;p<U;p++)ks.push(new Is(V.readString(),V.readString(),V.readUInt8()));break;case 23:var O=V.readUInt8(),R="",W=null;if(!ia)return;switch(O){case 255:R=V.readString();break;case 254:R=V.readString(),W=V.readString();break;case 2:R="Ouch! Your tail got bitten!";break;case 12:R="You've been stung by a jellyfish!";break;case 3:R="ZAP! You've been shocked by a STINGRAY!";break;case 8:R="You've been inked!";break;case 5:R="Oh no! Escape the kraken's pull!";break;case 6:R="Ouch! Pufferfish are pointy!";break;case 7:R="That's an octopus in disguise!";break;case 9:R="Brrr! You've been frozen!";break;case 10:R="Ahh! The wolf's howl scared you!";break;case 11:R="Ouch! A VERY LOUD sound hit you!";break;case 13:R="Ah! You're on fire!";break;case 14:R="BAM! You got kicked by a donkey!";break;case 16:R="Ouch! You're getting dragged by a croc!";break;case 17:R="A fox DUG you out of the hole!";break;case 18:R="A wave has swept you away!"}var j=Ii(R);null!=W&&j.text.setColor(W);break;case 25:var G=V.readUInt8(),z=V.readUInt16()/10;switch(G){case 0:Ne=1e3*z,De=+new Date+1e3*z,_e=!0;break;case 1:Ue=1e3*z,Ee=+new Date+1e3*z,Fe=!0;break;case 2:Oe=1e3*z,Re=+new Date+1e3*z,Be=!0}break;case 76:!function(t){t=JSON.parse(t),document.getElementById("nameMenu").innerHTML="Logged in as "+t.name+".",document.getElementById("xpTokens").innerHTML="You have "+t.xpToken+" XP tokens!",document.getElementById("loggedMenu").style.display="",document.getElementById("unloggedMenu").style.display="none",document.getElementById("btnSession").innerHTML="Reload";let e=document.getElementById("colorChoice");e.innerHTML="",t.colors.unshift({desc:"WHITE",color:"white"});for(var a=0;a<t.colors.length;a++){const i=document.createElement("option");i.style.color=t.colors[a].color,i.text=t.colors[a].desc,i.style["font-weight"]=700,e.add(i,null)}Ha=t.colors,za.onchange()}(V.readString());break;case 26:$e=V.readString(),localStorage.setItem("captchaSecretKey",$e);break;case 50:F("disconnected from AFK!"),la=!0;break;case 51:null!=Bn&&Bn.handleMessage(V);break;case 55:Bi=1==V.readUInt8(),Oi=V.readUInt16(),Ri=V.readString(),Bi&&(ji=V.readString()),function(){var t=""+Ri;0==t.lenght&&(t="bettermope.io");var e=(Bi?" ALL TIME ":"")+"1v1 Pro: "+t+" (WINS: "+Oi+") SINCE "+ji;null==Wi?((Wi=new E(20,"#FFFFFF")).strokeW=2,Wi.multiLine=!0,Wi.renderScale=2,Wi.setText(e),Wi.setPos=function(t,e){this.x+=t/2}):(Wi.setFontSize(20),Wi.setText(e),Wi.setPos=function(t,e){this.x+=t/2})}();break;case 58:var H=V.readUInt8(),V=V.readString();(j=Ii("You died from burning! (Get to water when on fire!)")).text.setFontSize(H);break;case 59:V.readUInt16();var $=V.readUInt32();V.readString(),x($);break;case 60:V.readString()}}(new DataView(t.data))},ja.onclose=function(e){this==ja&&(ps+=1,ra=!1,ia=!1,sa=!1,la||(cs=setTimeout((function(){ms(t)}),1e4),Ai(!0)))},ja.onerror=function(){console.log("socket error!")}},"false"!=s&&($e=s,localStorage.setItem("captchaSecretKey",$e),$i(null))}function fs(){document.getElementById("normalServerSelect").selectedIndex=es}(async function(){if(rs)hs();else if(!ss){for(var t in ss=!0,Hi)if(Hi.hasOwnProperty(t)&&Hi[t].length>0&&!os(t)){var e=Hi[t][0];let i=0,s=0;try{for(var a=0;a<3;a++){let t=await ns(window.location.protocol+"//"+e.ip+"/serverInfo");i+=t,s=t}}catch{i=3e4}e.ping=i/3,e.ping<is.ping&&(is=e)}hs()}})(),document.getElementById("normalServerSelect").onchange=function(){var t=document.getElementById("normalServerSelect");es=t.selectedIndex,as=ys[es],console.log("changed ",t.selectedIndex),console.log("Server changed to "+as.name+"..."),document.getElementById("captcha-1").style.visibility="visible",an()&&ja.close(),document.getElementById("spawnXpLabel").style.opacity=0,ls(),fs(),ms(as)};var ys=[];function bs(){ys=[],foundIndex=1;for(var t=document.getElementById("normalServerSelect");t.lastChild;)t.removeChild(t.lastChild);for(var e in Hi){let s=Hi[e];(i=document.createElement("option")).text=e,i.disabled=!0,i.classList="normalServerSelectList",t.add(i),ys.push(null);for(var a=0;a<s.length;a++){let e=s[a];var i;(i=document.createElement("option")).classList="normalServerSelectList",i.text=e.name+" ["+e.playersCount+" players ]",ys.push(e),t.add(i)}}for(var s=0;s<ys.length;s++){var r=ys[s];null!=r&&r.serverConnURL==as.serverConnURL&&(foundIndex=s)}t.selectedIndex=foundIndex}function ws(t){this.animStep=1,this.animStartT=ft,this.animDur=3e3,this.timedOut=!1,this.xShift=w(-10,10),this.yShift=w(-10,10),this.anlgeShift=w(-10,10),this.text=new E(16,"white"),this.text.setText((t>=0?"+ ":"")+M(t)+" XP"),this.textFontSz=30;var e="white";t>1e4&&(e="#c7b753",this.textFontSz=40,this.animDur+=1e3),t>1e5&&(e="#fdca5b",this.textFontSz=45,this.animDur+=2e3),t>1e6&&(e="#c7b753",this.textFontSz=51,this.animDur+=2e3),t<0&&(e="#c65f59",this.animDur+=2e3),this.text.setColor(e),this.draw=function(){if(!Ve){var t=C((ft-this.animStartT)/this.animDur,0,1);Ot.save();var e=ge/2,a=ue-85*ie+t*(-150*ie);Ot.translate(e,a),Ot.rotate(I(this.anlgeShift*t)),Ot.globalAlpha=1-t,this.text.setFontSize(this.textFontSz*ie),this.text.x=0,this.text.y=0,this.text.draw(),Ot.restore(),ft>=this.animStartT+this.animDur&&(this.timedOut=!0)}}}function vs(t,e,a,i){this.animStep=1,this.animStartT=ft,this.timedOut=!1,this.xShift=w(-10,10),this.yShift=w(-10,10),this.anlgeShift=w(-10,10),this.text=new E(e,a),this.text.setText(t),this.textFontSz=e,this.animDur=i,this.text.setColor(a),this.draw=function(){if(!Ve){var t=C((ft-this.animStartT)/this.animDur,0,1);Ot.save();var e=ge/2,a=ue-85*ie+t*(-150*ie);Ot.translate(e,a),Ot.globalAlpha=1-t,this.text.setFontSize(this.textFontSz*ie),this.text.x=0,this.text.y=0,this.text.draw(),Ot.restore(),ft>=this.animStartT+this.animDur&&(this.timedOut=!0)}}}function Ts(t){this.animStep=1,this.animStartT=ft,this.animDur=1e4,this.timedOut=!1,this.xShift=0,this.yShift=0,this.anlgeShift=0,this.text=new E(16,"white"),this.text.setText(t),this.text.multiLine=!0,this.textFontSz=30,this.text.setColor("white"),this.draw=function(){if(!Ve){var t=C((ft-this.animStartT)/this.animDur,0,1);Ot.save();var e=ge/2,a=ue-85*ie+t*(-150*ie);Ot.translate(e,a),Ot.rotate(I(this.anlgeShift*t)),Ot.globalAlpha=1-t,this.text.setFontSize(this.textFontSz*ie),this.text.x=0,this.text.y=0,this.text.draw(),Ot.restore(),ft>=this.animStartT+this.animDur&&(this.timedOut=!0)}}}let ks=[];function Is(t,e,a){this.img=t,this.name=e,this.rad=0,this.hovering=!1,this.position={x:0,y:0},this.typeAbility=a}Is.prototype.hoveringCheck=function(t,e){return!(t<this.position.x-this.rad/2||t>this.position.x+this.rad/2||e<this.position.y-this.rad/2||e>this.position.y+this.rad/2)},Is.prototype.draw=function(t,e,a){let i=(Rt=window.devicePixelRatio)*Math.max(yn/1920,bn/1080);a*=i,e*=i,this.rad=e,this.position={x:ge/2+a*Math.cos(t),y:ue/2+a*Math.sin(t)},Ot.save(),Ot.fillStyle="black",Ot.beginPath(),Ot.roundRect(this.position.x-e/2,this.position.y-e/2,e,e,e/9),Ot.globalAlpha=.3,Ot.fill(),this.hovering&&(Ot.fillStyle="white",Ot.roundRect(this.position.x-e/2,this.position.y-e/2,e,e,e/9),Ot.globalAlpha=.3,Ot.fill()),Ot.closePath(),Ot.restore(),Ot.save();var s=ve(this.img+".png");if(s){let t=.7*e;t>0&&Ot.drawImage(s,this.position.x-t/2,this.position.y-t/2,t,t)}Ot.restore(),Ot.save(),Ot.translate(this.position.x,this.position.y),this.buttonTXT||(this.buttonTXT=new E(12.5,"white"),this.buttonTXT.renderScale=1.5,this.buttonTXT.multiLine=!0,this.buttonTXT.setText(this.name));let r=e/5;if(this.buttonTXT.setFontSize(r),this.buttonTXT.y=-e/2+12.5*ie,!this.buttonTXT2){this.buttonTXT2=new E(12.5,"white"),this.buttonTXT2.renderScale=1.5,this.buttonTXT2.multiLine=!0;let t="";switch(this.typeAbility){case 0:t="Passive";break;case 1:t="Main Ability";break;case 2:t="Second Ability"}this.buttonTXT2.setText(t)}this.buttonTXT2.setFontSize(r),this.buttonTXT2.y=e/2-12.5*ie,r>1&&(this.buttonTXT.draw(),this.buttonTXT2.draw()),Ot.restore()},Is.prototype.onClick=function(){let t=new $r(100);t.writeUInt8(29),t.writeUInt8(ks.indexOf(this)),en(t),Ps=!1};var Ps=!1,As=0,Cs=0,Ss=new E(30,"white");Ss.setText("CHOOSE SKILL"),Ms.prototype={id:0,oType:20,spawnTime:0,rPer:0,updateTime:0,x:0,y:0,ox:0,oy:0,nx:0,ny:0,rad:0,oRad:0,nRad:0,angle:0,oAngle:0,angleDelta:0,moveUpdF:0,z:0,name:"",dead:!1,type:0,curBiome:0,isRectangle:!1,rectW:0,rectH:0,specType:0,toString:function(){return"[GObj t="+this.oType+" id="+this.id+"]"}},Ms.prototype.flag_hurt=!1,Ms.prototype.hpPer=Ms.prototype.hpPer_n=Ms.prototype.hpBarA=0,Ms.prototype.infectionPer=Ms.prototype.infectionPer_n=Ms.prototype.infectionBarA=0,Ms.prototype.hpBarTimeoutT=0,Ms.prototype.alwaysPlainOutline=!1,Ms.prototype.doesDrawEffectScale=!1,Ms.prototype.drawEffectScale_Slow=!1,Ms.prototype.customInterfaceDraw=!1,Ms.prototype.animateRadOnSpawn=!0;var xs="#377B0C";function Ms(t){switch(this.oType=t,this.rPer=w(0,1),this.spawnTime=ft,this.updateTime=ft,this.firstPosUpd=!0,this.chatLines=[],this.oType){case 90:case 91:case 92:case 93:case 20:case 29:case 31:case 32:case 30:case 21:case 18:case 59:case p:case 22:case 24:case 23:case 5:case 13:case 9:case 26:case 35:case 36:case 37:case 38:case 81:case 86:case 84:case 82:case 39:case 60:case 48:case 49:case 99:case 56:case 50:case 51:case 52:case 53:case 54:case 63:case 66:case 65:case 68:case 69:this.doesDrawEffectScale=!0}5!=this.oType&&9!=this.oType&&13!=this.oType&&this.oType!=p||(this.drawEffectScale_Slow=!0)}Ms.prototype.customDraw=function(t){switch(this.oType){case 3:switch(this.curBiome){case ut:t?_(0,0,this.rad,it):_(0,0,this.rad-1.5,"#409816");break;case mt:case gt:t?_(0,0,this.rad,this.getOutlineColor()):_(0,0,this.rad-1.5,"#614129");break;case dt:t?_(0,0,this.rad,this.getOutlineColor()):_(0,0,this.rad-1.5,at);break;case pt:if(0==this.specType)t?_(0,0,this.rad,"white"):_(0,0,this.rad-1.5,"#f7f7f7");else if(Ft=ve("img/ChristmasTree.png")){var e=1.22*this.rad;Ot.drawImage(Ft,-e,-e,2*e,2*e)}break;default:t?_(0,0,this.rad,0==this.specType?this.getOutlineColor():"#FF0000"):_("",K)}break;case 27:Ot.save();var a=0,i=(ft-this.spawnTime)/1e3,s=2;a=(v=1.5)*Math.sin(2*Math.PI/s*i);var r="#CF6259";switch(this.curBiome){case ut:r="#f39253";break;case pt:r="#ac443c"}Ot.fillStyle=r;var n=.8*this.rad;this.drawOutlinedCircle("",r),Ot.globalAlpha*=.98;var o=.5*-n,l=.5*-n+10*this.rPer,h=Math.max(0,.65*n+a)+2;_(o,l,h,r),o=.5*n,l=.5*-n-10*this.rPer,h=Math.max(0,.73*n-a),_(o,l,h,r),o=.6*n,l=.4*n,h=Math.max(0,.78*n+a),_(o,l,h,r),o=.5*-n,l=.5*n+10*this.rPer,h=Math.max(0,.6*n+this.rPer-a),_(o,l,h,r),Ot.restore();break;case 15:this.drawOutlinedCircle("","#1AAE31"),Ot.save(),a=0,i=(ft-this.spawnTime)/1e3,s=2,a=(v=1.5)*Math.sin(2*Math.PI/s*i),Ot.fillStyle=q,e=.75*this.rad,Ot.globalAlpha*=.8,Ot.beginPath(),Ot.arc(.5*-e,.5*-e+10*this.rPer,Math.max(0,.65*e+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.5*e,.5*-e-10*this.rPer,Math.max(0,.73*e-a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.6*e,.4*e,Math.max(0,.78*e+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.5*-e,.5*e,Math.max(0,.6*e+this.rPer-a),0,2*Math.PI),Ot.fill(),Ot.restore();break;case 28:Ot.save(),a=0,i=(ft-this.spawnTime)/1e3,s=2,a=(v=1.5)*Math.sin(2*Math.PI/s*i),n=.8*this.rad;var d="#C67019";this.drawOutlinedCircle("",d),Ot.globalAlpha*=.98,o=.5*-n,l=.5*-n+10*this.rPer,h=Math.max(0,.65*n+a)+2,_(o,l,h,d),o=.5*n,l=.5*-n-10*this.rPer,h=Math.max(0,.73*n-a),_(o,l,h,d),o=.6*n,l=.4*n,h=Math.max(0,.78*n+a),_(o,l,h,d),o=.5*-n,l=.5*n+10*this.rPer,h=Math.max(0,.6*n+this.rPer-a),_(o,l,h,d),Ot.restore();break;case 4:Ot.save();var g=$;switch(this.curBiome){case pt:g="#7790d8";break;case ut:g="#17744C"}this.drawOutlinedCircle("",g),He||Ot.rotate(2*this.rPer*Math.PI),a=0,i=(ft-this.spawnTime)/1e3,s=7,a=(v=4)*Math.sin(2*Math.PI/s*i),Ot.fillStyle=g,Ot.beginPath(),Ot.arc(0,0,Math.max(0,this.rad-T+a),0,2*Math.PI),Ot.fill(),He||(Ot.beginPath(),Ot.arc(.3*this.rad,.35*-this.rad+15*this.rPer,Math.max(0,.35*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.5*this.rad,.5*this.rad+15*this.rPer,Math.max(0,.4*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.55*-this.rad*.707,.55*+this.rad*.707+15*this.rPer,Math.max(0,.5*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.75*-this.rad,.35*-this.rad+15*this.rPer,Math.max(0,.3*this.rad+a),0,2*Math.PI),Ot.fill()),Ot.restore();break;case 20:var u=st;this.curBiome==pt?u="#ac443c":this.curBiome==ut&&(u="#f39253"),this.drawOutlinedCircle("",u);break;case 29:(Ft=ve("img/banana"+(this.isEdibleOutlined()?"_e":"")+".png"))&&(e=this.rad,Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e));break;case 31:(Ft=ve("img/rasp"+(this.isEdibleOutlined()?"_e":"")+".png"))&&(e=this.rad,Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e));break;case 32:(Ft=ve("img/pear"+(this.isEdibleOutlined()?"_e":"")+".png"))&&(e=this.rad,Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e));break;case 35:(Ft=ve("img/seaweed"+(this.isEdibleOutlined()?"_e":"")+".png"))&&(e=this.rad,Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e));break;case 36:(Ft=ve("img/starfish"+(this.isEdibleOutlined()?"_e":"")+".png"))&&(e=this.rad,Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e));break;case 37:(Ft=ve("img/kelp"+(this.isEdibleOutlined()?"_e":"")+".png"))&&(e=this.rad,Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e));break;case 84:(Ft=ve("img/rockonut/rockonut"+(this.isEdibleOutlined()?"_e":"")+".png"))&&(Ot.save(),e=this.rad,Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e),Ot.restore());break;case 82:(Ft=ve("img/dragonfruit/dragonfruit"+(this.isEdibleOutlined()?"_e":"")+".png"))&&(Ot.save(),e=this.rad,Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e),Ot.restore());break;case 86:(Ft=ve("img/gifts/"+this.specType+".png"))&&(Ot.save(),e=this.rad,Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e),Ot.restore());break;case 81:(Ft=ve("img/eventCandy/"+this.curBiome+"/"+this.specType+".png"))&&(e=this.rad,Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e));break;case 38:(Ft=ve("img/clam"+(this.isEdibleOutlined()?"_e":"")+".png"))&&(e=this.rad,Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e));break;case 83:(Ft=ve("skins/beaver/dam.png"))&&(e=1*this.rad,Ot.save(),Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e),Ot.restore());break;case 39:(Ft=ve("img/conch"+(this.isEdibleOutlined()?"_e":"")+".png"))&&(e=1*this.rad,Ot.save(),Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e),Ot.restore());break;case 30:(Ft=ve("img/coconut"+(this.isEdibleOutlined()?"_e":"")+".png"))&&(e=this.rad,Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e));break;case 62:case 61:_(0,0,this.rad,"black");break;case 64:1==this.specType&&(Ft=ve("skins/falcon/1/sleigh.png"))&&(e=this.rad,Ot.save(),Ot.rotate(this.angle-I(180)),Ot.drawImage(Ft,-e,-e,2*e,2*e),Ot.restore());break;case 66:(Ft=ve("img/ostrichEgg"+(this.isEdibleOutlined()?"_e":"")+".png"))&&(e=this.rad,Ot.save(),Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e),Ot.restore());break;case 63:var m="";1==this.specType&&(m="golden"),(Ft=ve("img/"+m+"egg"+(this.isEdibleOutlined()?"_e":"")+".png"))&&(e=this.rad,Ot.save(),Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e),Ot.restore());break;case 68:(Ft=ve("img/beehive"+(this.isEdibleOutlined()?"_e":"")+".png"))&&(e=this.rad,Ot.save(),Ot.rotate(.5*this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e),Ot.restore());break;case 69:(Ft=ve("img/honeycomb"+(this.isEdibleOutlined()?"_e":"")+".png"))&&(e=this.rad,Ot.save(),Ot.rotate(.5*this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e),Ot.restore());break;case 65:(Ft=ve("img/quill.png"))&&(e=this.rad,Ot.rotate(this.angle),Ot.drawImage(Ft,-e,-e,2*e,2*e));break;case 26:this.drawOutlinedCircle("","#FF911E"),Ot.rotate(this.rPer*Math.PI*2),_(.25*this.rad,.4*this.rad,(.3+.15*this.rPer)*this.rad,"#905113");break;case 102:(Ft=ve("img/infernalHeart/infernalHeart"+this.specType+".png"))&&(e=this.rad,Ot.save(),Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e),Ot.restore()),i=(ft-this.spawnTime)/1e3,(vt=Math.max(0,D(i,10,10,2)-9.5))>0&&(Ft=ve("img/infernalHeart/infernalHeart_light.png"))&&(e=this.rad,Ot.save(),Ot.globalAlpha=vt,Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e),Ot.restore());break;case 46:var f="";switch(this.curBiome){case dt:f="_ocean";break;case pt:f="_arctic";break;case gt:f="_volcano";break;case ut:f="_jungle";break;default:f=""}(Ft=ve("img/healingStone"+f+".png"))&&(e=this.rad,Ot.save(),Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e),Ot.restore());break;case 42:_(0,0,Math.max(0,1*this.rad),1==this.specType?"#6b402b":"#815427"),1!=this.specType&&_(0,0,Math.max(0,.6*this.rad),"#6e4b29"),_(0,0,Math.max(0,.5*this.rad),1==this.specType?"#603a28":"#543d28"),_(0,0,Math.max(0,.45*this.rad),1==this.specType?"#563322":"#3f3124"),_(0,0,Math.max(0,.33*this.rad),1==this.specType?"#40281d":"#241e19"),1!=this.specType&&_(0,0,Math.max(0,.25*this.rad),"#120f0d"),_(0,0,Math.max(0,.2*this.rad),1==this.specType?Q:Z);break;case 44:if(t)He||(Ot.fillStyle=1==this.specType?"#503126":"#73602A",Ot.beginPath(),Ot.arc(0,0,.95*this.rad,0,2*Math.PI),Ot.fill());else{var y=.15*this.rad,b=null,w=null,v=(a=0,i=(ft-this.spawnTime)/1e3,s=4,2.5),T=4;if(He)b=w=y;else{a=v*Math.sin(2*Math.PI/s*i),s=1.5;var k=(v=8)*Math.sin(2*Math.PI/s*i);b=Math.max(0,y+k),w=Math.max(0,y-k)}Ot.fillStyle=1==this.specType?Q:Z,Ot.beginPath(),Ot.arc(0,0,Math.max(0,this.rad-T+a),0,2*Math.PI),Ot.fill(),He||(Ot.beginPath(),Ot.arc(.45*this.rad,.45*-this.rad+15*this.rPer,Math.max(0,.5*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.5*this.rad,.5*this.rad+15*this.rPer,Math.max(0,.5*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.55*-this.rad*.707,.55*+this.rad*.707+15*this.rPer,Math.max(0,.5*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.75*-this.rad,.35*-this.rad+15*this.rPer,Math.max(0,.5*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(this.rad+10*this.rPer,50*this.rPer,8,0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(this.rad-20*this.rPer,50*this.rPer,10,0,2*Math.PI),Ot.fill()),Ot.fillStyle=1==this.specType?"#fc9400":"yellow",Ot.save(),Ot.globalAlpha=.2,Ot.rotate(this.rPer*Math.PI*2),Ot.beginPath(),Ot.arc(-.35*this.rad,-.33*this.rad,b,0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.35*this.rad,-.32*this.rad,w,0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.35*this.rad,.36*this.rad,b,0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(-.35*this.rad,.35*this.rad,w,0,2*Math.PI),Ot.fill(),Ot.restore()}break;case 58:if(Ot.save(),a=0,i=(ft-this.spawnTime)/1e3,s=4,a=(v=2.5)*Math.sin(2*Math.PI/s*i),t)T=4,Ot.fillStyle="#5e5348",Ot.beginPath(),Ot.arc(0,0,this.rad,0,2*Math.PI),Ot.fill();else{for(Ot.fillStyle="#706962",Ot.beginPath(),Ot.arc(0,0,Math.max(0,this.rad-T+a),0,2*Math.PI),Ot.fill(),He||(Ot.beginPath(),Ot.arc(.45*this.rad,.45*-this.rad+15*this.rPer,Math.max(0,.5*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.5*this.rad,.5*this.rad+15*this.rPer,Math.max(0,.4*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.55*-this.rad*.707,.55*+this.rad*.707+15*this.rPer,Math.max(0,.5*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.75*-this.rad,.35*-this.rad+15*this.rPer,Math.max(0,.3*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(this.rad+10*this.rPer,50*this.rPer,8,0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(this.rad-20*this.rPer,50*this.rPer,10,0,2*Math.PI),Ot.fill()),Ot.save(),Ot.globalAlpha=1-this.underwaterA,i=(ft-this.spawnTime)/1e3,s=1.5,k=(v=8)*Math.sin(2*Math.PI/s*i),this.flag_underWater&&(Ot.globalAlpha*=.5,11==this.animalType&&(Ot.globalAlpha=.3)),Ot.fillStyle="yellow",y=.15*this.rad,Ot.beginPath(),Vi=1;Vi<=1;Vi++)Ot.save(),Ot.globalAlpha=.2,Ot.rotate(this.rPer*Math.PI*2*Vi),Ot.beginPath(),Ot.arc(-.35*this.rad,-.33*this.rad,Math.max(0,y+k),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.35*this.rad,-.32*this.rad,Math.max(0,y-k),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.35*this.rad,.36*this.rad,Math.max(0,y+k),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(-.35*this.rad,.35*this.rad,Math.max(0,y-k),0,2*Math.PI),Ot.fill(),Ot.restore();Ot.restore()}Ot.restore();break;case 60:(Ft=ve("img/cloudberry"+(this.isEdibleOutlined()?"_e":"")+".png"))&&(e=this.rad,Ot.save(),e=this.rad,Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e),Ot.restore());break;case 48:(Ft=ve("img/arcticNut"+(this.isEdibleOutlined()?"_e":"")+".png"))&&(e=this.rad,Ot.save(),e=this.rad,Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e),Ot.restore());break;case 49:(Ft=ve("img/carrot"+(this.isEdibleOutlined()?"_e":"")+".png"))&&(e=this.rad,Ot.save(),Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e),Ot.restore());break;case 50:(Ft=ve("img/watermelon"+(this.isEdibleOutlined()?"_e":"")+".png"))&&(e=this.rad,Ot.save(),Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e),Ot.restore());break;case 56:Ot.save(),_(0,0,this.rad,this.isEdibleOutlined()?nt:ht(this.curBiome)),_(0,0,Math.max(0,this.rad-2),"#74e61e"),Ot.restore();break;case 51:(Ft=ve("img/watermelonSlice"+(this.isEdibleOutlined()?"_e":"")+".png"))&&(e=this.rad,Ot.save(),Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e),Ot.restore());break;case 100:(Ft=ve("img/meatball"+this.specType+".png"))&&(e=this.rad,Ot.save(),Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e),Ot.restore());break;case 52:case 53:case 54:(Ft=ve("img/meat"+(this.isEdibleOutlined()?"_e":"")+".png"))&&(e=this.rad,Ot.save(),Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e),Ot.restore());break;case 22:case 24:T=2;var P=24==this.oType?15:9;Ot.fillStyle=this.getOutlineColor(),Ot.beginPath(),Ot.rect(-P/2-T,-T,P+2*T,.8*this.rad+2*T),Ot.fill(),Ot.fillStyle="#FFCA49",Ot.beginPath(),Ot.rect(-P/2,0+T/2,P,.8*this.rad-T/2),Ot.fill(),He||(Ot.beginPath(),Ot.arc(0,0,Math.max(0,this.rad),Math.PI,2*Math.PI),Ot.fillStyle=this.getOutlineColor(),Ot.fill()),Ot.beginPath(),Ot.arc(0,0,Math.max(0,this.rad-T),Math.PI,2*Math.PI),Ot.fillStyle=24==this.oType?"#B8413B":"#CFAD59",Ot.fill();break;case 25:T=2,Ot.save(),a=0,i=(ft-this.spawnTime)/1e3,s=2,a=(v=1.5)*Math.sin(2*Math.PI/s*i),Ot.fillStyle="#45D157",Ot.globalAlpha*=.93,Ot.beginPath(),Ot.arc(.5*-this.rad,.5*-this.rad+10*this.rPer,Math.max(0,.55*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.5*this.rad,.5*-this.rad-10*this.rPer,Math.max(0,.43*this.rad-a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.6*this.rad,.4*this.rad,Math.max(0,.48*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.5*-this.rad,.5*this.rad,Math.max(0,.4*this.rad+this.rPer-a),0,2*Math.PI),Ot.fill(),Ot.restore(),P=20,Ot.fillStyle=this.getOutlineColor(),Ot.beginPath(),Ot.rect(-P/2-T,-T,P+2*T,.8*this.rad+2*T),Ot.fill(),Ot.fillStyle="#FFCA49",Ot.beginPath(),Ot.rect(-P/2,0+T/2,P,.8*this.rad-T/2),Ot.fill(),Ot.beginPath(),Ot.arc(0,0,Math.max(0,.8*this.rad),Math.PI,2*Math.PI),Ot.fillStyle=this.getOutlineColor(),Ot.fill(),Ot.beginPath(),Ot.arc(0,0,Math.max(0,.8*this.rad-T),Math.PI,2*Math.PI),Ot.fillStyle="#B8413B",Ot.fill();break;case 23:(Ft=ve("img/lillypad"+(this.isEdibleOutlined()?"_e":"")+".png"))&&(e=this.rad,Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e));break;case 5:this.curBiome==ut?(this.drawOutlinedCircle("","#473E25"),_(0-this.rPer,0-this.rPer,Math.max(0,this.rad-7),"#3C321C"),_(0+this.rPer,1,Math.max(0,this.rad-12),"#292210")):(this.drawOutlinedCircle("","#9F8641"),_(0-this.rPer,0-this.rPer,Math.max(0,this.rad-7),"#7E6A35"),_(0+this.rPer,1,Math.max(0,this.rad-12),"#5C4E28"));break;case c:console.log("ERROR: "+this+" should be subclassed!");break;case 13:i=(ft-this.spawnTime)/1e3,s=1.2;var A=2.5*Math.cos(2*Math.PI/s*i),C=2.5*Math.sin(2*Math.PI/s*i);this.drawOutlinedCircle("","#2CAAC4"),He||_(0+A/2-this.rPer,0+C/2-this.rPer,Math.max(0,this.rad-6),"#2D93B0"),_(0+A/4.5+this.rPer,1+C/1.5,Math.max(0,this.rad-14),"#29A0BA"),_(0+A/1.5-2*this.rPer,C,Math.max(0,this.rad-18.5+C/5),"#2B8CAA"),_(0+A/1.5-2*this.rPer,C,Math.max(0,this.rad-24.5+C/11),"#28829E");break;case 9:this.curBiome==ut?(this.drawOutlinedCircle("","#544724"),He||_(0-this.rPer,0-this.rPer,Math.max(0,this.rad-7),"#3C321C"),_(0+this.rPer,1,Math.max(0,this.rad-14),"#292210"),_(0-2*this.rPer-3,1,Math.max(0,this.rad-18.5),"#231C0D")):3==this.curBiome?(this.drawOutlinedCircle("","#6A521A"),He||_(0-this.rPer,0-this.rPer,Math.max(0,this.rad-7),"#564419"),_(0+this.rPer,1,Math.max(0,this.rad-14),"#493A17"),_(0-2*this.rPer-3,1,Math.max(0,this.rad-18.5),"#392D13")):(this.drawOutlinedCircle("","#9F8641"),He||_(0-this.rPer,0-this.rPer,Math.max(0,this.rad-7),"#7E6A35"),_(0+this.rPer,1,Math.max(0,this.rad-14),"#5C4E28"),_(0-2*this.rPer-3,1,Math.max(0,this.rad-18.5),"#40371D"));break;case 6:Ot.save(),a=0,i=(ft-this.spawnTime)/1e3,s=2,a=(v=1.5)*Math.sin(2*Math.PI/s*i);var S="#45D157";switch(this.curBiome){case ut:S="#377b0c";break;case dt:S="#786810";break;case pt:S="#CED0D0";break;default:case ct:S="#45D157";break;case gt:S="#4c3324"}Ot.fillStyle=S,Ot.globalAlpha*=.93,Ot.beginPath(),Ot.arc(.5*-this.rad,.5*-this.rad+10*this.rPer,Math.max(0,.65*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.5*this.rad,.5*-this.rad-10*this.rPer,Math.max(0,.73*this.rad-a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.6*this.rad,.4*this.rad,Math.max(0,.78*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.5*-this.rad,.5*this.rad,Math.max(0,.6*this.rad+this.rPer-a),0,2*Math.PI),Ot.fill(),Ot.restore();break;case 47:if(Ot.save(),a=0,i=(ft-this.spawnTime)/1e3,s=6,a=(v=1.5)*Math.sin(2*Math.PI/s*i),T=4,this.isRectangle){Ot.fillStyle=0==this.specType?"#8A681B":"#4c2f25",Ot.fillRect(-this.rectW/2,-this.rectH/2,this.rectW,this.rectH);var x=-this.rectW/2,M=this.rectW/2,N=-this.rectH/2,F=this.rectH/2;Ot.beginPath(),Ot.moveTo(x,N);var U=20,E=[-15,10,-10,12,0,5,-10,5,-12,5,10,0,-6],B=45,O=0,R=15,W=me-this.x,j=0-this.x,G=fe-this.y,z=0-this.y;for(o=x-U,l=N;l<F;l+=B)Ot.lineTo(Math.min(W,Math.max(j,o+E[O])),l),O=(O+1)%E.length;for(Ot.lineTo(x,F),l=F+U,o=x;o<M;o+=B)Ot.lineTo(o,Math.min(G,Math.max(z,l+E[O]))),O=(O+1)%E.length;for(Ot.lineTo(M,F),o=M+U,l=F;l>N;l-=B)Ot.lineTo(Math.min(W,Math.max(j,o+E[O])),l),O=(O+1)%E.length;for(Ot.lineTo(M,N),l=N-U,o=M;o>x;o-=B)Ot.lineTo(o,Math.min(G,Math.max(z,l+E[O]))),O=(O+1)%E.length;Ot.fill()}else Ot.fillStyle=0==this.specType?"#604729":"#4c2f25",He||Ot.rotate(2*this.rPer*Math.PI),Ot.beginPath(),Ot.arc(0,0,this.rad,0,2*Math.PI),Ot.fill(),He||(Ot.fillStyle=0==this.specType?"#8A681B":"#59362a",Ot.beginPath(),Ot.arc(0,0,Math.max(0,this.rad-T+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.45*this.rad,.45*-this.rad+15*this.rPer,Math.max(0,.5*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.5*this.rad,.5*this.rad+15*this.rPer,Math.max(0,.4*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.55*-this.rad*.707,.55*+this.rad*.707+15*this.rPer,Math.max(0,.5*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.75*-this.rad,.35*-this.rad+15*this.rPer,Math.max(0,.3*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.beginPath(),Ot.arc(this.rad+10*this.rPer,50*this.rPer,8,0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.beginPath(),Ot.arc(this.rad-20*this.rPer,50*this.rPer,10,0,2*Math.PI),Ot.fill(),Ot.beginPath());var H=35;on(-this.rectW/2+H,-this.rectH/2+H,this.rectW/2-H,this.rectH/2-H,this.x,this.y),Ot.restore();break;case 55:Ot.save(),He||Ot.rotate(2*this.rPer*Math.PI),a=0,i=(ft-this.spawnTime)/1e3,s=6,a=(v=1.5)*Math.sin(2*Math.PI/s*i),T=4,Ot.fillStyle="#605649",Ot.beginPath(),Ot.arc(0,0,this.rad,0,2*Math.PI),Ot.fill(),He||(Ot.fillStyle="#5e4f36",Ot.beginPath(),Ot.arc(0,0,Math.max(0,this.rad-T+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.45*this.rad,.45*-this.rad+15*this.rPer,Math.max(0,.5*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.5*this.rad,.5*this.rad+15*this.rPer,Math.max(0,.4*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.55*-this.rad*.707,.55*+this.rad*.707+15*this.rPer,Math.max(0,.5*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.75*-this.rad,.35*-this.rad+15*this.rPer,Math.max(0,.3*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.beginPath(),Ot.arc(this.rad+10*this.rPer,50*this.rPer,8,0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.beginPath(),Ot.arc(this.rad-20*this.rPer,50*this.rPer,10,0,2*Math.PI),Ot.fill(),Ot.beginPath()),Ot.restore();break;case 7:Ot.save(),He||Ot.rotate(2*this.rPer*Math.PI),a=0,i=(ft-this.spawnTime)/1e3,s=6,a=(v=1.5)*Math.sin(2*Math.PI/s*i),T=4,Ot.fillStyle=this.curBiome==ut?"#392E10":"#8B7833",Ot.beginPath(),Ot.arc(0,0,this.rad,0,2*Math.PI),Ot.fill(),He||(Ot.fillStyle=this.curBiome==ut?"#3D320B":"#98803A",Ot.beginPath(),Ot.arc(0,0,Math.max(0,this.rad-T+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.45*this.rad,.45*-this.rad+15*this.rPer,Math.max(0,.5*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.5*this.rad,.5*this.rad+15*this.rPer,Math.max(0,.4*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.55*-this.rad*.707,.55*+this.rad*.707+15*this.rPer,Math.max(0,.5*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.75*-this.rad,.35*-this.rad+15*this.rPer,Math.max(0,.3*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.beginPath(),Ot.arc(this.rad+10*this.rPer,50*this.rPer,8,0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.beginPath(),Ot.arc(this.rad-20*this.rPer,50*this.rPer,10,0,2*Math.PI),Ot.fill(),Ot.beginPath()),Ot.restore();break;case 17:Ot.save(),He||Ot.rotate(2*this.rPer*Math.PI),a=0,i=(ft-this.spawnTime)/1e3,s=6,a=(v=1.5)*Math.sin(2*Math.PI/s*i),T=4,Ot.fillStyle="#8CC3C7",Ot.beginPath(),Ot.arc(0,0,this.rad,0,2*Math.PI),Ot.fill(),He||(Ot.fillStyle="#9DDADE",Ot.beginPath(),Ot.arc(0,0,Math.max(0,this.rad-T+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.45*this.rad,.45*-this.rad+15*this.rPer,Math.max(0,.5*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.5*this.rad,.5*this.rad+15*this.rPer,Math.max(0,.4*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.55*-this.rad*.707,.55*+this.rad*.707+15*this.rPer,Math.max(0,.5*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.75*-this.rad,.35*-this.rad+15*this.rPer,Math.max(0,.3*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.beginPath(),Ot.arc(this.rad+10*this.rPer,50*this.rPer,8,0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.beginPath(),Ot.arc(this.rad-20*this.rPer,50*this.rPer,10,0,2*Math.PI),Ot.fill(),Ot.beginPath()),Ot.restore();break;case 94:Ot.save(),He||Ot.rotate(2*this.rPer*Math.PI),t?(Ot.fillStyle=at,Ot.beginPath(),Ot.arc(0,0,this.rad,0,2*Math.PI),Ot.fill()):(a=0,i=(ft-this.spawnTime)/1e3,s=4,a=(v=5.5)*Math.sin(2*Math.PI/s*i),T=4,Ot.fillStyle="#263e2c",Ot.beginPath(),Ot.arc(0,0,Math.max(0,this.rad-T+a),0,2*Math.PI),Ot.fill(),He||(Ot.beginPath(),Ot.arc(.45*this.rad,.45*-this.rad+15*this.rPer,Math.max(0,.5*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.5*this.rad,.5*this.rad+15*this.rPer,Math.max(0,.4*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.55*-this.rad*.707,.55*+this.rad*.707+15*this.rPer,Math.max(0,.5*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.75*-this.rad,.35*-this.rad+15*this.rPer,Math.max(0,.3*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(this.rad+10*this.rPer,50*this.rPer,8,0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(this.rad-20*this.rPer,50*this.rPer,10,0,2*Math.PI),Ot.fill())),Ot.restore();break;case 10:Ot.save(),He||Ot.rotate(2*this.rPer*Math.PI),a=0,i=(ft-this.spawnTime)/1e3,s=4,a=(v=5.5)*Math.sin(2*Math.PI/s*i),T=4,Ot.fillStyle=at,Ot.beginPath(),Ot.arc(0,0,this.rad,0,2*Math.PI),Ot.fill(),this.curBiome==pt?Ot.fillStyle="#8da0d6":Ot.fillStyle=$,Ot.beginPath(),Ot.arc(0,0,Math.max(0,this.rad-T+a),0,2*Math.PI),Ot.fill(),He||(Ot.beginPath(),Ot.arc(.45*this.rad,.45*-this.rad+15*this.rPer,Math.max(0,.5*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.5*this.rad,.5*this.rad+15*this.rPer,Math.max(0,.4*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.55*-this.rad*.707,.55*+this.rad*.707+15*this.rPer,Math.max(0,.5*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.75*-this.rad,.35*-this.rad+15*this.rPer,Math.max(0,.3*this.rad+a),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(this.rad+10*this.rPer,50*this.rPer,8,0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(this.rad-20*this.rPer,50*this.rPer,10,0,2*Math.PI),Ot.fill()),Ot.restore();break;case 34:Ot.save(),He||Ot.rotate(2*this.rPer*Math.PI),a=0,i=(ft-je)/1e3,s=5,a=(v=5.5)*Math.sin(2*Math.PI/s*i),T=4,t?(Ot.fillStyle="red",Ot.beginPath(),Ot.arc(0,0,Math.max(0,this.rad-T+a),0,2*Math.PI),Ot.fill(),He||(Ot.beginPath(),Ot.arc(this.rad+10*this.rPer,50*this.rPer,8,0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(this.rad-20*this.rPer,50*this.rPer,10,0,2*Math.PI),Ot.fill())):(T=4,Ot.fillStyle=at,Ot.beginPath(),Ot.arc(0,0,this.rad,0,2*Math.PI),Ot.fill()),Ot.restore();break;case 12:i=(ft-je)/1e3,s=5,v=-8.5,Ot.fillStyle=et,Ot.fillRect(-this.rectW/2,-this.rectH/2,this.rectW,this.rectH),Ot.beginPath(),H=25,on(-this.rectW/2+H,-this.rectH/2+H,this.rectW/2-H,this.rectH/2-H,this.x,this.y);break;case 33:for(Ot.fillStyle=at,x=-this.rectW/2,M=this.rectW/2,N=-this.rectH/2,F=this.rectH/2,Ot.beginPath(),Ot.moveTo(x,N),U=20,E=[-15,10,-10,12,0,5,-10,5,-12,5,10,0,-6],B=45,O=0,W=me-this.x,j=0-this.x,G=fe-this.y,z=0-this.y,o=x-U,l=N;l<F;l+=B)Ot.lineTo(Math.min(W,Math.max(j,o+E[O])),l),O=(O+1)%E.length;for(Ot.lineTo(x,F),l=F+U,o=x;o<M;o+=B)Ot.lineTo(o,Math.min(G,Math.max(z,l+E[O]))),O=(O+1)%E.length;for(Ot.lineTo(M,F),o=M+U,l=F;l>N;l-=B)Ot.lineTo(Math.min(W,Math.max(j,o+E[O])),l),O=(O+1)%E.length;for(Ot.lineTo(M,N),l=N-U,o=M;o>x;o-=B)Ot.lineTo(o,Math.min(G,Math.max(z,l+E[O]))),O=(O+1)%E.length;Ot.closePath(),Ot.fill();break;case 79:for(Ot.globalAlpha,Ot.fillStyle=xs,Ot.fillRect(-this.rectW/2,-this.rectH/2,this.rectW,this.rectH),H=35,on(-this.rectW/2+H,-this.rectH/2+H,this.rectW/2-H,this.rectH/2-H,this.x,this.y),R=15,x=-this.rectW/2,M=this.rectW/2,N=-this.rectH/2+3,F=-this.rectH/2-R,Ot.beginPath(),Ot.moveTo(x,N),U=0,E=[-15,5,10,0,-10,3,12,4,0,3,5,-10,5,-12,5,10,0,-6],B=60,O=0,W=me-this.x,j=0-this.x,G=fe-this.y,z=0-this.y,o=x-U,Ot.lineTo(x,F),l=F+U,o=x;o<M;o+=B)Ot.lineTo(o,Math.min(G,Math.max(z,l+E[O]))),O=(O+1)%E.length;Ot.lineTo(M,F),Ot.lineTo(M,N),Ot.closePath(),Ot.fill();break;case 16:for(Ot.globalAlpha,Ot.fillStyle="#ececec",Ot.fillRect(-this.rectW/2,-this.rectH/2,this.rectW,this.rectH),x=-this.rectW/2,M=this.rectW/2,N=this.rectH/2-20,F=this.rectH/2,snowLandWidth=this.rectW,snowLandHeight=this.rectH,Ot.beginPath(),Ot.moveTo(x,N),U=20,E=[-15,5,10,0,-10,3,12,4,0,3,5,-10,5,-12,5,10,0,-6],B=60,O=0,W=me-this.x,j=0-this.x,G=fe-this.y,z=0-this.y,o=x-U,Ot.lineTo(x,F),l=F+U,o=x;o<M;o+=B)Ot.lineTo(o,Math.min(G,Math.max(z,l+E[O]))),O=(O+1)%E.length;Ot.lineTo(M,F),Ot.lineTo(M,N),Ot.closePath(),Ot.fill(),H=20,on(-this.rectW/2+H,-this.rectH/2+H,this.rectW/2-H,this.rectH/2-H,this.x,this.y);break;case 97:if(Ot.save(),At=ve("skins/jungle/bies/bies_tornado_body"+this.specType+".png")){e=this.rad;var L=1e3,X=(ft-this.spawnTime)%L/L*2*Math.PI,Y=(L=2e3,(ft-this.spawnTime)%L/L*2*Math.PI);Ot.save(),Ot.rotate(X);var V=Ot.globalAlpha;Ot.globalAlpha=.5*V,i=(ft-this.spawnTime)/1e3,s=2.2,A=6.5*Math.cos(2*Math.PI/s*i),C=6.5*Math.sin(2*Math.PI/s*i),Ot.drawImage(At,-e-A/2.2,-e,2*e,2*e),Ot.restore(),Ot.save(),V=Ot.globalAlpha,Ot.globalAlpha=.6*V,Ot.rotate(Y),Ot.drawImage(At,-e-A/2.2,-e,2*e,2*e),Ot.restore()}Ot.restore();break;case 40:{Ot.globalAlpha;let t=$;for(this.curBiome==ut&&(t="#17744c"),Ot.fillStyle=t,Ot.fillRect(-this.rectW/2,-this.rectH/2,this.rectW,this.rectH),R=15,Ot.fillStyle=t,x=-this.rectW/2,M=this.rectW/2,N=-this.rectH/2+3,F=-this.rectH/2-R,Ot.beginPath(),Ot.moveTo(x,N),U=0,E=[-15,5,10,0,-10,3,12,4,0,3,5,-10,5,-12,5,10,0,-6],B=60,O=0,W=me-this.x,j=0-this.x,G=fe-this.y,z=0-this.y,o=x-U,Ot.lineTo(x,F),l=F+U,o=x;o<M;o+=B)Ot.lineTo(o,Math.min(G,Math.max(z,l+E[O]))),O=(O+1)%E.length;for(Ot.lineTo(M,F),Ot.lineTo(M,N),Ot.closePath(),Ot.fill(),Ot.fillStyle=t,x=-this.rectW/2,M=this.rectW/2,N=this.rectH/2-3,F=this.rectH/2+R,Ot.beginPath(),Ot.moveTo(x,N),U=0,E=[-15,5,10,0,-10,3,12,4,0,3,5,-10,5,-12,5,10,0,-6],B=60,O=0,W=me-this.x,j=0-this.x,G=fe-this.y,z=0-this.y,o=x-U,Ot.lineTo(x,F),l=F+U,o=x;o<M;o+=B)Ot.lineTo(o,Math.min(G,Math.max(z,l+E[O]))),O=(O+1)%E.length;if(Ot.lineTo(M,F),Ot.lineTo(M,N),Ot.closePath(),Ot.fill(),H=20,Ft=ve(this.curBiome==ut?"img/jungleRiverCurrent.png":"img/riverCurrent0.png")){var tt=-this.rectW/2,rt=100;for(Vi=0;Vi<this.rectW/rt-1;Vi++){var yt=this.riverFlowSpeedX*(rt/120)*1e3,bt=tt+(Ct=rt)*((ft-this.spawnTime)%yt/yt);Ot.drawImage(Ft,bt,-this.rectH/2,rt,this.rectH),tt+=rt}}this.curBiome==ut&&(_(this.rectW/2,this.rectH/2.25,65,$),_(this.rectW/2,-.25*this.rectH,65,$),_(this.rectW/2,0,65,$),_(this.rectW/2,.25*this.rectH,65,$),_(this.rectW/2,-this.rectH/2.25,65,$),_(-this.rectW/2-25,this.rectH/2.25,50,"#263e2c"),_(-this.rectW/2-25,-.25*this.rectH,50,"#263e2c"),_(-this.rectW/2-50,0,75,"#263e2c"),_(-this.rectW/2-25,.25*this.rectH,50,"#263e2c"),_(-this.rectW/2-25,-this.rectH/2.25,50,"#263e2c"))}break;case 1:Ot.fillStyle=q,Ot.fillRect(-this.rectW/2,-this.rectH/2,this.rectW,this.rectH),H=45,on(-this.rectW/2+H,-this.rectH/2+H,this.rectW/2-H,this.rectH/2-H,this.x,this.y);break;case 8:var wt=ot;switch(this.curBiome){case ut:wt=lt;break;case gt:wt="#776864"}t?_(0,0,this.rad,this.getOutlineColor()):_(0,0,this.rad-1.5,wt);break;case 11:Ot.fillStyle=at,Ot.beginPath(),Ot.arc(0,0,Math.max(0,this.rad),0,2*Math.PI),Ot.fill(),Ot.fillStyle="#E4D04C",Ot.beginPath(),Ot.arc(10*this.rPer-5,10*this.rPer-5,.8*this.rad,0,2*Math.PI),Ot.fill();break;case 67:a=0,i=(ft-this.spawnTime)/1e3;var vt=D(i,1,5,2),Tt=D(i,1,.2,2);Ot.globalAlpha=.5,_(0,0,this.rad,J);var kt=-(-.2+vt)*I(90);Ot.save(),Ot.scale(1,1+Tt),Ot.globalAlpha=.3,Ot.rotate(kt),_(0,0,this.rad-vt,"#2CAAC4"),Ot.restore(),Ot.save(),Ot.scale(1+Tt,1),Ot.globalAlpha=.1,Ot.rotate(kt),_(0,0,.9*this.rad-vt,"white"),Ot.restore();break;case 21:switch(g=J,this.curBiome){case pt:g="#7790d8";break;case ut:g="#17744C"}this.drawOutlinedCircle("",g);break;case 19:(Ft=ve("img/snowball.png"))?(e=this.rad,Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e)):this.drawOutlinedCircle("","white");break;case p:break;case 59:Ot.save(),_(0,0,this.rad,this.isEdibleOutlined()?nt:ht(this.curBiome)),_(0,0,Math.max(0,this.rad-2),J),Ot.restore(),Ot.save(),s=1.2;var It=.5*(.7-(xt=.3));Ot.globalAlpha*=xt+It+It*Math.sin(2*Math.PI/s*((ft-this.spawnTime)/1e3)),Ot.globalAlpha*=this.effA_poison;var Pt=2.6;_(0,0,this.rad+Pt,"#7FF600"),Ot.restore();break;case 80:Ot.save(),_(0,0,this.rad,this.isEdibleOutlined()?nt:ht(this.curBiome)),_(0,0,Math.max(0,this.rad-2),"#f87b05"),Ot.restore(),Ot.save(),s=1.2,It=.5*(.7-(xt=.3)),Ot.globalAlpha*=xt+It+It*Math.sin(2*Math.PI/s*((ft-this.spawnTime)/1e3)),Ot.globalAlpha*=this.effA_poison,Pt=2.6,_(0,0,this.rad+Pt,"#f00"),Ot.restore();break;case 71:var At;Ot.save(),(At=ve("img/firetornado.png"))&&(e=this.rad,L=1e3,X=(ft-this.spawnTime)%L/L*2*Math.PI,L=2e3,Y=(ft-this.spawnTime)%L/L*2*Math.PI,Ot.save(),Ot.rotate(X),V=Ot.globalAlpha,Ot.globalAlpha=1*V,i=(ft-this.spawnTime)/1e3,s=2.2,A=6.5*Math.cos(2*Math.PI/s*i),C=6.5*Math.sin(2*Math.PI/s*i),Ot.globalAlpha=1,Ot.drawImage(At,-e-A/2.2,-e,2*e,2*e),Ot.restore(),Ot.save(),Ot.rotate(Y),Ot.drawImage(At,-e-A/2.2,-e,2*e,2*e),Ot.restore()),Ot.restore();break;case 101:if(Ot.save(),V=Ot.globalAlpha,Ot.globalAlpha=1*V,e=1.75*this.rad,Ft=ve("skins/volcano/blackdragon/ability_meteorite_fire.png")){Ot.save(),Ot.rotate(this.angle);var Ct=.2*e;He||(i=(ft-this.spawnTime)/1e3,Ct*=1.3*(Tt=D(i,.6,.1,2)+1.1),Ot.scale(1,Tt)),Ot.translate(0,Ct),Ot.drawImage(Ft,-e,-e,2*e,2*e),Ot.restore()}L=2e3,X=(ft-this.spawnTime)%L/L*2*Math.PI,(Ft=ve("skins/volcano/blackdragon/ability_meteorite.png"))&&(Ot.save(),Ot.rotate(X),Ot.drawImage(Ft,-e,-e,2*e,2*e),Ot.restore()),Ot.restore();break;case 18:s=1;var St=(xt=.15)+(It=.5*(.8-xt))+It*Math.sin(2*Math.PI/s*(ft/1e3));Ot.save(),Ot.globalAlpha*=St,_(0,0,Math.max(0,this.rad),"#F6EA65"),Ot.restore(),s=1,k=(xt=.85)+(It=.5*(1-xt))+It*Math.sin(2*Math.PI/s*(ft/1e3));var xt,Mt=Math.trunc(ft/300)%2;if(Ft=ve(1==Mt?"img/fire.png":"img/fire2.png")){var _t=.3*this.rad,Nt=2*this.rad*(2+2*k)/3,Dt=2*this.rad*k;Ot.save(),Ft&&(Ot.globalAlpha*=this.onFireEffA*k,Ot.drawImage(Ft,0+-.5*Nt,_t+-.95*Dt,Nt,Dt)),Ot.restore()}break;case 2:break;case 89:(Ft=ve("img/jungle/alocasia"+(this.isEdibleOutlined()?"_e":"")+".png"))&&(e=this.rad,Ot.save(),Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e),Ot.restore());break;case 90:if(Ft=ve("img/jungle/alocasia_lead"+(this.isEdibleOutlined()?"_e":"")+".png")){e=this.rad,Ot.save(),this.objGetsAngleUpdate?Ot.rotate(this.angle):Ot.rotate(this.rPer*Math.PI*2);let t=(e=.75*this.rad)*(140/150),a=e;Ot.drawImage(Ft,-t,-a,2*e,2*e),Ot.restore()}break;case 91:(Ft=ve("img/jungle/fig"+(this.isEdibleOutlined()?"_e":"")+".png"))&&(e=this.rad,Ot.save(),Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e),Ot.restore());break;case 92:(Ft=ve("img/jungle/starfruit"+(this.isEdibleOutlined()?"_e":"")+".png"))&&(e=this.rad,Ot.save(),Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e),Ot.restore());break;case 99:(Ft=ve("img/jungle/Cacao_Pod"+(this.isEdibleOutlined()?"_e":"")+".png"))&&(e=this.rad,Ot.save(),Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e),Ot.restore());break;case 98:(Ft=ve("img/jungle/flower"+this.specType+(this.isEdibleOutlined()?"_e":"")+".png"))&&(e=this.rad,Ot.save(),Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e),Ot.restore());break;case 95:(Ft=ve("img/jungle/giantLilypad"+(this.isEdibleOutlined()?"_e":"")+".png"))&&(e=this.rad,Ot.save(),Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e),Ot.restore());break;case 93:var Ft;(Ft=ve("img/jungle/rafflesia"+(this.isEdibleOutlined()?"_e":"")+".png"))&&(e=this.rad,Ot.save(),Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(Ft,-e,-e,2*e,2*e),Ot.restore());break;default:this.isRectangle?(Ot.fillStyle="black",Ot.fillRect(-this.rectW/2,-this.rectH/2,this.rectW,this.rectH)):this.drawOutlinedCircle("????","black")}},Ms.prototype.draw=function(t){if(this.moveUpdF=this.moveUpdate(),Ot.save(),Ot.translate(this.x,this.y),this.doesDrawEffectScale&&!He){var e,a=(ft-this.spawnTime)/1e3,i=1.5,s=.1;this.drawEffectScale_Slow&&(i=2.5,s=.04),e=s*Math.sin(2*Math.PI/i*a),Ot.scale(1+e,1+e/2)}this.getOutlineColor(),this.dead?Ot.globalAlpha*=1-this.moveUpdF:Ot.globalAlpha*=Math.min(1,(ft-this.spawnTime)/175),this.customDraw(t),this.flag_hurt&&(Ot.fillStyle="rgba(255,0,0,0.3)",Ot.beginPath(),Ot.arc(0,0,Math.max(0,this.rad-2),0,2*Math.PI),Ot.fill()),this.drawHealthBar(),Ot.restore()},Ms.prototype.drawHealthBar=function(){Ot.save();var t=ft<this.hpBarTimeoutT?1:0;if(this.hpBarA+=.04*(t-this.hpBarA),this.hpBarA>.001){this.hpPer+=.1*(this.hpPer_n-this.hpPer);var e=Math.max(1,this.rad/25),a=20*e,i=5*e,s=-this.rad-10*e;Ot.globalAlpha*=this.hpBarA,Ot.fillStyle="rgba(0,0,0,0.35)",Ot.fillRect(0-a/2,s-i/2,a,i),Ot.fillStyle="#16D729",Ot.fillRect(0-a/2,s-i/2,a*(this.hpPer/100),i)}Ot.restore(),this.id==ea&&this.drawInfectionBar()},Ms.prototype.drawInfectionBar=function(){var t=ft<this.infectionBarTimeoutT?1:0;this.infectionBarA+=.04*(t-this.infectionBarA),this.infectionBarA>.001&&(this.infectionPer+=.1*(this.infectionPer_n-this.infectionPer),this.drawBar("red",this.infectionBarA,this.infectionPer,10))},Ms.prototype.drawBar=function(t,e,a,i){Ot.save();var s=Math.max(1,this.rad/25),r=20*s,n=2.5*s,o=-this.rad-i*s;Ot.globalAlpha=.3,Ot.fillStyle="rgba(0,0,0,0.35)",Ot.fillRect(0-r/2,o-n/2,r,n),Ot.globalAlpha=.7,Ot.fillStyle=t,Ot.fillRect(0-r/2,o-n/2,r*(a/100),n),Ot.restore()},Ms.prototype.drawChat=function(){if(!(this.chatLines.length<1)){Ot.save(),Ot.font="10px Arial",Ot.lineWidth=1,Ot.textAlign="center",Ot.textBaseline="middle";for(var t=this.hpBarA>.01?-10:0,e=[],a=this.chatLines.length-1;a>=0;a--){var i=this.chatLines[a],s=-13*(this.chatLines.length-1-a)+t,r=ft>i.chatFadeT?0:1;if(i.chatA+=.1*(r-i.chatA),Ot.shadowOffsetX=0,Ot.shadowOffsetY=0,i.chatA<.02)r<.02&&(i.chatTxt=""),e.push(a);else{var n=Ot.measureText(i.chatTxt).width;Ot.globalAlpha=.8*i.chatA,Ot.fillStyle=this.getChatColor(this.curBiome),Ot.fillRect(this.x-1-n/2,s+this.y-this.rad-10-5-1,n+2,12),Ot.fillStyle="#F1C34C",He||(Ot.shadowOffsetX=1,Ot.shadowOffsetY=1,Ot.shadowColor="black"),Ot.globalAlpha=i.chatA,Ot.fillText(i.chatTxt,this.x,s+this.y-this.rad-10)}}for(a=0;a<e.length;a++)this.chatLines.splice(e[a],1);Ot.restore()}},Ms.prototype.getChatColor=function(t){return ht(t)},Ms.prototype.getOutlineColor=function(){if(this.alwaysPlainOutline)return ht(this.curBiome);if(this.isEdibleOutlined())return nt;if(2==this.oType&&ke[this.animalType-1]>0&&this.id!=ea)return rt;if(2==this.oType){if(this.curBiome==dt&&this.inSwamp)return"#1F3424";if(this.curBiome==dt&&this.inJungle)return"#105437"}var t=this.curBiome;if(this.flag_inWater)t=dt;else if(this.flag_inLava)return 0==this.flag_inLavaSpec?"#c64a00":"#c62f00";return ht(t)},Ms.prototype.isEdibleOutlined=function(){return 2==this.oType?Ie[this.animalType-1]>0&&this.id!=ea:Ae[this.oType-1]>0},Ms.prototype.gotChat=function(t){this.chatLines&&(this.chatLines.push({chatTxt:t,chatFadeT:ft+4e3,chatA:0}),this.chatLines.length>5&&this.chatLines.splice(this.chatLines.length-1,1))},Ms.prototype.drawOutlinedCircle=function(t,e){var a=this.getOutlineColor();He&&a==K||_(0,0,this.rad,a),_(0,0,Math.max(0,this.rad-1.5),e)},Ms.prototype.moveUpdate=function(){var t=(ft-this.updateTime)/1e3/V;if(t=0>t?0:1<t?1:t,this.dead&&t>=1&&Me.push(this),this.x=t*(this.nx-this.ox)+this.ox,this.y=t*(this.ny-this.oy)+this.oy,this.rad+=.1*(this.nRad-this.rad),null!=this.angle){var e=.1*this.angleDelta;this.angleDelta-=e,this.angle+=e}return Math.min(1,t)},Ms.prototype.readCustomData_onUpdate=function(t){},Ms.prototype.readCustomData_onNewlyVisible=function(t){switch(this.oType){case 40:case 56:case 54:case 53:case 52:case 86:case 88:case 97:case 100:this.specType=t.readUInt8()}if(40==this.oType){var e=this.specType;this.riverSpecT=e,this.riverFlowSpeedX=0==e?1:-1}},Ms.prototype.setObjTypes=function(t,e){this.oType=t},Ms.prototype.worldUpd_readMsgNewlyVisible=function(t,e,a){this.setObjTypes(e,a);var i=t.readUInt32(),s=t.readUInt16()/4,r=t.readUInt16()/4,n=t.readUInt16()/4;this.id=i,this.ox=this.x=this.nx=r,this.oy=this.y=this.ny=n,this.nRad=s,this.oRad=this.rad=0,55!=e&&47!=e&&7!=e&&17!=e&&10!=e&&94!=e&&e!=c&&3!=e&&8!=e&&15!=e&&11!=e||(this.animateRadOnSpawn=!1),this.animateRadOnSpawn||(this.oRad=this.rad=s),this.curBiome=t.readUInt8();var o=t.readUInt8(),l=P(o,0),h=P(o,1),d=P(o,2);this.objGetsAngleUpdate=d;var p=null;if(l&&(p=xe[t.readUInt32()]),p&&(this.updateTime=ft,this.nx=this.x,this.ny=this.y,this.ox=p.x,this.oy=p.y,this.x=p.x,this.y=p.y),h&&(this.isRectangle=!0,this.rectW=t.readUInt16(),this.rectH=t.readUInt16()),this.objGetsAngleUpdate){var g=3*t.readUInt8(),u=this.oType==c?270:90;this.angle=I(g+u)}this.readCustomData_onNewlyVisible(t)},Ms.prototype.worldUpd_readMsgUpdate=function(t){var e=t.readUInt16()/4,a=t.readUInt16()/4,i=t.readUInt16()/4;this.specType=t.readUInt8();var s=t.readUInt8(),r=P(s,0),n=P(s,1);if(this.updateTime=ft,this.ox=this.x,this.oy=this.y,this.oox=this.nx,this.ooy=this.ny,this.nx=e,this.ny=a,this.oRad=this.rad,this.nRad=i,this.flag_hurt=n,r){var o=t.readUInt8();this.hpBarA<.001&&(this.hpPer=o),this.hpPer_n=o,this.hpBarTimeoutT=+new Date+3e3}else this.hpBarTimeoutT=+new Date;if(this.objGetsAngleUpdate){var l=3*t.readUInt8(),h=this.oType==c?270:90;this.angle=I(l+h)}this.readCustomData_onUpdate(t),this.firstPosUpd=!1},Ms.prototype.worldUpd_readMsgRemovedObj=function(t){var e=t.readUInt32(),a=e>0?xe[e]:void 0;this.dead=!0,this.updateTime=ft,a?(this.ox=this.x,this.oy=this.y,this.nx=a.nx,this.ny=a.ny,this.oType!=c&&(this.oRad=this.rad,this.nRad=Math.min(this.rad,a.rad)),this.hp_n=0):(this.ox=this.x,this.oy=this.y,this.nx=this.x,this.ny=this.y,this.oType!=c&&(this.oRad=this.rad,this.nRad=0))},Ms.prototype.updateZ=function(){switch(this.oType){case 1:this.z=-220;break;case 16:this.z=-212;break;case 47:case 55:this.z=-209;break;case 79:this.z=-212;break;case 33:this.z=-211;break;case 34:this.z=-20;break;case 40:this.z=-158;break;case 44:this.z=-149;break;case 10:case 94:case 58:this.z=-159;break;case 95:this.z=-157.9;break;case 98:this.z=-157.8;break;case 12:this.z=-221;break;case 7:case 42:this.z=-158;break;case 17:this.z=-156;break;case 4:this.z=-155;break;case 11:this.z=-154;break;case c:if(47==this.type||57==this.type||58==this.type||59==this.type||62==this.type){this.z=100002;break}if(76==this.type){this.z=-10;break}61==this.type||8==this.type||14==this.type||20==this.type||32==this.type||31==this.type||51==this.type||21==this.type||36==this.type||33==this.type||37==this.type||83==this.type||39==this.type||41==this.type||40==this.type||42==this.type||43==this.type||46==this.type||78==this.type||48==this.type?this.z=10001:28==this.type?this.z=1002:56==this.type?this.z=10001:55==this.type?1==this.specType?this.z=10001:2==this.specType&&(this.z=1013):this.z=-152;break;case 13:this.z=-150;break;case 9:this.z=-101;break;case 5:this.z=-100;break;case 102:case 46:this.z=-99;break;case 83:this.z=-10;break;case 88:this.z=1002.1;break;case 3:this.z=999;break;case 65:case 15:this.z=1e3;break;case 69:case 68:case 8:this.z=1002;break;case p:this.z=1003;break;case 100:this.z=1002.5;break;case 27:case 28:this.z=1002+this.rad;break;case 6:this.z=1202;break;case 97:this.z=1203;break;case 67:this.z=1015;break;case 30:case 29:this.z=1006;break;case 71:this.z=1020;break;case 101:case 18:case 59:this.z=1006+this.rad/100;break;case 2:if(this.flag_flying||this.flag_ghost)this.z=1e5,this.flag_isGrabbed||(this.z+=this.rad),100==this.specType2&&(this.z=1014);else{if(this.animalType==f)return void(this.z=1209+this.rad);this.flag_underWater||this.flag_usingAbility&&6==this.animalType?this.z=-100:!this.flag_usingAbility||56!=this.animalType&&64!=this.animalType?this.flag_canClimbHill?this.z=1e3+this.rad:this.animalType==m?this.z=1209+this.rad:53==this.animalType?this.z=1208+(this.flag_usingAbility?1:0)+this.rad:14==this.animalType?this.z=1207:this.z=this.rad:this.z=10001+this.rad}break;default:this.z=this.rad}},window.GameObj=Ms;var _s=Ds,Ns=Ms;function Ds(){this.objs=[],this.updateZ=function(){this.objs.length>0&&(this.objs[0].updateZ(),this.z=this.objs[0].z)},this.draw=function(){for(var t=0;t<this.objs.length;t++)this.objs[t].draw(!0);for(t=0;t<this.objs.length;t++)this.objs[t].draw(!1)},this.addBatchedObj=function(t){0==this.objs.length&&(this.oType=t.oType,this.objs=[]),this.objs.push(t)}}function Fs(){Fs.superClass.call(this,c)}function Us(){Us.superClass.call(this)}function Es(t,e){Es.superClass.call(this,2),this.animalType=e}function Bs(){Bs.superClass.call(this,76),this.color=5==ye?"limegreen":"red"}function Os(){Os.superClass.call(this,p),this.webTransparency=0,this.doesDrawEffectScale=!0,this.drawEffectScale_Slow=!0}_s.prototype=Object.create(Ns.prototype),_s.prototype.constructor=_s,window.GameObjBatchDraw=Ds,Ns=Ms,(Yr=Fs).prototype=Object.create(Ns.prototype),Yr.prototype.constructor=Yr,Yr.superClass=Ns,Fs.prototype.abilityType=0,Fs.prototype.showHalloweenSkins=!0,Fs.prototype.updateZ=function(){76==this.abilityType?this.z=-10:61==this.abilityType||47==this.abilityType||57==this.abilityType||58==this.abilityType||59==this.abilityType||62==this.abilityType?this.z=100002:74==this.abilityType?0==this.specType?this.z=10005+this.rad:this.z=1002:85==this.abilityType||19==this.abilityType?this.z=1006:102==this.abilityType||96==this.abilityType||62==this.abilityType||8==this.abilityType||14==this.abilityType||20==this.abilityType||91==this.abilityType||32==this.abilityType||31==this.abilityType||61==this.abilityType||75==this.abilityType||51==this.abilityType||21==this.abilityType||36==this.abilityType||33==this.abilityType||37==this.abilityType||83==this.abilityType||86==this.abilityType||39==this.abilityType||41==this.abilityType||40==this.abilityType||42==this.abilityType||43==this.abilityType||46==this.abilityType||78==this.abilityType||48==this.abilityType?this.z=10001:28==this.abilityType||73==this.abilityType||73==this.abilityType?this.z=1002:56==this.abilityType?this.z=10001:55==this.abilityType?1==this.specType?this.z=10001:2==this.specType&&(this.z=1013):this.z=-152},Fs.prototype.customDraw=function(t){switch(this.abilityType){case 54:case 49:case 60:break;case 19:{this.drawOutlinedCircle("","orange"),e=.15,Vi=.5*(.8-e),e=e+Vi+Vi*Math.sin(2*Math.PI/1*(ft/1e3)),Ot.save(),Ot.globalAlpha*=e,_(0,0,Math.max(0,this.rad),"#FFD300"),Ot.restore(),e=.5,Vi=.5*(1-e),e=e+Vi+Vi*Math.sin(2*Math.PI/1*(ft/1e3));let t=ve(1==Math.trunc(ft/300)%2?"img/fire.png":"img/fire2.png"),a=.3*this.rad;n=2*this.rad*(2+2*e)/3;let i=2*this.rad*e;t&&(Ot.save(),Ot.globalAlpha=Ot.globalAlpha*this.onFireEffA*e,Ot.drawImage(t,0+-.5*n,a+-.95*i,n,i),Ot.restore());break}case 11:Ot.save();var a=Ot.globalAlpha;Ot.globalAlpha=.4*a,_(0,0,this.rad,"#7EBCC0"),Ot.globalAlpha=1*a,Ot.strokeStyle="white",Ot.beginPath();var i=10;Ot.translate(-5,-.7*this.rad),Ot.moveTo(0,-10),Ot.lineTo(0,i),Ot.moveTo(-10,-10),Ot.lineTo(i,i),Ot.moveTo(i,-10),Ot.lineTo(-10,i),Ot.moveTo(-10,0),Ot.lineTo(i,0),Ot.lineWidth=3,Ot.stroke(),Ot.restore();break;case 15:Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=.15*a,_(0,0,this.rad,"#755A2A"),Ot.restore();break;case 33:if(Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=1*a,R=ve("img/ability_sabertoothJawAttack.png")){var s=Math.min(1,(ft-this.spawnTime)/200),r=this.rad-2.5;Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(R,0,0,R.width*s,R.height,-r,-r,2*r*s,2*r)}Ot.restore();break;case 14:Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=1*a,(R=ve("img/ability_claw.png"))&&(s=Math.min(1,(ft-this.spawnTime)/200),r=this.rad-2.5,Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(R,0,0,R.width*s,R.height,-r,-r,2*r*s,2*r)),Ot.restore();break;case 76:if(Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=.1*a,_(0,0,this.rad,"#E5C6AD"),Ot.globalAlpha=1*a,R=ve((g="skins/land/")+"/ostrich/ability_ostrich_kick.png")){s=Math.min(1,(ft-this.spawnTime)/150),r=.85*this.rad,Ot.rotate(this.angle);var o=0,l=.5*this.rad,h=2*r,c=1.5*r*s,d=.5,p=.95;Ot.drawImage(R,o+h*-d,l+c*-p,h,c)}Ot.restore();break;case 32:Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=.1*a,_(0,0,this.rad,"#5B7EC7"),Ot.globalAlpha=1*a;var g="skins/ocean/whale/"+this.specType;(R=ve(g+"/ability.png"))&&(s=Math.min(1,(ft-this.spawnTime)/200),r=.85*this.rad,Ot.rotate(this.angle),o=0,l=this.rad,h=2*r,c=2*r*s,d=.5,p=.95,Ot.drawImage(R,o+h*-d,l+c*-p,h,c)),Ot.restore();break;case 75:(R=ve("skins/arctic/icemonster/crystalfire.png"))&&(Ot.save(),r=this.rad/2,Ot.rotate(this.angle),Ot.drawImage(R,-r,-r,2*r,2.5*r),Ot.restore());break;case 62:a=Ot.globalAlpha,Ot.save();var u=(ft-this.spawnTime)/1e3,m=1.5,f=1*Math.sin(2*Math.PI/m*u),y=Ot.globalAlpha;if(Ot.globalAlpha*=.6*f,Ot.rotate(this.angle),Ot.globalAlpha=.15*a,0==this.specType2?_(0,0,this.rad,"#96661C"):_(0,0,this.rad,"#e0dfde"),Ot.restore(),Ot.save(),R=ve((g="img")+"/ability_bearSlash"+this.specType2+".png")){s=Math.min(1,(ft-this.spawnTime)/200);var b=-(-.5+(M=C((ft-this.spawnTime)/300,0,1)))*I(90),w=this.angle;Ot.rotate(this.angle+b*(0==this.specType?1:-1)),r=1*-this.rad,o=0,l=this.rad,h=2*r,c=2*r*s,d=.5,p=.8,Ot.drawImage(R,o+h*-d,l+c*-p+r,h,c)}Ot.restore();break;case 48:u=(ft-this.spawnTime)/1e3;var v=D(u,1,.1,1);Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=.1-v,Ot.restore(),Ot.save();var T=0;u=(ft-this.spawnTime)/1e3,m=2,T=1.5*Math.sin(2*Math.PI/m*u),Ot.fillStyle="white";var k=.7*this.rad;Ot.globalAlpha=.3-v;var P=.6*-k,A=.5*-k+10*this.rPer,S=Math.max(0,.65*k+T)+2;_(P,A,S,"#654321"),P=.5*k,A=.5*-k-10*this.rPer,S=Math.max(0,.73*k-T),_(P,A,S,"#654321"),P=.6*k,A=.5*k,S=Math.max(0,.78*k+T),_(P,A,S,"#654321"),P=.5*-k,A=.5*k+10*this.rPer,S=Math.max(0,.6*k+this.rPer-T),_(P,A,S,"#654321"),Ot.restore();break;case 47:Ot.globalAlpha=.5,_(0,0,this.rad,"red");break;case 57:Ot.globalAlpha=.2,_(0,0,this.rad,"limegreen");break;case 61:{Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=.4*a;let t="#ef6e24";switch(this.specType){case 1:t="#0080FF";break;case 2:t="purple"}_(0,0,this.rad,t),Ot.globalAlpha=1*a,Ot.restore()}break;case 59:this.drawEffectScale_Slow=!0,this.doesDrawEffectScale=!0,Ot.globalAlpha=.2,_(0,0,.85*this.rad,"white");var x=3==this.specType?"_e":"";(R=ve("img/target"+x+".png"))&&(r=this.rad,Ot.save(),Ot.globalAlpha=.5,Ot.drawImage(R,-r,-r,2*r,2*r),Ot.restore()),Ot.save(),this.is1v1Target&&null!=this.timerTxt&&(Ot.globalAlpha=1,this.timerTxt.x=0,this.timerTxt.y=0,this.timerTxt.draw()),Ot.restore();break;case 58:Ot.globalAlpha=.5;break;case 51:if(Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=.05*a,_(0,0,this.rad,"#B32E10"),Ot.globalAlpha=1*a,R=ve((g="img")+"/ability_crabSmash"+this.specType+".png")){var M=C((ft-this.spawnTime)/200,0,1),N=1==this.specType?-1:1;b=-(-.2+M)*I(-90*N),b=N*(.3+M)+I(-30*N),r=.6*this.rad,Ot.rotate(this.angle+b),o=0,l=this.rad,h=2*r*.7,c=2*r,d=.75,p=.95,1==this.specType&&(d=.25,p=.95),Ot.drawImage(R,o+h*-d,l+c*-p,h,c)}Ot.restore();break;case 31:Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=.05*a,_(0,0,this.rad,"#E4E7C8"),Ot.globalAlpha=1*a,(R=ve((g="img")+"/ability_elephantTrunkSmack.png"))&&(b=-(-.5+(M=C((ft-this.spawnTime)/300,0,1)))*I(90),r=.6*this.rad,Ot.rotate(this.angle+b),o=0,l=this.rad,h=2*r*.7,c=2*r,d=.75,p=.95,Ot.drawImage(R,o+h*-d,l+c*-p,h,c)),Ot.restore();break;case 74:switch(this.specType2){case 0:Ot.save(),b=I(90),Ot.rotate(this.angle+b),(R=ve("img/SpitRock.png"))&&(r=this.rad,Ot.save(),Ot.drawImage(R,-r,-r,2*r,2*r),Ot.restore()),Ot.restore();break;case 1:Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=.05*a,_(0,0,this.rad,"#272727"),Ot.globalAlpha=.75*a,(R=ve("img/SpitRockCrack.png"))&&(r=this.rad,Ot.save(),Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(R,-r,-r,2*r,2*r),Ot.restore()),Ot.restore()}break;case 85:Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=1,Ot.globalAlpha=1*a,(R=ve((g="skins/jungle/jungle_monster/tongue")+".png"))&&(r=this.rad,Ot.rotate(this.angle),o=-this.specType,l=0,h=2*this.specType,c=r,Ot.drawImage(R,o,l,h,c)),Ot.restore();break;case 83:Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=.75*a,(R=ve((g="skins/jungle/quetzalcoatlus")+"/ability.png"))&&(r=this.rad,Ot.rotate(this.angle),o=-r,l=-r,h=2*r,c=2*r,Ot.drawImage(R,o,l,h,c)),Ot.restore();break;case 86:Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=.75*a,(R=ve(g="skins/jungle/iguana/tail_whip.png"))&&(r=this.rad,Ot.rotate(this.angle),o=-r,l=-r,h=2*r,c=2*r,Ot.drawImage(R,o,l,h,c)),Ot.restore();break;case 91:Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=.1*a,_(0,0,this.rad,0==this.specType?"#494949":"#D3D5A1"),Ot.globalAlpha=1*a,g="skins/jungle/gaur/"+this.specType+"/gaur_kick.png",(R=ve(g))&&(s=Math.min(1,(ft-this.spawnTime)/200),r=.6*this.rad,Ot.rotate(this.angle),o=0,l=this.rad,h=2*r,c=2*r*s,d=.5,p=.95,Ot.drawImage(R,o+h*-d,l+c*-p,h,c)),Ot.restore();break;case 102:Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=.1*a,_(0,0,this.rad,"#3A3A3A"),Ot.globalAlpha=1*a,g="skins/volcano/blackdragon/wing"+this.specType+"_"+(0==this.specType2?"l":"r"),(R=ve(g+".png"))&&(b=-(-.5+(M=C((ft-this.spawnTime)/700,0,1)))*I(90)+I(-10),r=1.25*this.rad,1==this.specType2&&(b*=-1),Ot.rotate(this.angle+b),o=0,l=this.rad,h=2*r,c=2*r,d=.9,p=1,0==this.specType2&&(d=1-d),Ot.drawImage(R,o+h*-d,l+c*-p,h,c)),Ot.restore();break;case 96:Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=.1*a,_(0,0,this.rad,"#3A3A3A"),Ot.globalAlpha=1*a,g="skins/volcano/blackdragon/abilityTailSlap"+this.specType,(R=ve(g+".png"))&&(s=Math.min(1,(ft-this.spawnTime)/200),r=.6*this.rad,Ot.rotate(this.angle),o=0,l=this.rad,h=2*r,c=2*r*s,d=.5,p=.95,Ot.drawImage(R,o+h*-d,l+c*-p,h,c)),Ot.restore();break;case 20:Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=.1*a,_(0,0,this.rad,"#755A2A"),Ot.globalAlpha=1*a,(R=ve((g="img")+"/ability_backkick.png"))&&(s=Math.min(1,(ft-this.spawnTime)/200),r=.6*this.rad,Ot.rotate(this.angle),o=0,l=this.rad,h=2*r,c=2*r*s,d=.5,p=.95,Ot.drawImage(R,o+h*-d,l+c*-p,h,c)),Ot.restore();break;case 21:Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=.25*a,_(0,0,this.rad,"#44d31f"),Ot.globalAlpha=1*a,(R=ve("img/ability_crocBite.png"))&&(s=Math.min(1,(ft-this.spawnTime)/200),r=.6*this.rad,Ot.rotate(this.angle),o=0,l=this.rad,h=2.5*r,c=2.5*r*s,d=.5,p=.95,Ot.drawImage(R,o+h*-d,l+c*-p,h,c),Ot.rotate(Math.PI),o=0,l=.5*this.rad,h=2.5*r,c=2.5*r*s,d=.5,p=.95,Ot.drawImage(R,o+h*-d,l+c*-p,h,c)),Ot.restore();break;case 36:Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=.25*a,_(0,0,this.rad,"#44d31f"),g="img",Ot.globalAlpha=1*a,(R=ve(g+"/ability_boaBite.png"))&&(s=Math.min(1,(ft-this.spawnTime)/200),r=.6*this.rad,Ot.rotate(this.angle),o=0,l=this.rad,h=2.5*r,c=2.5*r*s,d=.5,p=.95,Ot.drawImage(R,o+h*-d,l+c*-p,h,c),Ot.rotate(Math.PI),o=0,l=.5*this.rad,h=2.5*r,c=2.5*r*s,d=.5,p=.95,Ot.drawImage(R,o+h*-d,l+c*-p,h,c)),Ot.restore();break;case 40:Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=.1*a,_(0,0,this.rad,"#755A2A"),Ot.globalAlpha=1*a,(R=ve((g="skins/jungle")+"/tiger/"+this.specType2+"/ability_tigerJump.png"))&&(s=Math.min(1,(ft-this.spawnTime)/100),r=1.1*this.rad,Ot.rotate(this.angle),o=0,l=this.rad,h=2*r,c=2*r*s,d=.5,p=1,Ot.drawImage(R,o+h*-d,l+c*-p,h,c)),Ot.restore();break;case 41:Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=.05*a,_(0,0,this.rad,"#44d31f"),Ot.globalAlpha=1*a;var F=ve("img/ability_pounce2.png"),U=ve("img/ability_pounce1.png");F&&U&&(s=Math.min(1,(ft-this.spawnTime)/200),r=.4*this.rad,Ot.rotate(this.angle),o=0,l=this.rad,h=2.5*r,c=2.5*r*s,d=.5,p=.95,Ot.drawImage(F,o+h*-d,l+c*-p,h,c),r=.6*this.rad,o=0,l=.5*this.rad,h=2.5*r,c=2.5*r*s,d=.5,p=.95,Ot.drawImage(U,o+h*-d,l+c*-p,h,c)),Ot.restore();break;case 39:Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=.05*a,_(0,0,this.rad,"#E4E7C8"),Ot.globalAlpha=1*a;var E="skins/jungle/tiger/"+this.specType2+"/ability_tigerSlash"+this.specType+".png";(R=ve(E))&&(M=C((ft-this.spawnTime)/300,0,1),b=(1==this.specType?1:-1)*(-.6+M)*I(90),r=1.2*this.rad,Ot.rotate(this.angle+b),o=0,l=this.rad,h=2*r*.7,c=2*r,d=.2,p=.5,Ot.drawImage(R,o+h*-d,l+c*-p,h,c)),Ot.restore();break;case 43:Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=.1*a,_(0,0,this.rad,"#755A2A"),Ot.globalAlpha=1*a,(R=ve((g="img")+"/ability_zebraKick.png"))&&(s=Math.min(1,(ft-this.spawnTime)/200),r=.6*this.rad,Ot.rotate(this.angle),o=0,l=this.rad,h=2*r,c=3*r*s,d=.5,p=1,Ot.drawImage(R,o+h*-d,l+c*-p,h,c)),Ot.restore();break;case 42:a=Ot.globalAlpha,Ot.save(),u=(ft-this.spawnTime)/1e3,m=1.5,f=1*Math.sin(2*Math.PI/m*u),y=Ot.globalAlpha,Ot.globalAlpha*=.6*f,Ot.rotate(this.angle),Ot.globalAlpha=.15*a,_(.3*this.rad,0,this.rad*(.9+.12*f),"#E4E7C8"),_(.3*-this.rad,0,this.rad*(1.05+.09*f),"#E4E7C8"),Ot.globalAlpha=y,Ot.restore(),Ot.save(),(R=ve((g="img")+"/ability_giraffeStompLeg.png"))&&(s=Math.min(1,(ft-this.spawnTime)/200),w=this.angle,Ot.rotate(w),r=1*-this.rad,o=0,l=this.rad,h=2*r,c=2*r*s,d=.5,p=.8,Ot.drawImage(R,o+h*-d,l+c*-p+r,h,c)),Ot.restore();break;case 78:Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=1*a,g="img",(R=ve("skins/ocean/megalodon/ability_megalodon_down.png"))&&(s=Math.min(1,(ft-this.spawnTime)/200),r=1.5*this.rad,Ot.rotate(this.angle),o=0,l=.5*this.rad,h=2.5*r,c=2.5*r*s,d=.5,p=.95,Ot.drawImage(R,o+h*-d,l+c*-p,h,c)),(R=ve((g="skins/ocean/megalodon")+"/ability_megalodon_up.png"))&&(v=Math.min(1,(ft-this.spawnTime)/200),Ot.globalAlpha=.9,r=1.5*-this.rad,o=0,l=this.rad,h=2.5*r,c=2.5*r*v,d=.5,p=.5,Ot.drawImage(R,o+h*-d,l+c*-p+1.75*r,h,c)),Ot.restore();break;case 46:Ot.save(),a=Ot.globalAlpha,a=Ot.globalAlpha,Ot.globalAlpha=.15*a,Ot.globalAlpha=1*a,g="img",(R=ve("img/ability_sharkBite.png"))&&(s=Math.min(1,(ft-this.spawnTime)/200),r=.6*this.rad,Ot.rotate(this.angle),o=0,l=this.rad,h=2.5*r,c=2.5*r*s,d=.5,p=.95,Ot.drawImage(R,o+h*-d,l+c*-p,h,c),Ot.rotate(Math.PI),o=0,l=.5*this.rad,h=2.5*r,c=2.5*r*s,d=.5,p=1.35,Ot.drawImage(R,o+h*-d,l+c*-p,h,c)),(R=ve((g="img")+"/shark-head.png"))&&(v=Math.min(1,(ft-this.spawnTime)/200),Ot.globalAlpha=.9,r=1.75*-this.rad,Ot.rotate(I(180)),o=0,l=this.rad,h=2*r,c=2*r*v,d=.5,p=.5,Ot.drawImage(R,o+h*-d,l+c*-p+r,h,c)),Ot.restore();break;case 56:Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=.5*a,r=this.rad,u=(ft-this.spawnTime)/1e3,m=2.2;var B=6.5*Math.cos(2*Math.PI/m*u),O=6.5*Math.sin(2*Math.PI/m*u);Ot.globalAlpha=.3*a,_(0,0,r,"#2CAAC4"),Ot.globalAlpha=.5*a,_(0+B/4.5+this.rPer,1+O/1.5,Math.max(0,r-14),"#29A0BA"),_(0+B/1.5-2*this.rPer,O,Math.max(0,r-38.5+O/5),"#2B8CAA"),_(0+B/1.5-2*this.rPer,O,Math.max(0,r-54.5+O/11),"#28829E"),Ot.restore();break;case 55:0!=this.specType&&2!=this.specType||(Ot.save(),(R=ve("skins/ocean/pelican/ability_pelican.png"))&&(r=1.5*-this.rad,Ot.rotate(this.angle),o=0,l=this.rad,h=r,c=r,d=.5,p=.5,Ot.drawImage(R,o+h*-d,l+c*-p+r,h,c)),Ot.restore());break;case 37:Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=.15*a,Ot.globalAlpha=1*a,(R=ve("skins/land/trex/"+this.specType+"/ability_trexBite.png"))&&(s=Math.min(1,(ft-this.spawnTime)/200),r=.6*this.rad,Ot.rotate(this.angle),o=0,l=this.rad,h=2.5*r,c=2.5*r*s,d=.5,p=.95,Ot.drawImage(R,o+h*-d,l+c*-p,h,c),Ot.rotate(Math.PI),o=0,l=.5*this.rad,h=2.5*r,c=2.5*r*s,d=.5,p=.95,Ot.drawImage(R,o+h*-d,l+c*-p,h,c)),(R=ve("skins/land/trex/"+this.specType+"/trex-head.png"))&&(s=Math.min(1,(ft-this.spawnTime)/200),r=1.5*-this.rad,Ot.rotate(I(180)),o=0,l=this.rad,h=2*r,c=2*r*s,d=.5,p=.5,Ot.drawImage(R,o+h*-d,l+c*-p+r,h,c)),Ot.restore();break;case 12:case 34:Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=.15*a,_(0,0,this.rad,"#6D7471"),Ot.restore();break;case 35:Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=.15*a,_(0,0,this.rad,"#f2f2f2"),Ot.restore();break;case 73:case 28:var R;Ot.save(),73==this.abilityType?Ot.rotate(this.angle-I(90)):Ot.rotate(this.angle+I(180)),a=Ot.globalAlpha,Ot.globalAlpha=.8*a,(R=ve("img/wave.png"))&&(r=this.rad,Ot.drawImage(R,-r,-r,2*r,2*r)),Ot.restore();break;case 18:Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=.2*a,_(0,0,this.rad,"#746B3E"),Ot.restore();break;case 88:Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=.05*a,_(0,0,this.rad,"#443D1E"),Ot.restore();break;case 3:Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=.5*a,_(0,0,this.rad,"#62C5FF"),Ot.globalAlpha=1*a,Ot.strokeStyle="#62C5FF",Ot.beginPath();var W=-.7*this.rad;Ot.moveTo(W,-5),Ot.lineTo(W-4,5),Ot.lineTo(W+4,2),Ot.lineTo(W+2,15),Ot.lineWidth=3,Ot.stroke(),Ot.restore();break;case 63:Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=.5*a,r=Math.max(0,this.rad-30),u=(ft-this.spawnTime)/1e3,m=2.2,B=6.5*Math.cos(2*Math.PI/m*u),O=6.5*Math.sin(2*Math.PI/m*u),Ot.globalAlpha=.05*a,_(0,0,r,"#2CAAC4"),Ot.globalAlpha=.05*a,He||_(0+B/2-this.rPer,0+O/2-this.rPer,Math.max(0,r-6),"#2D93B0"),_(0+B/1.5-2*this.rPer,O,Math.max(0,r-54.5+O/11),"#28829E"),Ot.restore(),Ot.save(),a=Ot.globalAlpha,r=Math.max(0,this.rad-30),u=(ft-this.spawnTime)/1e3,m=3.2,B=30*Math.cos(2*Math.PI/m*u),O=30*Math.sin(2*Math.PI/m*u),Ot.globalAlpha=.05*a,_(0,0,r,"white"),_(0+B/2-this.rPer,0+O/2-this.rPer,Math.max(0,.95*r),"white"),_(0+B/4.5+this.rPer,1+O/1.5,Math.max(0,.85*r),"white"),Ot.restore();var j=ve("skins/ocean/seamonster/whirlpool.png");if(j){r=this.rad;var G=5/60,z=1e3/G,H=2*(s=(ft-this.spawnTime)%z/z)*Math.PI;z=1e3/(G=8/60),s=(ft-this.spawnTime)%z/z,rotation2=2*s*Math.PI,Ot.save(),Ot.rotate(H),a=Ot.globalAlpha,Ot.globalAlpha=1*a,u=(ft-this.spawnTime)/1e3,m=2.2,B=6.5*Math.cos(2*Math.PI/m*u),O=6.5*Math.sin(2*Math.PI/m*u),Ot.globalAlpha=.2,Ot.drawImage(j,-r-B/2.2,-r,2*r,2*r),Ot.restore(),Ot.save(),Ot.globalAlpha=.1,Ot.rotate(.8*rotation2),Ot.drawImage(j,-r-B/2.2,-r,2*r,2*r),Ot.restore(),Ot.save(),Ot.globalAlpha=.2,Ot.rotate(rotation2),Ot.drawImage(j,-r-B/2.2,-r,2*r,2*r),Ot.restore(),Ot.save(),Ot.globalAlpha=.2,Ot.rotate(rotation2),Ot.drawImage(j,-r-B/2.2,-r,2*r,2*r),Ot.restore(),Ot.save(),Ot.globalAlpha=.2,Ot.rotate(H),Ot.drawImage(j,-r-B/2.2,-r,2*r,2*r),Ot.restore(),Ot.save(),Ot.globalAlpha=.2,Ot.rotate(H),Ot.drawImage(j,-r-B/2.2,-r,2*r,2*r),Ot.restore()}break;case 5:Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=.5*a,r=Math.max(0,this.rad-30),u=(ft-this.spawnTime)/1e3,m=2.2,B=6.5*Math.cos(2*Math.PI/m*u),O=6.5*Math.sin(2*Math.PI/m*u),Ot.globalAlpha=.4*a,_(0,0,r,"#2CAAC4"),Ot.globalAlpha=.7*a,He||_(0+B/2-this.rPer,0+O/2-this.rPer,Math.max(0,r-6),"#2D93B0"),_(0+B/4.5+this.rPer,1+O/1.5,Math.max(0,r-14),"#29A0BA"),_(0+B/1.5-2*this.rPer,O,Math.max(0,r-38.5+O/5),"#2B8CAA"),_(0+B/1.5-2*this.rPer,O,Math.max(0,r-54.5+O/11),"#28829E"),Ot.restore();break;case 4:Ot.save(),a=Ot.globalAlpha,He||Ot.rotate(2*this.rPer*Math.PI),T=0,u=(ft-this.spawnTime)/1e3,m=6,T=1.5*Math.sin(2*Math.PI/m*u),Ot.globalAlpha=.7*a,Ot.fillStyle="black",Ot.beginPath(),Ot.arc(0,0,this.rad,0,2*Math.PI),Ot.fill(),He||(Ot.fillStyle="black",Ot.globalAlpha=.5*a,Ot.beginPath(),Ot.arc(0,0,Math.max(0,this.rad-4+T),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.45*this.rad,.45*-this.rad+15*this.rPer,Math.max(0,.5*this.rad+T),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.5*this.rad,.5*this.rad+15*this.rPer,Math.max(0,.4*this.rad+T),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.55*-this.rad*.707,.55*+this.rad*.707+15*this.rPer,Math.max(0,.5*this.rad+T),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.75*-this.rad,.35*-this.rad+15*this.rPer,Math.max(0,.3*this.rad+T),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.beginPath(),Ot.arc(this.rad+10*this.rPer,50*this.rPer,8,0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.beginPath(),Ot.arc(this.rad-20*this.rPer,50*this.rPer,10,0,2*Math.PI),Ot.fill(),Ot.beginPath()),Ot.restore();break;case 22:Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=.25*a,_(0,0,this.rad,"#9F8641"),Ot.restore();break;case 23:Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=.25*a,_(0,0,this.rad,"#785228"),Ot.restore();break;default:Ot.save(),a=Ot.globalAlpha,Ot.globalAlpha=.15*a,_(0,0,this.rad,"black"),Ot.restore()}},Fs.prototype.setObjTypes=function(t,e){this.oType=t,this.abilityType=e},Fs.prototype.readCustomData_onNewlyVisible=function(t){Fs.superClass.prototype.readCustomData_onNewlyVisible.call(this,t),this.specType=t.readUInt8(),this.specType2=t.readUInt8(),11!=this.abilityType&&12!=this.abilityType&&28!=this.abilityType&&73!=this.abilityType&&18!=this.abilityType&&88!=this.abilityType&&23!=this.abilityType||(this.rad=this.oRad=0)},Fs.prototype.readCustomData_onUpdate=function(t){Fs.superClass.prototype.readCustomData_onUpdate.call(this,t),this.specType=t.readUInt8(),this.specType2=t.readUInt8(),this.is1v1Target=1==t.readUInt8(),this.is1v1Target&&(this.timer=t.readUInt16()/100,this.timer<15&&this.updateTimer())},Fs.prototype.updateTimer=function(){this.timer=Math.round(this.timer);var t=this.timer;this.setTimer(t)},Fs.prototype.timerTxt=null,Fs.prototype.setTimer=function(t){var e=""+t;null==this.timerTxt?(this.timerTxt=new E(20,"#FFFFFF"),this.timerTxt.strokeW=2,this.timerTxt.multiLine=!0,this.timerTxt.renderScale=5,this.timerTxt.setText(e)):(this.timerTxt.setFontSize(20),this.timerTxt.setText(e))},window.AbilityObj=Fs,u.setCustomClassForGameObjType(Fs,c),Ns=Fs,(Yr=Us).prototype=Object.create(Ns.prototype),Yr.prototype.constructor=Yr,Yr.superClass=Ns,Us.prototype.customDraw=function(t){Ot.save();var e=Ot.globalAlpha;Ot.globalAlpha=.05*e,_(0,0,this.rad,"#E4E7C8"),Ot.globalAlpha=1*e;var a=ve("img/ability_elephantTrunkSmack.png");if(a){var i=-(-.5+C((ft-this.spawnTime)/300,0,1))*I(90),s=.6*this.rad;Ot.rotate(this.angle+i);var r=this.rad,n=2*s*.7,o=2*s;Ot.drawImage(a,0+-.75*n,r+-.95*o,n,o)}Ot.restore()},Us.prototype.readCustomData_onNewlyVisible=function(t){Us.superClass.prototype.readCustomData_onNewlyVisible.call(this,t)},Us.prototype.readCustomData_onUpdate=function(t){Us.superClass.prototype.readCustomData_onUpdate.call(this,t)},window.AbilityObjElephant=Us,u.setCustomClassForGameObjType(Us,c,31),Ns=Ms,(Yr=Es).prototype=Object.create(Ns.prototype),Yr.prototype.constructor=Yr,Yr.superClass=Ns,Es.prototype.animalType=1,Es.prototype.animalSpecies=0,Es.prototype.nickName="",Es.prototype.skinImgName=null,Es.prototype.skinNotLoadedColor="#75ce67",Es.prototype.flag_lowWat=!1,Es.prototype.flag_tailBitten=!1,Es.prototype.flag_underWater=!1,Es.prototype.flag_eff_stunned=!1,Es.prototype.flag_eff_frozen=!1,Es.prototype.flag_usingAbility=!1,Es.prototype.flag_eff_invincible=!1,Es.prototype.flag_eff_healing=Es.prototype.flag_eff_poison=Es.prototype.flag_eff_bleeding=!1,Es.prototype.flag_eff_hot=!1,Es.prototype.flag_nearBDFight=!1,Es.prototype.flag_redHealing=!1,Es.prototype.flag_iceSliding=!1,Es.prototype.underwaterA=0,Es.prototype.nickNameA=0,Es.prototype.bleedingA=0,Es.prototype.stunA=0,Es.prototype.frozenEffA=Es.prototype.onFireEffA=Es.prototype.effA_healing=Es.prototype.effA_hot=0,Es.prototype.effA_poison=Es.prototype.effA_bleeding=Es.prototype.effA_stunk=0,Es.prototype.effA_tongue_constricted=Es.prototype.effA_constricted=Es.prototype.effA_slimed=Es.prototype.effA_webStuck=0,Es.prototype.inSwamp=!1,Es.prototype.inJungle=!1,Es.prototype.flag_climbingWeb=!1,Es.prototype.nameA=0,Es.prototype.loadedSkinImg=null,Es.prototype.outlineW=null,Es.prototype.teamID=0,Es.prototype.wins1v1=0,Es.prototype.birdNoAnimationFlyWingAngle=-.2,Es.prototype.getNameSize=function(){return 10},Es.prototype.setNick=function(t,e="#FFFFFF"){if(this.id!=ea&&(t=l(t)),this.nickName=t,null==this.nickTXT){let t="#FFFFFF";""!==e&&"undefined"!==e&&"null"!==e&&(t=e),this.nickTXT=new E(this.getNameSize(),t),this.nickTXT.strokeW=1.5,this.nickTXT.multiLine=!0,this.nickTXT.renderScale=5,this.nickTXT.setText(this.nickName)}else this.nickTXT.setFontSize(this.getNameSize()),this.nickTXT.setText(this.nickName)},Es.prototype.drawEyeAtPos=function(t,e){Ot.beginPath(),Ot.arc(t,e,4.5,0,2*Math.PI),Ot.fillStyle="black",Ot.fill(),Ot.beginPath(),Ot.fillStyle="white";var a=t-2,i=e-1;Ot.arc(a,i,.99,0,2*Math.PI),Ot.fill()},Es.prototype.animalInfo=function(){return y(this.animalType)},Es.prototype.loadAnimalSkinImg=function(){var t=this.getSkinName();this.loadedSkinImg=null,t&&!Ge&&(this.loadedSkinImg=ve("./skins/"+t+".png?x=1"))},Es.prototype.getChatColor=function(t){return t==dt&&this.inSwamp?"#1F3424":t==dt&&this.inJungle?"#105437":ht(t)},Es.prototype.drawLowWater=function(){Ot.fillStyle=this.animalType==m||68==this.animalType||49==this.animalType&&1==this.animalSpecies||75==this.animalType&&4==this.animalSpecies?Z:J,Ot.beginPath(),Ot.arc(0,this.rad+5,5,0,2*Math.PI),Ot.fill()},Es.prototype.customDraw=function(t){var e=this.animalInfo(),a=e.aniCol;this.skinImgName=e.skinName;var i=.1*this.rad;switch(this.skinNotLoadedColor=a,this.animalType){case 25:case 34:case 27:case 21:case 11:i=.16*this.rad}this.loadAnimalSkinImg(),Ot.save(),Ot.rotate(this.angle);var s,r=(ft-this.spawnTime)/1e3,n=2.5;if(s=.7*Math.sin(2*Math.PI/n*r),this.flag_eff_wobbling){var o=D(r,1.25,.3,2);this.rad+=o}var l=this.flag_underWater||this.flag_isInArena||this.flag_usingAbility&&(6==this.animalType||29==this.animalType||32==this.animalType)?0:1;this.flag_nearBDFight&&(l=.5),this.flag_stealth&&(l=22==this.animalType?0:.2),this.flag_flying&&this.id!=ea&&(l=.6),this.flag_ghost&&(l=.3),this.animalType==f&&this.flag_usingAbility&&(l=.4),this.flag_usingAbility&&81==this.animalType&&(l=.02),this.underwaterA+=.1*(l-this.underwaterA);var h=xe[ea];if(h&&h.flag_underWater&&!this.inSwamp&&(this.underwaterA=Math.max(.2,this.underwaterA)),Ot.globalAlpha*=this.underwaterA,this.flag_eff_invincible){n=1;var c=.5*(1-(b=.3));Ot.globalAlpha*=b+c+c*Math.sin(2*Math.PI/n*((ft-this.spawnTime)/1e3))}if(this.outlineW=2+s,!(this.dead||this.flag_underWater||6==this.animalType&&this.flag_usingAbility)&&3==ye&&0!=this.teamID){var d=Bn.teamColors[this.teamID];Ot.save(),Ot.globalAlpha=l,_(0,0,this.rad+2,d),Ot.restore()}var p=this.getOutlineColor();if(this.animalType==f&&this.flag_usingAbility||this.flag_ghost||this.flag_isInArena||He&&p!=nt&&p!=rt?this.outlineW=0:_(0,0,this.rad,p),2!=this.animalType&&1!=this.animalType&&17!=this.animalType&&(this.animalType!=f||!this.flag_usingAbility)){r=(ft-this.spawnTime)/1e3,n=5;var g=4*Math.sin(2*Math.PI/n*r),u=2.5*this.outlineW,m=Math.PI/180;if(this.flag_tailBitten)Ot.fillStyle=rt;else{var y=this.animalType;Pe[y-1]>0&&this.id!=ea?Ot.fillStyle=nt:Ot.fillStyle=p}He&&Ot.fillStyle!=K||this.flag_flying||(Ot.beginPath(),Ot.moveTo((this.rad-this.outlineW+1)*Math.cos((282.5+u)*m),(this.rad-this.outlineW+1)*Math.sin(282.5*m)),Ot.lineTo((this.rad-this.outlineW+1)*Math.cos((257.5-u)*m),(this.rad-this.outlineW+1)*Math.sin(257.5*m)),Ot.lineTo((this.rad+i+this.outlineW)*Math.cos((270+g)*m),(this.rad+i+this.outlineW)*Math.sin((270+g)*m)),Ot.lineTo((this.rad-this.outlineW+1)*Math.cos((282.5+u)*m),(this.rad-this.outlineW+1)*Math.sin(282.5*m)),Ot.fill()),He||this.loadedSkinImg&&!this.flag_tailBitten||(Ot.fillStyle=this.flag_tailBitten?rt:a,Ot.beginPath(),Ot.moveTo((this.rad-this.outlineW)*Math.cos(282.5*m),(this.rad-this.outlineW)*Math.sin(282.5*m)),Ot.lineTo((this.rad-this.outlineW)*Math.cos(257.5*m),(this.rad-this.outlineW)*Math.sin(257.5*m)),Ot.lineTo((this.rad+i)*Math.cos((270+g)*m),(this.rad+i)*Math.sin((270+g)*m)),Ot.lineTo((this.rad-this.outlineW)*Math.cos(282.5*m),(this.rad-this.outlineW)*Math.sin(282.5*m)),Ot.fill())}if(this.flag_isInArena&&(Ot.globalAlpha=.6),Ot.save(),this.flag_isInArena&&(this.flag_arenaWhich?_(0,0,1.05*this.rad,"red"):_(0,0,1.05*this.rad,"blue")),Ot.restore(),this.drawUnderSkinImgOutline(),this.drawUnderSkinImg(),this.drawSkinImg(),this.drawOnTopOfSkinImg(),Ot.restore(),this.drawTopEffects(),this.flag_lowWat){n=1.2;var b,w=(b=.2)+(c=.5*(.8-b))+c*Math.sin(2*Math.PI/n*(ft/1e3));Ot.save(),Ot.globalAlpha=w,this.drawLowWater(),Ot.restore()}this.drawNickName(l),this.drawCustomUIForAni()},Es.prototype.drawCustomUIForAni=function(){3==ye&&Bn&&Bn.drawPlayerUI(this)},Es.prototype.hasMultipleSpecies=function(){return!1},Es.prototype.drawNickName=function(t){if(this.animalType!=f||!this.flag_usingAbility){var e=t;this.nickNameA+=.1*(e-this.nickNameA),this.nickName&&this.nickTXT&&!ze&&(Ot.save(),this.dead?Ot.globalAlpha*=1-this.moveUpdF:Ot.globalAlpha=1,Ot.globalAlpha*=this.nickNameA,this.nickTXT.x=0,this.nickTXT.y=this.rad+9,this.nickTXT.draw(),Ot.restore())}},Es.prototype.drawUnderSkinImgOutline=function(){if((this.flag_underWater||this.flag_usingAbility&&6==this.animalType)&&(Ot.save(),Ot.globalAlpha=1-this.underwaterA,this.drawWhenUnderwater(),Ot.restore()),this.flag_eff_stunk){Ot.save();var t=1,e=(n=.3)+(l=.5*(1-n))+l*Math.sin(2*Math.PI/t*((ft-this.spawnTime)/1e3));Ot.globalAlpha*=e;var a=2.6;_(0,0,this.rad+a*e,"brown"),Ot.restore()}if(this.flag_iceSliding){var i=(ft-this.spawnTime)/1e3,s=(t=.75,1*Math.sin(2*Math.PI/t*i)),r=Ot.globalAlpha;Ot.globalAlpha*=.8-.2*s,_(0,.3*this.rad,this.rad*(.9+.15*s),"#7BB7BB"),_(0,.3*-this.rad,this.rad*(1.05+.1*s),"#7BB7BB"),Ot.globalAlpha=r}!this.flag_usingAbility||5!=this.animalType&&7!=this.animalType&&40!=this.animalType||(i=(ft-this.spawnTime)/1e3,t=1.5,s=1*Math.sin(2*Math.PI/t*i),r=Ot.globalAlpha,Ot.globalAlpha*=.8,_(0,.3*this.rad,this.rad*(.9+.12*s),"#7F582B"),_(0,.3*-this.rad,this.rad*(1.05+.09*s),"#7F582B"),Ot.globalAlpha=r);var n,o=this.flag_eff_frozen||this.flag_cold?1:0;if(this.frozenEffA+=.1*(o-this.frozenEffA),this.frozenEffA>.01&&(r=Ot.globalAlpha,Ot.globalAlpha*=this.frozenEffA,a=1.6,_(0,0,this.rad+a*this.frozenEffA,"white"),Ot.globalAlpha=r),o=this.flag_eff_healing?1:0,this.effA_healing+=.1*(o-this.effA_healing),this.effA_healing>.01&&(Ot.save(),Ot.globalAlpha*=this.effA_healing,a=2.6,_(0,0,this.rad+a*this.effA_healing,this.flag_redHealing?"#C60000":"purple"),Ot.restore()),o=this.flag_eff_hot?1:0,this.effA_hot+=.1*(o-this.effA_hot),this.effA_hot>.01){Ot.save(),t=1.2;var l=.5*(1-(n=.3));Ot.globalAlpha*=n+l+l*Math.sin(2*Math.PI/t*((ft-this.spawnTime)/1e3)),a=2.6,_(0,0,this.rad+a*this.effA_hot,"rgba(249, 212, 77, 0.5)"),Ot.restore()}if(o=this.flag_eff_poison?1:0,this.effA_poison+=.1*(o-this.effA_poison),this.effA_poison>.01&&(Ot.save(),t=1.2,l=.5*(1-(n=.3)),Ot.globalAlpha*=n+l+l*Math.sin(2*Math.PI/t*((ft-this.spawnTime)/1e3)),Ot.globalAlpha*=this.effA_poison,a=2.6,_(0,0,this.rad+a*this.effA_poison,"#7FF600"),Ot.restore()),this.flag_climbingWeb&&(Ot.save(),a=2.6,_(0,0,.95*this.rad,"white"),Ot.restore()),o=this.flag_eff_bleeding||this.flag_eff_wobbling?1:0,this.effA_bleeding+=.1*(o-this.effA_bleeding),this.effA_bleeding>.01){Ot.save(),t=1.2,l=.5*(1-(n=.3)),Ot.globalAlpha*=n+l+l*Math.sin(2*Math.PI/t*((ft-this.spawnTime)/1e3)),Ot.globalAlpha*=this.effA_bleeding,a=2.6;var h=this.flag_eff_wobbling?"brown":"red";_(0,0,this.rad+a*this.effA_bleeding,h),Ot.restore()}(o=this.flag_eff_slimed?1:0,this.effA_slimed+=.1*(o-this.effA_slimed),this.effA_slimed>.01)&&(Ot.save(),t=1.2,l=.5*(1-(n=.3)),Ot.globalAlpha*=n+l+l*Math.sin(2*Math.PI/t*((ft-this.spawnTime)/1e3)),Ot.globalAlpha*=this.effA_slimed,a=2.6,_(0,0,this.rad+a*this.effA_slimed,"grey"),Ot.restore())},Es.prototype.drawUnderSkinImg=function(){},Es.prototype.drawWhenUnderwater=function(){var t=(ft-this.spawnTime)/1e3,e=1*Math.sin(2*Math.PI/1.5*t);Ot.globalAlpha=.075,this.inSwamp&&(Ot.globalAlpha*=.1),11!=this.animalType&&89!=this.animalType||(Ot.globalAlpha*=.3);var a=this.flag_underWater?"#FFFFFF":"#7E6A35";Ot.fillStyle=a;var i=this.flag_underWater?.15*this.rad:.1*this.rad;if(Ot.beginPath(),Ot.arc(-.35*this.rad,-.33*this.rad,Math.max(0,i+e),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.35*this.rad,-.32*this.rad,Math.max(0,i-e),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.35*this.rad,.36*this.rad,Math.max(0,i+e),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(-.35*this.rad,.35*this.rad,Math.max(0,i-e),0,2*Math.PI),Ot.fill(),19==this.animalType){Ot.globalAlpha=1-this.underwaterA,Ot.fillStyle="#73799b",Ot.beginPath();var s=this.rad,r=.25*s;Ot.moveTo(-.07*s,r),Ot.lineTo(0,r-.5*s),Ot.lineTo(.35*s,r),Ot.closePath(),Ot.fill()}else if(26==this.animalType)_(0,.2*this.rad,.12*this.rad,"#4D4D4D");else if(49==this.animalType)_(0,.45*this.rad,.08*this.rad,"#202A65");else if(61==this.animalType){var n=D(t,1,1,1);Ot.save(),Ot.rotate(I(40)),Ot.scale(1,2),Ot.globalAlpha=.08,_(1*this.rad,.2*this.rad,.1*this.rad+.1*this.rad*n,"#B32E10"),Ot.globalAlpha=.2,_(1*this.rad,.2*this.rad,.15*this.rad,"#B32E10"),Ot.restore(),Ot.save(),Ot.globalAlpha=1,Ot.rotate(I(-40)),Ot.scale(1,2),Ot.globalAlpha=.08,_(-1*this.rad,.2*this.rad,.1*this.rad+.1*this.rad*-n,"#B32E10"),Ot.globalAlpha=.2,_(-1*this.rad,.2*this.rad,.15*this.rad,"#B32E10"),Ot.restore()}else 24==this.animalType?(Ot.globalAlpha=1-this.underwaterA,_(.4*this.rad,.75*this.rad,.12*this.rad,"#598b30"),_(.65*this.rad,.55*this.rad,.1*this.rad,"#64a034"),_(-.4*this.rad,.75*this.rad,.12*this.rad,"#64a034"),_(-.65*this.rad,.55*this.rad,.1*this.rad,"#598b30")):53==this.animalType&&(Ot.save(),Ot.globalAlpha=.2,Ot.scale(1,2),_(0,.24*this.rad,.08*this.rad,"#202A65"),_(0,-.02*this.rad,.06*this.rad,"#202A65"),_(0,-.28*this.rad,.05*this.rad,"#202A65"),_(0,-.54*this.rad,.04*this.rad,"#202A65"),Ot.restore())},Es.prototype.skinRad=0,Es.prototype.skinScale=0,Es.prototype.drawSkin=function(){var t=500/340,e=this.rad-this.outlineW;this.skinRad=e,this.skinScale=t,53==this.animalType?(overSizeOffset=e/2,Ot.drawImage(this.loadedSkinImg,-e-.95*overSizeOffset,-e-overSizeOffset,2*e*t,2*e*(1.2*t))):Ot.drawImage(this.loadedSkinImg,-e*t,-e*t,2*e*t,2*e*t)},Es.prototype.basicDrawSkinImg=function(){var t=this.rad-this.outlineW;this.skinRad=t,this.skinScale=500/340,this.loadedSkinImg?this.drawSkin():(Ot.fillStyle=this.skinNotLoadedColor,Ot.beginPath(),Ot.arc(0,0,Math.max(0,this.rad-this.outlineW),0,2*Math.PI),Ot.fill())},Es.prototype.drawSkinImg=function(){this.rad,this.outlineW,this.basicDrawSkinImg(),this.drawSkinCustomization()},Es.prototype.drawSkinCustomization=function(){},Es.prototype.drawOnTopOfSkinImg=function(){if(!this.loadedSkinImg){Ot.save();var t=Math.max(1,this.rad/25);Ot.scale(t,t),this.drawEyeAtPos(6,.32*this.rad),this.drawEyeAtPos(-6,.32*this.rad),Ot.restore()}if(12==this.animalType){Ot.fillStyle="#E5CF79",Ot.beginPath();var e=1*(i=this.rad-this.outlineW);Ot.moveTo(-.16*i,e),Ot.lineTo(0,i*(this.flag_usingAbility?1.41:.7)),Ot.lineTo(.153*i,e),Ot.closePath(),Ot.fill()}if(this.flag_usingAbility&&32==this.animalType){Ot.save(),Ot.globalAlpha=1-this.underwaterA;var a=ve("img/snowball.png");if(a){var i=this.rad;Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(a,-i,-i,2*i,2*i)}else this.drawOutlinedCircle("","white");Ot.restore()}},Es.prototype.drawTopEffects=function(){var t,e=this.flag_eff_stunned?1:0;if(this.stunA+=.1*(e-this.stunA),this.stunA>.01){Ot.save();var a=ft%(1e3*(b=2.5))/(1e3*b);Ot.rotate(a*(2*Math.PI)),Ot.globalAlpha*=this.stunA;var i=.2*this.rad,s=(ft-this.spawnTime)/1e3,r=1,n=(.5+.07*i)*Math.sin(2*Math.PI/r*s);Ot.fillStyle="#F3D444",Ot.beginPath(),Ot.arc(-.22*this.rad,-.22*this.rad,Math.max(0,i+n),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.22*this.rad,-.22*this.rad,Math.max(0,i-n),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.22*this.rad,.22*this.rad,Math.max(0,i+n),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(-.22*this.rad,.22*this.rad,Math.max(0,i-n),0,2*Math.PI),Ot.fill(),Ot.restore()}if(e=this.flag_eff_onFire?1:0,this.onFireEffA+=.1*(e-this.onFireEffA),this.onFireEffA>.01){r=1;var o=(t=.15)+(T=.5*(.4-t))+T*Math.sin(2*Math.PI/r*(ft/1e3));if(Ot.save(),Ot.globalAlpha*=o*this.onFireEffA,_(0,0,Math.max(0,this.rad),"orange"),Ot.restore(),He)r=1,n=(t=.5)+(T=.5*(1-t))+T*Math.sin(2*Math.PI/r*(ft/1e3)),(c=ve("img/fire/0.png"))&&(p=0-.3*this.rad,g=.2*this.rad-.3*this.rad,u=1*this.rad*(2+2*n)/3,m=1*this.rad*n,f=.5,y=.95,Ot.save(),Ot.globalAlpha*=this.onFireEffA*n,Ot.drawImage(c,p+u*-f,g+m*-y,u,m),Ot.globalAlpha*=this.onFireEffA*n,Ot.drawImage(c,p+.5*this.rad+u*-f,g+.5*this.rad+m*-y,u,m),Ot.restore());else{r=1,n=(t=.5)+(T=.5*(1-t))+T*Math.sin(2*Math.PI/r*(ft/1e3));var l=Math.trunc(ft/100)%5,h=Math.trunc(ft/150)%5,c=ve("img/fire/"+l+".png"),d=ve("img/fire/"+h+".png");if(c||d){var p=0-.3*this.rad,g=.2*this.rad-.3*this.rad,u=1*this.rad*(2+2*n)/3,m=1*this.rad*n,f=.5,y=.95;Ot.save(),c&&(Ot.globalAlpha*=this.onFireEffA*n,Ot.drawImage(c,p+u*-f,g+m*-y,u,m)),d&&(Ot.globalAlpha*=this.onFireEffA*n,Ot.drawImage(d,p+.5*this.rad+u*-f,g+.5*this.rad+m*-y,u,m)),Ot.restore()}}}if(this.frozenEffA>.01&&this.flag_eff_frozen){var b;Ot.save(),a=ft%(1e3*(b=7))/(1e3*b),Ot.rotate(a*(2*Math.PI)),Ot.globalAlpha*=this.frozenEffA,i=.2*this.rad,s=(ft-this.spawnTime)/1e3,r=1,n=(.5+.07*i)*Math.sin(2*Math.PI/r*s),Ot.fillStyle="white";var w=.27*this.rad;Ot.beginPath(),Ot.arc(-w,-w,Math.max(0,i+n),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(w,-w,Math.max(0,i-n),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(w,w,Math.max(0,i+n),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(-w,w,Math.max(0,i-n),0,2*Math.PI),Ot.fill(),Ot.restore()}if(this.frozenEffA>.01){Ot.save();var v=.3;Ot.globalAlpha*=v*this.frozenEffA,_(0,0,Math.max(0,this.rad-this.outlineW),"white"),Ot.restore()}if(this.effA_healing>.01&&(Ot.save(),v=.3,Ot.globalAlpha*=v*this.effA_healing,_(0,0,Math.max(0,this.rad-this.outlineW),this.flag_redHealing?"#A20000":"#ef24ed"),Ot.restore()),this.effA_hot>.01){Ot.save(),v=.3,r=1.2;var T=.5*(1-(t=.3));Ot.globalAlpha*=t+T+T*Math.sin(2*Math.PI/r*((ft-this.spawnTime)/1e3)),_(0,0,Math.max(0,this.rad-this.outlineW),"rgba(249, 212, 77, 0.3)"),Ot.restore()}if(this.effA_poison>.01&&(Ot.save(),v=.3,Ot.globalAlpha*=v*this.effA_poison,r=1.2,T=.5*(1-(t=.3)),Ot.globalAlpha*=t+T+T*Math.sin(2*Math.PI/r*((ft-this.spawnTime)/1e3)),_(0,0,Math.max(0,this.rad-this.outlineW),"#9FDA00"),Ot.restore()),e=this.flag_eff_bleeding?.8:0,this.effA_bleeding+=.1*(e-this.effA_bleeding),this.effA_bleeding>.01){Ot.save(),r=1.2,T=.3*(1-(t=.3)),Ot.globalAlpha*=t+T+T*Math.sin(2*Math.PI/r*((ft-this.spawnTime)/1e3)),Ot.globalAlpha*=this.effA_bleeding;var k=-2.6;_(0,0,this.rad+k*this.effA_bleeding,"red"),Ot.restore()}(e=this.flag_eff_slimed?.8:0,this.effA_slimed+=.1*(e-this.effA_slimed),this.effA_slimed>.01&&(Ot.save(),r=1.2,T=.3*(1-(t=.3)),Ot.globalAlpha*=t+T+T*Math.sin(2*Math.PI/r*((ft-this.spawnTime)/1e3)),Ot.globalAlpha*=this.effA_slimed,k=-2.6,_(0,0,this.rad+k*this.effA_slimed,"grey"),Ot.restore()),e=this.flag_eff_stunk?.8:0,this.effA_stunk+=.1*(e-this.effA_stunk),this.effA_stunk>.01)&&(Ot.save(),r=1.2,T=.3*(1-(t=.3)),Ot.globalAlpha*=t+T+T*Math.sin(2*Math.PI/r*((ft-this.spawnTime)/1e3)),Ot.globalAlpha*=this.effA_stunk,k=-2.6,_(0,0,this.rad+k*this.effA_stunk,"brown"),Ot.restore());if(52==this.animalType&&this.flag_usingAbility){s=(ft-this.spawnTime)/1e3,r=.75,n=1*Math.sin(2*Math.PI/r*s);var I=Ot.globalAlpha;Ot.globalAlpha*=.8-.2*n,Ot.rotate(this.angle),_(.15*this.rad,1.27*-this.rad,this.rad*(.1+.05*n),"#efefef"),_(.15*-this.rad,1.27*-this.rad,this.rad*(.1-.05*n),"#efefef"),Ot.rotate(-this.angle),Ot.globalAlpha=I}if(e=this.flag_webStuck?1:0,this.effA_webStuck+=.02*(e-this.effA_webStuck),this.effA_webStuck>.01){if(Ot.save(),v=.9,Ot.globalAlpha*=v*this.effA_webStuck,c=ve("img/spiderWeb_stuck.png")){var P=1.3*this.rad;Ot.drawImage(c,-P,-P,2*P,2*P)}Ot.restore()}e=this.flag_constricted?1:0,this.effA_constricted+=.04*(e-this.effA_constricted),this.effA_constricted>.01&&(Ot.save(),v=.9,Ot.globalAlpha*=v*this.effA_constricted,(c=ve("img/constrict.png"))&&(P=1.3*this.rad,Ot.rotate(this.angle),Ot.drawImage(c,-P,-P,2*P,2*P)),Ot.restore()),e=this.flag_tongue_constricted?1:0,this.effA_tongue_constricted+=.04*(e-this.effA_tongue_constricted),this.effA_tongue_constricted>.01&&(Ot.save(),v=.9,Ot.globalAlpha*=v*this.effA_tongue_constricted,(c=ve("skins/jungle/jungle_monster/grabbed_tongue.png"))&&(P=1.3*this.rad,Ot.rotate(this.angle),Ot.drawImage(c,-P,-P,2*P,2*P)),Ot.restore())},Es.prototype.getSkinName=function(){var t=this.skinImgName;switch(this.animalType){case 25:case 34:case 27:case 21:case 17:case 45:case 50:case 51:case 57:case 87:case f:case 89:this.flag_usingAbility&&(t+="2");break;case 54:this.z=2*this.z,this.flag_usingAbility&&4==this.specType&&(t+="2")}return this.flag_flying&&!this.flag_isGrabbed&&(58!=this.animalType&&this.animalType!=m||(t="flying_"+t)),t},Es.prototype.setObjTypes=function(t,e){this.oType=t,this.animalType=e},Es.prototype.readCustomData_onNewlyVisible=function(t){Es.superClass.prototype.readCustomData_onNewlyVisible.call(this,t);var e=t.readString(),a=t.readString();this.animalSpecies=t.readUInt8(),3==ye&&(this.teamID=t.readUInt8()),this.setNick(a||"bettermope.io",e)},Es.prototype.readCustomData_onUpdate=function(t){Es.superClass.prototype.readCustomData_onUpdate.call(this,t),this.specType=t.readUInt8(),this.specType2=t.readUInt8();var e=2*t.readUInt8(),a=I(e-90);this.angleDelta=A(this.angle,a),this.oAngle=this.angle,this.firstPosUpd&&(this.oAngle=this.angle=a,this.angleDelta=0),this.curBiome=t.readUInt8();var i=t.readUInt32();this.flag_lowWat=P(i,0),this.flag_inHomeBiome=P(i,1),this.flag_underWater=P(i,2),this.flag_eff_invincible=P(i,3),this.flag_usingAbility=P(i,4),this.flag_tailBitten=P(i,5),this.flag_eff_stunned=P(i,6),this.flag_iceSliding=P(i,7),this.flag_eff_frozen=P(i,8),this.flag_eff_onFire=P(i,9),this.flag_eff_healing=P(i,10),this.flag_eff_poison=P(i,11),this.flag_constricted=P(i,12),this.flag_webStuck=P(i,13),this.flag_stealth=P(i,14),this.flag_eff_bleeding=P(i,15),this.flag_flying=P(i,16),this.flag_isGrabbed=P(i,17),this.flag_eff_aniInClaws=P(i,18),this.flag_eff_stunk=P(i,19),this.flag_cold=P(i,20),this.flag_inWater=P(i,21),this.flag_inLava=P(i,22),this.flag_canClimbHill=P(i,23),this.flag_isDevMode=P(i,24),this.flag_eff_slimed=P(i,25),this.flag_eff_wobbling=P(i,26),this.flag_eff_hot=P(i,27),this.flag_can1v1=P(i,28),this.flag_isInArena=P(i,29),this.flag_ghost=P(i,30),this.flag_arenaWhich=P(i,31);var s=t.readUInt32();this.flag_climbingTree=P(s,0),this.flag_inLavaSpec=P(s,1),this.flag_tongue_constricted=P(s,2),this.inSwamp=P(s,3),this.inJungle=P(s,4),this.flag_climbingWeb=P(s,5),this.flag_redHealing=P(s,6),this.flag_nearBDFight=P(s,7),this.wins1v1=t.readUInt8();let r=0;if(sn&&(r=t.readUInt32()),sn){var n="\n(SUPER ID:"+r+")";this.nickTXT.setText(this.nickName+n)}if(vt&&this.flag_can1v1){var o="\n(wins:"+this.wins1v1+")";this.nickTXT.setText(this.nickName+o),this.winsAddedInNick=!0}else this.winsAddedInNick&&(this.winsAddedInNick=!1,this.nickTXT.setText(this.nickName))},Es.prototype.winsAddedInNick=!1,window.Animal=Es,u.setCustomClassForGameObjType(Es,2),Ns=Ms,Bs.prototype=Object.create(Ns.prototype),Bs.prototype.constructor=Bs,Bs.superClass=Ns,Bs.prototype.color="limegreen",Bs.prototype.updateZ=function(){this.z=this.rad+1111e4},Bs.prototype.customDraw=function(t){Ot.save(),this.shrinkRad>250&&(Ot.save(),Ot.globalAlpha=.1,N(0,0,this.shrinkRad,4,nt),Ot.restore()),Ot.save(),Ot.globalAlpha=.7,N(0,0,this.rad,8,this.color),Ot.restore(),this.rad>1500&&(Ot.save(),Ot.globalAlpha=.4,N(0,0,this.shrinkedRad,8,nt),Ot.restore());var e=.4-.1,a=this.color,i=fe,s=me-this.x,r=i-this.y,n=this.x,o=r,l=n,h=this.y,c=s,d=h;s*=Rt,r*=Rt,n*=Rt,o*=Rt,l*=Rt,h*=Rt,c*=Rt,d*=Rt,this.drawDangerAreaSegment2(0,a,e,r,s),this.drawDangerAreaSegment2(.5*Math.PI,a,e,n,o),this.drawDangerAreaSegment2(1*Math.PI,a,e,h,l),this.drawDangerAreaSegment2(1.5*Math.PI,a,e,c,d),Ot.restore()},Bs.prototype.drawDangerAreaSegment2=function(t,e,a,i,s){Ot.save(),Ot.globalAlpha=a,Ot.fillStyle=e,Ot.beginPath(),Ot.rotate(t),Ot.arc(0,0,this.rad,0,.5*Math.PI,!1),Ot.lineTo(0,i),Ot.lineTo(s,i),Ot.lineTo(s,0),Ot.closePath(),Ot.fill(),Ot.restore()},Bs.prototype.readCustomData_onUpdate=function(t){this.shrinkRad=t.readUInt32()/4},window.SafeArea=Bs,u.setCustomClassForGameObjType(Bs,76),Ns=Ms,Os.prototype=Object.create(Ns.prototype),Os.prototype.constructor=Os,Os.superClass=Ns,Os.prototype.updateZ=function(){this.z=1002},Os.prototype.readCustomData_onUpdate=function(t){this.webTransparency=this.specType=t.readUInt8()},Os.prototype.customDraw=function(t){Ot.save(),Ot.globalAlpha*=this.specType/100*.9;var e=ve("img/spiderWeb.png");if(e){var a=this.rad;Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(e,-a,-a,2*a,2*a)}Ot.restore()},Os.prototype.readCustomData_onNewlyVisible=function(t){this.webTransparency=this.specType=t.readUInt8()},window.SpiderWeb=Os,u.setCustomClassForGameObjType(Os,p),Ns=Ms,js.prototype=Object.create(Ns.prototype),js.prototype.constructor=js,js.superClass=Ns,js.prototype.updateZ=function(){this.z=1002};var Rs="#FF0000",Ws="black";function js(){js.superClass.call(this,85)}function Gs(){Gs.superClass.call(this,88)}js.prototype.customDraw=function(t){Ot.save(),Ot.beginPath(),Ot.lineWidth=1;let e=t?this.rad:Math.max(5,this.rad-Ot.lineWidth/2);Ot.globalAlpha=t?1:.4,Ot.arc(0,0,e,0,2*Math.PI),Ot.fillStyle=t?Rs:Ws,Ot.strokeStyle=t?Rs:Ws,t?Ot.stroke():Ot.fill(),Ot.closePath(),Ot.restore()},window.DevWall=js,u.setCustomClassForGameObjType(js,85),Ns=Ms,Gs.prototype=Object.create(Ns.prototype),Gs.prototype.constructor=Gs,Gs.superClass=Ns,Gs.prototype.visibility=.9,Gs.prototype.nVisibility=.9,Gs.prototype.customDraw=function(t){this.visibility+=.075*(this.nVisibility-this.visibility),Ot.save(),Ot.globalAlpha=1;let e=this.rPer*Math.PI*2;var a,i=1.5*this.rad;Ot.rotate(e),(a=ve("img/tree/"+this.curBiome+"/trunk_"+this.specType+".png"))&&Ot.drawImage(a,-i,-i,2*i,2*i),Ot.globalAlpha=this.visibility,(a=ve("img/tree/"+this.curBiome+"/tree_"+this.specType+".png"))&&Ot.drawImage(a,-i,-i,2*i,2*i),Ot.restore()},Gs.prototype.readCustomData_onUpdate=function(t){Gs.superClass.prototype.readCustomData_onUpdate.call(this,t),this.nVisibility=t.readUInt8()/100},window.Tree=Gs,u.setCustomClassForGameObjType(Gs,88),Ns=Ms,br.prototype=Object.create(Ns.prototype),br.prototype.constructor=br,br.superClass=Ns,br.prototype.Following=null,br.prototype.P1=null,br.prototype.P2=null,br.prototype.updateZ=function(){this.z=1e4};var zs,Hs,Ls,Xs,Ys,Vs,qs,Ks,Js,Zs,Qs,$s,tr,er,ar,ir,sr,rr,nr,or,lr,hr,cr,dr,pr,gr,ur,mr,fr,yr=function(t,e,a,i,s,r=!1){if(0==s)return{x:parseFloat(a),y:parseFloat(i)};if(r)var n=Math.PI/180*s;else n=Math.PI/-180*s;var o=Math.cos(n),l=Math.sin(n);return{x:o*(a-t)+l*(i-e)+t,y:o*(i-e)-l*(a-t)+e}};function br(){br.superClass.call(this,64)}function wr(){wr.superClass.call(this,2)}function vr(){vr.superClass.call(this,2)}function Tr(){Tr.superClass.call(this,2)}function kr(){kr.superClass.call(this,2)}function zs(){zs.superClass.call(this,2)}function Ir(){Ir.superClass.call(this,2)}function Hs(){Hs.superClass.call(this,2)}function Pr(){Pr.superClass.call(this,2)}function Ar(){Ns.call(this,2)}function Cr(){Cr.superClass.call(this,2)}function Sr(){this.lava=0,Sr.superClass.call(this,2)}function xr(){this.crystals=[],xr.superClass.call(this,2)}function Ls(){Ls.superClass.call(this,2)}function Xs(){Xs.superClass.call(this,2)}function Ys(){Ys.superClass.call(this,2)}function Vs(){Vs.superClass.call(this,2)}function qs(){qs.superClass.call(this,2)}function Ks(){Ks.superClass.call(this,2)}function Js(){Js.superClass.call(this,2)}function Zs(){Zs.superClass.call(this,2)}function Qs(){Qs.superClass.call(this,2)}function $s(){$s.superClass.call(this,2)}function tr(){tr.superClass.call(this,2)}function Mr(){Mr.superClass.call(this,2)}function er(){er.superClass.call(this,2)}function ar(){ar.superClass.call(this,2)}function ir(){ir.superClass.call(this,2)}function sr(){sr.superClass.call(this,2)}function rr(){rr.superClass.call(this,2)}function nr(){nr.superClass.call(this,2)}function or(){or.superClass.call(this,72),this.webTransparency=0,this.doesDrawEffectScale=!0,this.drawEffectScale_Slow=!0}function lr(){lr.superClass.call(this,2)}function hr(){hr.superClass.call(this,2)}function cr(){cr.superClass.call(this,2)}function _r(){_r.superClass.call(this,2)}function Nr(){Nr.superClass.call(this,2)}function dr(){dr.superClass.call(this,2)}function pr(){pr.superClass.call(this,2)}function gr(){gr.superClass.call(this,70),this.webTransparency=0,this.doesDrawEffectScale=!0,this.drawEffectScale_Slow=!0}function Dr(){Dr.superClass.call(this,18)}function Fr(){Fr.superClass.call(this,74),this.shrinkedRad=0}function Ur(){Ur.superClass.call(this,75),this.doesDrawEffectScale=!0}function ur(){ur.superClass.call(this,2)}function Er(){Er.superClass.call(this,g)}function mr(){mr.superClass.call(this,g)}function fr(){fr.superClass.call(this,g)}function Br(t,e,a,i,s,r){var n=ie;this.x=t,this.y=e,this.w=a,this.h=i,this.label=s,this.font=Number(r)?Number(r):30,this.isVisible=!0,this.hoverColor="#16932A",this.defaultColor="#0aa633",this.alpha=1,this.txtAlpha=1,this.ctx=Ot,this.buttonTXT=new E(12,"white"),this.buttonTXT.renderScale=1.5,this.isHighLighted=!1,this.showLabeleOnHover=!1,this.textShadow=!1,this.buttonScaleF=1,this.strokeWidth=4*n,this.testPosHitsButton=function(t,e){var a=this.x,i=this.x+this.w,s=this.y,r=this.y+this.h;return!(t<a||t>i||e<s||e>r)},this.setPosAndSize=function(t,e,a,i,s,r){this.w=a,this.h=i,this.x=t+a*(.5-s),this.y=e+i*(.5-r)},this.draw=function(){this.isVisible&&(this.update(),this.ctx.save(),this.ctx.translate(this.x,this.y),this.ctx.scale(this.buttonScaleF,this.buttonScaleF),this.alpha,this.ctx.fillStyle=this.defaultColor,this.ctx.strokeStyle="#116c17",this.ctx.lineWidth=this.strokeWidth,this.roundRect(0,0,this.w,this.h,5,!0,!0),this.isHighLighted&&(this.ctx.fillStyle=this.hoverColor,this.roundRect(0,0,this.w,this.h,5,!0,!1)),this.showLabeleOnHover?this.isHighLighted&&this.showLabeleOnHover&&this.drawTextOnHowever():(this.ctx.globalAlpha=this.txtAlpha,this.drawText(this.w/2,this.h/2)),this.ctx.restore(),this.onAfterDraw())},this.drawTextOnHowever=function(){this.drawText(this.w/2,this.h/2)},this.drawText=function(t,e){this.buttonTXT.setText(this.label),this.buttonTXT.strokeW=this.isHighLighted&&!this.textShadow?0:1,this.buttonTXT.setFontSize(this.font),this.buttonTXT.x=t,this.buttonTXT.y=e,this.buttonTXT.draw()},this.roundRect=function(t,e,a,i,s,r,n){if(void 0===n&&(n=!0),void 0===s&&(s=5),"number"==typeof s)s={tl:s,tr:s,br:s,bl:s};else{var o={tl:0,tr:0,br:0,bl:0};for(var l in o)s[l]=s[l]||o[l]}this.ctx.globalAlpha=this.alpha,this.ctx.lineWidth=2,this.ctx.beginPath(),this.ctx.moveTo(t+s.tl,e),this.ctx.lineTo(t+a-s.tr,e),this.ctx.quadraticCurveTo(t+a,e,t+a,e+s.tr),this.ctx.lineTo(t+a,e+i-s.br),this.ctx.quadraticCurveTo(t+a,e+i,t+a-s.br,e+i),this.ctx.lineTo(t+s.bl,e+i),this.ctx.quadraticCurveTo(t,e+i,t,e+i-s.bl),this.ctx.lineTo(t,e+s.tl),this.ctx.quadraticCurveTo(t,e,t+s.tl,e),this.ctx.closePath(),r&&this.ctx.fill(),n&&this.ctx.stroke()},this.onClick=function(){},this.onMouseMove=function(){},this.update=function(){},this.onInterfaceReset=function(){F(this.label+".onInterfaceReset")},this.onAfterDraw=function(){}}function Or(){}br.prototype.customDraw=function(t){if(Ot.save(),1==this.specType){var e=ve("skins/falcon/1/sleigh.png");if(e){var a=2*this.rad;Ot.save(),Ot.rotate(this.angle-I(180)),Ot.drawImage(e,-a,1.1*-a,2*a,2*a),Ot.restore()}}if(this.Following)for(var i=0;i<2;i++){let t=0==i?-1:1;Ot.save(),Ot.beginPath();let e=0,a=0,s=this.Following.x-this.x,r=this.Following.y-this.y,n=k(this.Following.angle)+90,o=yr(e,a,s,r,-n);s=o.x,r=o.y;let l=this.rad*t,h=this.Following.rad*t;1!=this.specType&&(a+=l),r+=h,Ot.rotate(this.angle+I(90)),Ot.moveTo(e,a),Ot.rotate(-(this.angle+I(90))),Ot.rotate(I(n)),Ot.bezierCurveTo(e,a+l,s,r+h,s,r),Ot.strokeStyle="#FFB600",Ot.lineWidth=9,Ot.stroke(),Ot.strokeStyle="#FFE800",Ot.lineWidth=5,Ot.stroke(),Ot.closePath(),Ot.restore()}Ot.save(),Ot.rotate(this.angle);let s=-this.rad,r=0;this.Following&&(r=-this.Following.rad),1!=this.specType&&(_(s,0,.25*this.rad,"#FFB600"),_(s,0,.2*this.rad,"#FFE800"),_(-s,0,.25*this.rad,"#FFB600"),_(-s,0,.2*this.rad,"#FFE800")),0!=r&&(Ot.rotate(-this.angle),Ot.translate(-this.x,-this.y),Ot.translate(this.Following.x,this.Following.y),Ot.rotate(this.Following.angle),_(r,0,.25*this.Following.rad,"#FFB600"),_(r,0,.2*this.Following.rad,"#FFE800"),Ot.rotate(-this.Following.angle),Ot.translate(-this.Following.x,-this.Following.y),Ot.translate(this.x,this.y),Ot.rotate(this.angle),Ot.rotate(-this.angle),Ot.translate(-this.x,-this.y),Ot.translate(this.Following.x,this.Following.y),Ot.rotate(this.Following.angle),_(-r,0,.25*this.Following.rad,"#FFB600"),_(-r,0,.2*this.Following.rad,"#FFE800"),Ot.rotate(-this.Following.angle),Ot.translate(-this.Following.x,-this.Following.y),Ot.translate(this.x,this.y),Ot.rotate(this.angle)),Ot.restore(),Ot.restore()},br.prototype.readCustomData_onNewlyVisible=function(t){br.superClass.prototype.readCustomData_onNewlyVisible.call(this,t),this.readInfo(t)},br.prototype.readCustomData_onUpdate=function(t){br.superClass.prototype.readCustomData_onUpdate.call(this,t),this.readInfo(t)},br.prototype.readInfo=function(t){this.specType=t.readUInt8();let e=t.readUInt32();this.Following=xe[e]},window.Sleigh=br,u.setCustomClassForGameObjType(br,64),Ns=Es,wr.prototype=Object.create(Ns.prototype),wr.prototype.constructor=wr,wr.superClass=Ns,wr.prototype.readCustomData_onNewlyVisible=function(t){wr.superClass.prototype.readCustomData_onNewlyVisible.call(this,t)},wr.prototype.readCustomData_onUpdate=function(t){if(wr.superClass.prototype.readCustomData_onUpdate.call(this,t),this.flag_usingAbility){var e=t.readUInt8()>0,a=t.readUInt16();if(this.octoIsAnimal!=e||this.octoDisguiseObjT!=a||null==this.octoDrawObj){var i=e?2:a,s=e?a:null,r=u.createGameObjOfOType(i,s);e&&(r.animalType=s),r.oRad=this.oRad,r.nRad=this.nRad,r.curBiome=this.curBiome,this.octoDrawObj=r}this.octoIsAnimal=e,this.octoDisguiseObjT=a}},wr.prototype.drawUnderSkinImgOutline=function(){wr.superClass.prototype.drawUnderSkinImgOutline.call(this)},wr.prototype.drawUnderSkinImg=function(){wr.superClass.prototype.drawUnderSkinImg.call(this)},wr.prototype.drawOnTopOfSkinImg=function(){wr.superClass.prototype.drawOnTopOfSkinImg.call(this),this.flag_usingAbility&&(Ot.save(),Ot.globalAlpha=1-this.underwaterA,24==this.octoDisguiseObjT?this.octoDrawObj.nRad=25:26==this.octoDisguiseObjT?this.octoDrawObj.nRad=17:46==this.octoDisguiseObjT?this.octoDrawObj.nRad=15:this.octoDrawObj.nRad=this.rad,3==this.octoDisguiseObjT&&console.log("Octo is hill now!"),this.octoDrawObj.draw(),Ot.restore())},wr.prototype.drawWhenUnderwater=function(){wr.superClass.prototype.drawWhenUnderwater.call(this)},wr.prototype.octoDisguiseObjT=0,wr.prototype.octoIsAnimal=!1,wr.prototype.drawHealthBar=function(){if(this.flag_usingAbility){if(!this.octoIsAnimal)return;wr.superClass.prototype.drawNickName.call(this,1),this.octoDrawObj.curBiome=this.curBiome,this.hpPer_n=2,this.hpPer=25,this.hpBarA=1}Ot.save();var t=ft<this.hpBarTimeoutT?1:0;if(this.hpBarA+=.04*(t-this.hpBarA),this.hpBarA>.001){this.hpPer+=.1*(this.hpPer_n-this.hpPer);var e=Math.max(1,this.rad/25),a=20*e,i=5*e,s=-this.rad-10*e;Ot.globalAlpha*=this.hpBarA,Ot.fillStyle="rgba(0,0,0,0.35)",Ot.fillRect(0-a/2,s-i/2,a,i),Ot.fillStyle="#16D729";var r=a*(this.hpPer/100);this.flag_usingAbility&&this.octoIsAnimal&&(r=.25*a),Ot.fillRect(0-a/2,s-i/2,r,i)}Ot.restore()},wr.prototype.getSkinName=function(){return"ocean/octopus"},window.Octopus=wr,u.setCustomClassForGameObjType(wr,2,29),Ns=Es,vr.prototype=Object.create(Ns.prototype),vr.prototype.constructor=vr,vr.superClass=Ns,vr.prototype.animalInfo=function(){var t={},e="";switch(this.animalSpecies){case 0:t.aniName="Bald Eagle";break;case 1:t.aniName="Golden Eagle",e="You can pick up predators if you're bigger than them!"}return t.aniCol="#5b400d",t.upgradeText="UPGRADED to "+t.aniName+"!\nEagles can fly up other animals in the air!\n"+e,t.skinName="land/eagle/"+this.animalSpecies+"/eagle"+(0==this.specType?"":this.specType),t},vr.prototype.drawSkinCustomization=function(){if(this.flag_usingAbility){var t="skins/land",e=500/340;if(this.flag_flying&&!this.flag_isGrabbed){Ot.save();var a=(ft-this.spawnTime)/1e3,i=He?this.birdNoAnimationFlyWingAngle:D(a,.9,.3,2);if(p=ve(t+"/eagle/"+this.animalSpecies+"/eagle_wing1.png")){Ot.save();var s=-(-.2+i)*I(90),r=.8*this.rad;Ot.rotate(I(45)+s);var n=0,o=this.rad,l=2*r*.62,h=2.5*r,c=.2,d=1.7;Ot.drawImage(p,n+l*-c,o+h*-d,l,h),Ot.restore()}(p=ve(t+"/eagle/"+this.animalSpecies+"/eagle_wing2.png"))&&(Ot.save(),s=-(-.2+i)*I(-90),r=.8*this.rad,Ot.rotate(I(-45)+s),n=0,o=this.rad,l=2*r*.62,h=2.5*r,c=.8,d=1.7,Ot.drawImage(p,n+l*-c,o+h*-d,l,h),Ot.restore()),Ot.restore()}else if(1==this.specType){var p;Ot.save(),a=(ft-this.spawnTime)/1e3,i=He?0:D(a,.7,.3,2),(p=ve(t+"/eagle/"+this.animalSpecies+"/eagle_wing1.png"))&&(Ot.save(),s=-(-.2+i)*I(45),r=.8*this.rad,Ot.rotate(I(15)+s),n=0,o=this.rad,l=2*r*.8,h=2.2*r,c=0,d=1.5,Ot.drawImage(p,n+l*-c,o+h*-d,l,h),Ot.restore()),(p=ve(t+"/eagle/"+this.animalSpecies+"/eagle_wing2.png"))&&(Ot.save(),s=-(-.2+i)*I(-45),r=.8*this.rad,Ot.rotate(I(-15)+s),n=0,o=this.rad,l=2*r*.8,h=2.2*r,c=1,d=1.5,Ot.drawImage(p,n+l*-c,o+h*-d,l,h),Ot.restore()),Ot.restore()}if(0!=this.specType&&null!=this.specType){var g="eagle_head"+(1==this.specType?"2":""),u=ve(t+"/eagle/"+this.animalSpecies+"/"+g+".png");u&&(Ot.save(),r=this.rad,Ot.drawImage(u,-r*e,(.1*r-r)*e,2*r*e,2*r*e),Ot.restore())}}},window.Eagle=vr,u.setCustomClassForGameObjType(vr,2,56),Ns=Es,Tr.prototype=Object.create(Ns.prototype),Tr.prototype.constructor=Tr,Tr.superClass=Ns,Tr.prototype.getSkinName=function(){return"land/ostrich/ostrich"},window.Ostrich=Tr,u.setCustomClassForGameObjType(Tr,2,63),Ns=Es,kr.prototype=Object.create(Ns.prototype),kr.prototype.constructor=kr,kr.superClass=Ns,kr.prototype.getSkinName=function(){return"land/ostrich/ostrich-baby"},kr.prototype.isEdibleOutlined=function(){if(this.mommyID==ea)return!1;var t=xe[ea];if(t){var e=t.animalType;if(13==e||51==e||26==e)return!1}return kr.superClass.prototype.isEdibleOutlined.call(this)},kr.prototype.readCustomData_onNewlyVisible=function(t){kr.superClass.prototype.readCustomData_onNewlyVisible.call(this,t),this.mommyID=t.readUInt32()},window.OstrichBaby=kr,u.setCustomClassForGameObjType(kr,2,69),Ns=Es,zs.prototype=Object.create(Ns.prototype),zs.prototype.constructor=zs,zs.superClass=Ns,zs.prototype.animalInfo=function(){var t={};let e="";switch(this.animalSpecies){case 0:t.aniName="Falcon";break;case 1:t.aniName="Santa Falcon";break;case 2:t.aniName="Red-Shouldered\nHawk",e+="\n(Can even damage Predators!)";break;case 3:t.aniName="Cloud Falcon",e+="\n(Damages Predator and flies faster!)"}return t.aniDesc="",t.upgradeText="UPGRADED to "+t.aniName+"\nFly, and do a powerful dive attack! Aim it well."+e,t.aniCol="#FF9000",t.skinName="land/falcon/"+this.animalSpecies+"/falcon",t},zs.prototype.getSkinName=function(){return"land/falcon/"+this.animalSpecies+"/falcon"+(0==this.specType||null==this.specType?"":this.specType)},zs.prototype.drawSkinCustomization=function(){if(this.flag_usingAbility){var t="skins/land/falcon/"+this.animalSpecies+"/",e=500/340;if(this.flag_flying&&!this.flag_isGrabbed&&1==this.specType){Ot.save();var a=(ft-this.spawnTime)/1e3,i=He?this.birdNoAnimationFlyWingAngle:D(a,.7,.4,2);if(p=ve(t+"falcon_wing1.png")){Ot.save();var s=-(-.2+i)*I(80),r=.8*this.rad;Ot.rotate(I(25)+s);var n=0,o=this.rad,l=2*r*.65,h=2.5*r,c=0,d=1.5;Ot.drawImage(p,n+l*-c,o+h*-d,l,h),Ot.restore()}(p=ve(t+"falcon_wing2.png"))&&(Ot.save(),s=-(-.2+i)*I(-80),r=.8*this.rad,Ot.rotate(I(-25)+s),n=0,o=this.rad,l=2*r*.65,h=2.5*r,c=1,d=1.5,Ot.drawImage(p,n+l*-c,o+h*-d,l,h),Ot.restore()),Ot.restore()}else if(this.flag_flying&&2==this.specType)Ot.save(),a=(ft-this.spawnTime)/1e3,i=He?0:D(a,.7,.3,2),(p=ve(t+"falcon_wing1.png"))&&(Ot.save(),s=.2*I(25),r=.8*this.rad,Ot.rotate(s),n=0,o=this.rad,l=2*r*.7,h=2.2*r,c=0,d=1.5,Ot.drawImage(p,n+l*-c,o+h*-d,l,h),Ot.restore()),(p=ve(t+"falcon_wing2.png"))&&(Ot.save(),s=.2*I(-25),r=.8*this.rad,Ot.rotate(s),n=0,o=this.rad,l=2*r*.7,h=2.2*r,c=1,d=1.5,Ot.drawImage(p,n+l*-c,o+h*-d,l,h),Ot.restore()),Ot.restore();else if(this.flag_flying&&3==this.specType){var p;Ot.save(),a=(ft-this.spawnTime)/1e3,i=He?0:D(a,.5,.4,2),(p=ve(t+"falcon_wing1.png"))&&(Ot.save(),s=-(-.2+i)*I(45),r=.8*this.rad,Ot.rotate(I(15)+s),n=0,o=this.rad,l=2*r*1,h=2.2*r,c=0,d=1.5,Ot.drawImage(p,n+l*-c,o+h*-d,l,h),Ot.restore()),(p=ve(t+"falcon_wing2.png"))&&(Ot.save(),s=-(-.2+i)*I(-45),r=.8*this.rad,Ot.rotate(I(-15)+s),n=0,o=this.rad,l=2*r*1,h=2.2*r,c=1,d=1.5,Ot.drawImage(p,n+l*-c,o+h*-d,l,h),Ot.restore()),Ot.restore()}if(0!=this.specType&&null!=this.specType){var g=ve(t+"falcon_head.png");if(g){Ot.save();var u=.2*(r=this.rad*(3==this.specType?1.2:1));3==this.specType&&(u=-.15*r),Ot.drawImage(g,-r*e,(-r+u)*e,2*r*e,2*r*e),Ot.restore()}}}},window.Falcon=zs,u.setCustomClassForGameObjType(zs,2,65),Ns=Es,Ir.prototype=Object.create(Ns.prototype),Ir.prototype.constructor=Ir,Ir.superClass=Ns,Ir.prototype.getSkinName=function(){return"arctic/snowyowl/snowyowl"+(0==this.specType?"":this.specType)},Ir.prototype.drawSkinCustomization=function(){if(this.flag_usingAbility){var t="skins/arctic",e=500/340;if(this.flag_flying&&!this.flag_isGrabbed&&1==this.specType){Ot.save();var a=(ft-this.spawnTime)/1e3,i=He?this.birdNoAnimationFlyWingAngle:D(a,.7,.4,2);if(p=ve(t+"/snowyowl/snowyowl_wing1.png")){Ot.save();var s=-(-.2+i)*I(80),r=.8*this.rad;Ot.rotate(I(25)+s);var n=0,o=this.rad,l=2*r*.65,h=2.5*r,c=0,d=1.5;Ot.drawImage(p,n+l*-c,o+h*-d,l,h),Ot.restore()}(p=ve(t+"/snowyowl/snowyowl_wing2.png"))&&(Ot.save(),s=-(-.2+i)*I(-80),r=.8*this.rad,Ot.rotate(I(-25)+s),n=0,o=this.rad,l=2*r*.65,h=2.5*r,c=1,d=1.5,Ot.drawImage(p,n+l*-c,o+h*-d,l,h),Ot.restore()),Ot.restore()}else if(this.flag_flying&&2==this.specType)Ot.save(),a=(ft-this.spawnTime)/1e3,i=He?0:D(a,.7,.3,2),(p=ve(t+"/snowyowl/snowyowl_wing1.png"))&&(Ot.save(),s=-(-.2+i)*I(45),r=.8*this.rad,Ot.rotate(I(15)+s),n=0,o=this.rad,l=2*r*.7,h=2.2*r,c=0,d=1.5,Ot.drawImage(p,n+l*-c,o+h*-d,l,h),Ot.restore()),(p=ve(t+"/snowyowl/snowyowl_wing2.png"))&&(Ot.save(),s=-(-.2+i)*I(-45),r=.8*this.rad,Ot.rotate(I(-15)+s),n=0,o=this.rad,l=2*r*.7,h=2.2*r,c=1,d=1.5,Ot.drawImage(p,n+l*-c,o+h*-d,l,h),Ot.restore()),Ot.restore();else if(this.flag_flying&&3==this.specType){var p;Ot.save(),a=(ft-this.spawnTime)/1e3,i=He?0:D(a,.5,.5,2),(p=ve(t+"/snowyowl/snowyowl_wing1.png"))&&(Ot.save(),s=-(-.2+i)*I(45),r=.8*this.rad,Ot.rotate(I(25)+s),n=0,o=this.rad,l=2*r*.7,h=2.2*r,c=0,d=1.5,Ot.drawImage(p,n+l*-c,o+h*-d,l,h),Ot.restore()),(p=ve(t+"/snowyowl/snowyowl_wing2.png"))&&(Ot.save(),s=-(-.2+i)*I(-45),r=.8*this.rad,Ot.rotate(I(-25)+s),n=0,o=this.rad,l=2*r*.7,h=2.2*r,c=1,d=1.5,Ot.drawImage(p,n+l*-c,o+h*-d,l,h),Ot.restore()),Ot.restore()}if(0!=this.specType&&null!=this.specType){var g=ve(t+"/snowyowl/snowyowl_head.png");g&&(Ot.save(),r=.8*this.rad,Ot.drawImage(g,-r*e,(.1*r-r)*e,2*r*e,2*r*e),Ot.restore())}}},window.SnowyOwl=Ir,u.setCustomClassForGameObjType(Ir,2,66),Ns=Es,Hs.prototype=Object.create(Ns.prototype),Hs.prototype.constructor=Hs,Hs.superClass=Ns,Hs.prototype.getSkinName=function(){return"ocean/pelican/pelican"+(0==this.specType?"":this.specType)},Hs.prototype.drawSkinCustomization=function(){if(this.flag_usingAbility){var t=500/340,e=this.rad-this.outlineW,a="skins/ocean/";if(this.flag_flying){Ot.save();var i=(ft-this.spawnTime)/1e3,s=He?this.birdNoAnimationFlyWingAngle:D(i,.9,.3,2);if(p=ve(a+"/pelican/pelican_wing1.png")){Ot.save();var r=-(-.2+s)*I(90);e=.8*this.rad,Ot.rotate(I(45)+r);var n=0,o=this.rad,l=2*e*.6,h=2.3*e,c=0,d=1.7;Ot.drawImage(p,n+l*-c,o+h*-d,l,h),Ot.restore()}(p=ve(a+"/pelican/pelican_wing2.png"))&&(Ot.save(),r=-(-.2+s)*I(-90),e=.8*this.rad,Ot.rotate(I(-45)+r),n=0,o=this.rad,l=2*e*.6,h=2.3*e,c=1,d=1.7,Ot.drawImage(p,n+l*-c,o+h*-d,l,h),Ot.restore()),Ot.restore()}else if(1==this.specType){var p;Ot.save(),i=(ft-this.spawnTime)/1e3,s=He?0:D(i,.9,.3,2),(p=ve(a+"/pelican/pelican_wing11.png"))&&(Ot.save(),r=-(-.2+s)*I(45),e=.8*this.rad,Ot.rotate(I(45)+r),n=0,o=this.rad,l=2*e*.7,h=2.2*e,c=0,d=1.7,Ot.drawImage(p,n+l*-c,o+h*-d,l,h),Ot.restore()),(p=ve(a+"/pelican/pelican_wing21.png"))&&(Ot.save(),r=-(-.2+s)*I(-45),e=.8*this.rad,Ot.rotate(I(-45)+r),n=0,o=this.rad,l=2*e*.7,h=2.2*e,c=1,d=1.7,Ot.drawImage(p,n+l*-c,o+h*-d,l,h),Ot.restore()),Ot.restore()}if(0!=this.specType&&!this.flag_isGrabbed){if(2==this.specType){var g=ve(a+"/pelican/ability_pelican.png");if(g){Ot.save(),Ot.rotate(I(180)),e=.3*this.rad;var u=1*this.rad;Ot.drawImage(g,-e*t,-e-u*t,2*e*t,2*e*t),Ot.restore()}}var m="pelican_head"+(3==this.specType?"2":""),f=ve(a+"/pelican/"+m+".png");f&&(Ot.save(),e=1*this.rad,u=.3*-this.rad,Ot.drawImage(f,-e*t,u*t-e,2*e*t,2*e*t),Ot.restore())}}},window.Pelican=Hs,u.setCustomClassForGameObjType(Hs,2,64),Ns=Es,Pr.prototype=Object.create(Ns.prototype),Pr.prototype.constructor=Pr,Pr.superClass=Ns,Pr.prototype.updateZ=function(){this.z=1003+this.rad},Pr.prototype.getSkinName=function(){var t="";return this.flag_usingAbility&&!this.flag_underWater&&(t="2"),"land/frog/frog"+t},Pr.prototype.drawUnderSkinImg=function(){if(this.flag_usingAbility&&!this.flag_underWater){var t=this.rad-this.outlineW,e=500/340,a=ve("./skins/land/frog/frogLegs.png");a&&Ot.drawImage(a,-t*e,(-t-t)*e,2*t*e,2*t*e)}},Pr.prototype.drawWhenUnderwater=function(){Ot.save(),Ot.globalAlpha=.2,Ot.scale(1,1.5),_(0,0,.5*this.rad,"#598b30"),_(0,-.6*this.rad,.3*this.rad,"#64a034"),Ot.restore()},window.Frog=Pr,u.setCustomClassForGameObjType(Pr,2,62),Ns=Es,(Yr=Ar).prototype=Object.create(Ns.prototype),Yr.prototype.constructor=Yr,Yr.superClass=Ns,Yr.prototype.isAttacking=!1,Yr.prototype.getSkinName=function(){return this.flag_flying&&!this.flag_isGrabbed?"land/oldDuck/flying_duck_"+this.animalSpecies:"land/oldDuck/duck_"+this.animalSpecies},Yr.prototype.drawUnderSkinImg=function(){if(this.flag_flying&&!this.flag_isGrabbed){var t="skins/land";Ot.save();var e,a=(ft-this.spawnTime)/1e3,i=He?this.birdNoAnimationFlyWingAngle:D(a,.7,.4,2);if(e=ve(t+"/oldDuck/flying_duck_"+this.animalSpecies+"_wing1.png")){Ot.save();var s=-(-.2+i)*I(90),r=.8*this.rad;Ot.rotate(s);var n=0,o=this.rad,l=2*r*.7,h=2*r,c=-.2,d=1.2;Ot.drawImage(e,n+l*-c,o+h*-d,l,h),Ot.restore()}(e=ve(t+"/oldDuck/flying_duck_"+this.animalSpecies+"_wing2.png"))&&(Ot.save(),s=-(-.2+i)*I(-90),r=.8*this.rad,Ot.rotate(s),n=0,o=this.rad,l=2*r*.7,h=2*r,c=1.2,d=1.2,Ot.drawImage(e,n+l*-c,o+h*-d,l,h),Ot.restore()),Ot.restore()}},Ar.prototype.readCustomData_onNewlyVisible=function(t){Ar.superClass.prototype.readCustomData_onNewlyVisible.call(this,t),this.isAttacking=t.readUInt8()},Ar.prototype.readCustomData_onUpdate=function(t){Ar.superClass.prototype.readCustomData_onUpdate.call(this,t),this.isAttacking=t.readUInt8()},window.Duck=Ar,u.setCustomClassForGameObjType(Ar,2,58),Ns=Es,Cr.prototype=Object.create(Ns.prototype),Cr.prototype.constructor=Cr,Cr.superClass=Ns,Cr.prototype.getSkinName=function(){return"land/oldDuck/duckling"},window.Duckling=Cr,u.setCustomClassForGameObjType(Cr,2,59),Ns=Es,Sr.prototype=Object.create(Ns.prototype),Sr.prototype.constructor=Sr,Sr.superClass=Ns,Sr.prototype.bodyType=0,Sr.prototype.wingType=0,Sr.prototype.tailType=0,Sr.prototype.updateZ=function(){this.z=(this.flag_flying?10003:1303)+this.rad},Sr.prototype.specType2=0,Sr.prototype.getSkinName=function(){return this.flag_flying&&!this.flag_isGrabbed?"blackdragon/flying_blackdragon":"blackdragon/blackdragon"},Sr.prototype.getSkinName=function(){return"volcano/blackdragon/bd"+this.specType2+"_body"},Sr.prototype.getWing=function(t,e){return"skins/volcano/blackdragon/wing"+e+"_"+t+".png"},Sr.prototype.getWingBody=function(t){return"skins/volcano/blackdragon/wing"+t+".png"},Sr.prototype.getFlyWingBody=function(t,e){return"skins/volcano/blackdragon/wing"+t+"_fly_"+e+".png"},Sr.prototype.getBodyType=function(t){return"skins/volcano/blackdragon/body_addition"+t+".png"},Sr.prototype.getTailType=function(t){return"skins/volcano/blackdragon/tailslap"+t+".png"},Sr.prototype.getInfo=function(t){this.lava=t.readUInt8(),this.bodyType=t.readUInt8(),this.wingType=t.readUInt8(),this.tailType=t.readUInt8()},Sr.prototype.readCustomData_onNewlyVisible=function(t){Sr.superClass.prototype.readCustomData_onNewlyVisible.call(this,t),this.getInfo(t)},Sr.prototype.readCustomData_onUpdate=function(t){Sr.superClass.prototype.readCustomData_onUpdate.call(this,t),this.getInfo(t)},Sr.prototype.drawSkinCustomization=function(){if(3==this.wingType&&this.flag_flying&&!this.flag_isGrabbed){var t=500/340;Ot.save();var e=(ft-this.spawnTime)/1e3,a=D(e,2.1,.4,1.5),i=D(e,2.1,.15,1.5),s=ve(this.getFlyWingBody(this.wingType,"r")),r=.6*this.rad;if(s){Ot.save();var n=-(-.3+a)*I(65)+I(10);Ot.rotate(n);var o=i+.2,l=0,h=this.rad,c=2.5*r*.8,d=2.5*r,p=-.6;imAnchorY=1.7-o,Ot.drawImage(s,l+c*-p,h+d*-imAnchorY,c,d),Ot.restore()}(s=ve(this.getFlyWingBody(this.wingType,"l")))&&(Ot.save(),n=-(-.3+a)*I(-65)-I(10),Ot.rotate(n),l=0,h=this.rad,c=2.5*r*.8,d=2.5*r+5,p=1.6,imAnchorY=1.7-o,Ot.drawImage(s,l+c*-p,h+d*-imAnchorY,c,d),Ot.restore()),Ot.restore()}else(s=ve(this.getWingBody(this.wingType)))&&(t=500/340,Ot.save(),r=this.rad-this.outlineW,Ot.drawImage(s,-r*t,-r*t,2*r*t,2*r*t),Ot.restore());0!=this.bodyType&&(t=296/188,(s=ve(this.getBodyType(this.bodyType)))&&(Ot.save(),r=.28*(this.rad-this.outlineW),Ot.drawImage(s,-r*t,-r/1.2,2*r*t,2*r),Ot.restore())),0!=this.tailType&&(t=500/340,(s=ve(this.getTailType(this.tailType)))&&(Ot.save(),r=this.rad-this.outlineW,Ot.drawImage(s,-r*t,-r*t,2*r*t,2*r*t),Ot.restore()))},window.BlackDragon=Sr,u.setCustomClassForGameObjType(Sr,2,m),Ns=Es,xr.prototype=Object.create(Ns.prototype),xr.prototype.constructor=xr,xr.superClass=Ns,xr.prototype.getSkinName=function(){return this.alwaysPlainOutline?"arctic/icemonster/icemonster_":"arctic/icemonster/icemonster"},xr.prototype.readCustomData_onNewlyVisible=function(t){xr.superClass.prototype.readCustomData_onNewlyVisible.call(this,t),this.readInfo(t)},xr.prototype.readCustomData_onUpdate=function(t){xr.superClass.prototype.readCustomData_onUpdate.call(this,t),this.readInfo(t)},xr.prototype.readInfo=function(t){var e=t.readUInt8();for(this.crystals=[],Vi=0;Vi<e;Vi++){var a=t.readInt16()/100,i=t.readInt16()/100,s=t.readUInt16()/100,r=t.readUInt16()/100;this.crystals.push({x:a,y:i,nRad:s,oRad:s,rad:s,angle:r})}},xr.prototype.drawOnTopOfSkinImg=function(){var t=this.rad-this.outlineW;for(Vi=0;Vi<this.crystals.length;Vi++){var e=this.crystals[Vi];if(0!=e.nRad){e.rad+=.01*(e.nRad-e.rad);var a=e.x*t,i=e.y*t,s=e.angle,r=e.rad;Ot.save(),Ot.translate(a,i),Ot.globalAlpha=1,Ot.rotate(I(s));var n=ve("skins/arctic/icemonster/crystal.png");n&&Ot.drawImage(n,-r,2*-r,2*r,2*r),Ot.restore()}}},window.IceMonster=xr,u.setCustomClassForGameObjType(xr,2,72),Ns=Es,Ls.prototype=Object.create(Ns.prototype),Ls.prototype.constructor=Ls,Ls.superClass=Ns,Ls.prototype.getSkinName=function(){return"/honeybee/honeybee"+(0==this.specType||null==this.specType?"":this.specType)},Ls.prototype.drawSkinCustomization=function(){Ot.save();var t,e=(ft-this.spawnTime)/1e3,a=He?0:D(e,.2,.3,2),i=He?0:D(e,.2,.3,2),s=.6*this.rad;if(t=ve("skins/honeybee/honeybee_wing2.png")){Ot.save();var r=-(-2+i)*I(-25);Ot.globalAlpha=.6,Ot.rotate(I(-10)+r);var n=0,o=this.rad,l=2*s*.7,h=2.3*s,c=.5,d=1.6;Ot.drawImage(t,n+l*-c,o+h*-d,l,h),Ot.restore()}(t=ve("skins/honeybee/honeybee_wing1.png"))&&(Ot.save(),r=-(-2+i)*I(25),Ot.globalAlpha=.6,Ot.rotate(I(10)+r),n=0,o=this.rad,l=2.3*s*.7,h=2.3*s,c=.5,d=1.6,Ot.drawImage(t,n+l*-c,o+h*-d,l,h),Ot.restore()),(t=ve("skins/honeybee/honeybee_wing1.png"))&&(Ot.save(),r=-(-2+a)*I(30),Ot.globalAlpha=.5,Ot.rotate(I(20)+r),n=0,o=this.rad,l=2*s*.7,h=2.3*s,c=.5,d=1.7,Ot.drawImage(t,n+l*-c,o+h*-d,l,h),Ot.restore()),(t=ve("skins/honeybee/honeybee_wing2.png"))&&(Ot.save(),r=-(-2+a)*I(-30),Ot.globalAlpha=.5,Ot.rotate(I(-20)+r),n=0,o=this.rad,l=2*s*.7,h=2.3*s,c=.5,d=1.7,Ot.drawImage(t,n+l*-c,o+h*-d,l,h),Ot.restore()),Ot.restore()},window.Honeybee=Ls,u.setCustomClassForGameObjType(Ls,2,67),Ns=Es,Xs.prototype=Object.create(Ns.prototype),Xs.prototype.constructor=Xs,Xs.superClass=Ns,Xs.prototype.ParticleAngles=0,Xs.prototype.animalInfo=function(){var t={};let e="!\nDash Fly through your opponents and burn them alive!";switch(this.animalSpecies){case 0:t.aniName="Phoenix";break;case 1:t.aniName="Orion Phoenix";break;case 2:t.aniName="Astral Phoenix",e="!\nYou have upgraded to an flamboyant and amazing animal!\nDominate the world and unleash your will!"}return t.upgradeText="UPGRADED to "+t.aniName+e,2==this.animalSpecies&&(t.upgradeText=""),t.aniCol="#FF9000",t.skinName="volcano/phoenix/"+this.animalSpecies+"/phoenix",t},Xs.prototype.drawLowWater=function(){Ot.fillStyle=Z,Ot.beginPath(),Ot.arc(0,this.rad+5,5,0,2*Math.PI),Ot.fill()},Xs.prototype.getSkinName=function(){return"volcano/phoenix/"+this.animalSpecies+"/phoenix"+(this.flag_flying&&!this.flag_isGrabbed?1:"")},Xs.prototype.needsExteriorExplo=!1,Xs.prototype.needsSpawnAnimation=!1,Xs.prototype.drawUnderSkinImg=function(){if(He||2!=this.animalSpecies)return;var t=(ft-this.spawnTime)/1e3;if(this.needsSpawnAnimation&&this.hasSpawnedYet<+new Date&&(this.needsSpawnAnimation=!1),this.needsSpawnAnimation&&this.hasSpawnedYet>=+new Date){Ot.save(),Ot.globalAlpha=(this.hasSpawnedYet-+new Date)/500,Ot.rotate(-this.angle);let t=1-(this.hasSpawnedYet-5e3-+new Date)/3e4;if(t*=5,t+=.2,!this.needsExteriorExplo&&this.hasSpawnedYet-1500<+new Date){this.needsExteriorExplo=!0;let t=[["#6B00C1","#6000AD"],["#8F00FF","#7200CB"],["#C100FF","#9900CA"],["#EC00FF","#C000D0"],["#9C2ADA","#8222B6"],["#DA2AD2","#B824B1"]];for(var e=0;e<10;e++){let e=t[Math.floor(Math.random()*t.length)];this.currentParticles.push({dist:0,angle:0,rad:1,loss:1,color:e[0],strokeColor:e[1],alpha:0})}}for(var a of this.currentParticles){Ot.save(),Ot.beginPath(),Ot.rotate(a.angle),Ot.globalAlpha*=a.alpha,a.alpha=Math.min(1,1.1*a.alpha*Math.max(1,t)),Ot.fillStyle=a.color,Ot.strokeStyle=a.strokeColor,Ot.shadowColor=5,Ot.lineWidth=2;let e=-this.rad*a.dist*a.rad;a.exterior&&(e+=this.rad*a.dist*a.oRad+this.rad),_(0,e,this.rad*a.rad,Ot.fillStyle),Ot.stroke(),a.rad-=a.loss*t,a.rad<.01&&(a.exterior=this.needsExteriorExplo,a.dist=15*Math.random()+25,a.angle=Math.random()*Math.PI*2,a.rad=.05*Math.random()+.05,a.loss=6e-4*Math.random()+3e-4,a.alpha=.03,a.exterior&&(a.loss*=.3,a.dist*=2,a.rad*=2.5),a.oRad=a.rad),Ot.closePath(),Ot.restore()}Ot.restore()}Ot.save(),this.ParticleAngles+=.5,this.ParticleAngles=this.ParticleAngles%360;let i=I(this.ParticleAngles),s=I(360)/5;for(var r=0;r<5;r++){Ot.save(),Ot.rotate(s*r+i);var n=D(t,1,2,.5);Ot.beginPath(),Ot.fillStyle="purple",Ot.shadowColor=5,_(0,this.rad*n,.1*this.rad,"purple"),Ot.closePath(),Ot.restore()}Ot.restore()},Xs.prototype.drawSkinCustomization=function(){var t="skins/volcano/phoenix/"+this.animalSpecies+"/",e=500/340;if(this.flag_flying&&!this.flag_isGrabbed){Ot.save();var a,i=(ft-this.spawnTime)/1e3,s=He?0:D(i,.5,.4,1.5);if(a=ve(t+"phoenix_wing1.png")){Ot.save();var r=-(-.2+s)*I(45),n=.8*this.rad;Ot.rotate(I(15)+r);var o=0,l=1.4*this.rad,h=1.5*n,c=2.3*n,d=-.05,p=1.6;Ot.drawImage(a,o+h*-d,l+c*-p,h,c),Ot.restore()}(a=ve(t+"phoenix_wing2.png"))&&(Ot.save(),r=-(-.2+s)*I(-45),n=.8*this.rad,Ot.rotate(I(-15)+r),o=0,l=1.4*this.rad,h=1.5*n,c=2.3*n,d=1.05,p=1.6,Ot.drawImage(a,o+h*-d,l+c*-p,h,c),Ot.restore()),Ot.restore();var g=ve(t+"head.png");if(g){Ot.save();var u=.1*(n=1*this.rad);Ot.drawImage(g,-n*e,(-n+u)*e,2*n*e,2*n*e),Ot.restore()}}},Xs.prototype.readCustomData_onNewlyVisible=function(t){if(Xs.superClass.prototype.readCustomData_onNewlyVisible.call(this,t),2==this.animalSpecies){this.timeLeft=t.readUInt16(),console.log(this.timeLeft),this.needsSpawnAnimation=this.timeLeft>0;let a=[["#6B00C1","#6000AD"],["#8F00FF","#7200CB"],["#C100FF","#9900CA"],["#EC00FF","#C000D0"],["#9C2ADA","#8222B6"],["#DA2AD2","#B824B1"]];this.hasSpawnedYet=+new Date+this.timeLeft,this.currentParticles=[];for(var e=0;e<20;e++){let t=a[Math.floor(Math.random()*a.length)];this.currentParticles.push({dist:0,angle:0,rad:1,loss:1,color:t[0],strokeColor:t[1],alpha:0})}}},window.Phoenix=Xs,u.setCustomClassForGameObjType(Xs,2,68),Ns=Es,Ys.prototype=Object.create(Ns.prototype),Ys.prototype.constructor=Ys,Ys.superClass=Ns,Ys.prototype.drawSkin=function(){var t=500/340,e=this.rad-this.outlineW;this.skinRad=e,this.skinScale=t,overSizeOffset=e/2,Ot.drawImage(this.loadedSkinImg,-e*t,-e*t*1.4,2*e*t,2*e*(1.2*t))},Ys.prototype.getSkinName=function(){return"ocean/megalodon/megalodon"},Ys.prototype.drawWhenUnderwater=function(){var t=(ft-this.spawnTime)/1e3,e=1*Math.sin(2*Math.PI/1.5*t);Ot.save(),Ot.globalAlpha=.2,Ot.fillStyle="#243E7A";var a=this.flag_underWater?.15*this.rad:.1*this.rad;Ot.beginPath(),Ot.arc(-.35*this.rad,-.33*this.rad,Math.max(0,a+e),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.35*this.rad,-.32*this.rad,Math.max(0,a-e),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.35*this.rad,.36*this.rad,Math.max(0,a+e),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(-.35*this.rad,.35*this.rad,Math.max(0,a-e),0,2*Math.PI),Ot.fill(),Ot.restore();var i=ve("skins/ocean/megalodon/dive.png");if(i){var s=500/340;Ot.save(),Ot.globalAlpha=.4;var r=this.rad;Ot.drawImage(i,-r*s,-r*s,2*r*s,2*r*s),Ot.restore()}},Ys.prototype.drawLowWater=function(){Ot.fillStyle=tt,Ot.beginPath(),Ot.arc(0,this.rad+5,5,0,2*Math.PI),Ot.fill()},window.Megalodon=Ys,u.setCustomClassForGameObjType(Ys,2,76),Ns=Es,Vs.prototype=Object.create(Ns.prototype),Vs.prototype.constructor=Vs,Vs.superClass=Ns,Vs.prototype.getSkinName=function(){return"ocean/seamonster/"+this.animalSpecies+"/seamonster"},Vs.prototype.drawWhenUnderwater=function(){var t=(ft-this.spawnTime)/1e3,e=1*Math.sin(2*Math.PI/1.5*t);Ot.save(),Ot.globalAlpha=.2,Ot.fillStyle="white";var a=this.flag_underWater?.15*this.rad:.1*this.rad;Ot.beginPath(),Ot.arc(-.35*this.rad,-.33*this.rad,Math.max(0,a+e),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.35*this.rad,-.32*this.rad,Math.max(0,a-e),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(.35*this.rad,.36*this.rad,Math.max(0,a+e),0,2*Math.PI),Ot.fill(),Ot.beginPath(),Ot.arc(-.35*this.rad,.35*this.rad,Math.max(0,a-e),0,2*Math.PI),Ot.fill(),Ot.restore();var i=ve("skins/"+this.getSkinName()+"_dive.png");if(i){var s=500/340;Ot.save(),Ot.globalAlpha=.4;var r=this.rad;Ot.drawImage(i,-r*s,-r*s,2*r*s,2*r*s),Ot.restore()}},Vs.prototype.drawLowWater=function(){Ot.fillStyle="#C8D9FF",Ot.beginPath(),Ot.arc(0,this.rad+5,5,0,2*Math.PI),Ot.fill()},window.SeaMonster=Vs,u.setCustomClassForGameObjType(Vs,2,70),Ns=Es,qs.prototype=Object.create(Ns.prototype),qs.prototype.constructor=qs,qs.superClass=Ns,qs.prototype.getSkinName=function(){return"ocean/whale/"+this.animalSpecies+"/whale"},qs.prototype.drawSkin=function(){var t=500/(1==this.animalSpecies?360:340),e=this.rad-this.outlineW;this.skinRad=e,this.skinScale=t,overSizeOffset=e/2,Ot.drawImage(this.loadedSkinImg,-e*t,-e*t-(1==this.animalSpecies?this.rad/7:0),2*e*t,2*e*t)},qs.prototype.drawWhenUnderwater=function(){qs.superClass.prototype.drawWhenUnderwater.call(this),1===this.animalSpecies?(Ot.save(),_(0,.45*this.rad,.08*this.rad,"gray"),Ot.restore()):(Ot.save(),_(0,.45*this.rad,.08*this.rad,"#202A65"),Ot.restore())},qs.prototype.animalInfo=function(){var t={};switch(this.animalSpecies){case 0:t.aniName="Blue Whale",t.upgradeText="UPGRADED to "+t.aniName+"!\n Smash with your powerful tail!";break;case 1:t.aniName="Lava Whale",t.upgradeText="UPGRADED to "+t.aniName+"!\n Smash with your powerful tail!"}return t.aniCol="#945A99",t.skinName="ocean/whale/"+this.animalSpecies+"/whale",t},window.BlueWhale=qs,u.setCustomClassForGameObjType(qs,2,49),Ns=Es,Ks.prototype=Object.create(Ns.prototype),Ks.prototype.constructor=Ks,Ks.superClass=Ns,Ks.prototype.getSkinName=function(){return"land/giantSpider/"+this.animalSpecies},Ks.prototype.animalInfo=function(){var t={};switch(this.animalSpecies){case 0:t.aniName="Giant Spider";break;case 1:t.aniName="Tarantula"}return t.aniDesc="",t.upgradeText="UPGRADED to "+t.aniName+"!\n Place web around the game to catch prey!",t.aniCol="black",t.skinName="land/giantSpider/"+this.animalSpecies,t},window.GiantSpider=Ks,u.setCustomClassForGameObjType(Ks,2,52),Ns=Es,Js.prototype=Object.create(Ns.prototype),Js.prototype.constructor=Js,Js.superClass=Ns,Js.prototype.getSkinName=function(){return"land/bear/"+this.animalSpecies},Js.prototype.animalInfo=function(){var t={};switch(this.animalSpecies){case 0:t.aniName="Bear";break;case 1:t.aniName="Black Bear";break;case 2:t.aniName="Grolar Bear";break;case 3:t.aniName="Sun Bear";break;case 4:t.aniName="Coke Bear"}return t.aniDesc="",t.upgradeText="UPGRADED to "+t.aniName+"!\n"+t.aniName+" climb through green hills! (Press W to use your claw!)",t.aniCol="#9d4717",t.skinName="land/bear/"+this.animalSpecies,t},window.Bear=Js,u.setCustomClassForGameObjType(Js,2,10),Ns=Es,Zs.prototype=Object.create(Ns.prototype),Zs.prototype.constructor=Zs,Zs.superClass=Ns,Zs.prototype.getSkinName=function(){return"land/trex/"+this.animalSpecies+"/trex"},Zs.prototype.animalInfo=function(){var t={};let e="";switch(this.animalSpecies){case 0:t.aniName="T-REX";break;case 1:t.aniName="Alpha T-REX",e+="\n(Can grab animals underwater and does more damage!)"}return t.aniDesc="",t.upgradeText="UPGRADED to "+t.aniName+" The Dinosaur!\n This ancient dinosaur has powerful jaws that can drag prey around!!"+e,t.aniCol="#862A2A",t.skinName="trex/"+this.animalSpecies+"/trex",t},window.TREX=Zs,u.setCustomClassForGameObjType(Zs,2,53),Ns=Es,Qs.prototype=Object.create(Ns.prototype),Qs.prototype.constructor=Qs,Qs.superClass=Ns,Qs.prototype.getSkinName=function(){return"arctic/mammoth/"+this.animalSpecies},Qs.prototype.animalInfo=function(){var t={};switch(this.animalSpecies){case 0:t.aniName="Mammoth";break;case 1:t.aniName="Black Mammoth";break;case 2:t.aniName="Great Mammoth"}return t.aniDesc="",t.upgradeText="UPGRADED to "+t.aniName+"!\n Press W to roll snowballs with your trunk!\n The bigger the snowball gets, the longer the freeze!",t.aniCol="#9d4717",t.skinName="arctic/mammoth/"+this.animalSpecies,t},window.Mammoth=Qs,u.setCustomClassForGameObjType(Qs,2,43),Ns=Es,$s.prototype=Object.create(Ns.prototype),$s.prototype.constructor=$s,$s.superClass=Ns,$s.prototype.getSkinName=function(){return"volcano/lavamonster/"+(this.flag_flying&&!this.flag_isGrabbed&&this.flag_usingAbility?"flying_lavamonster":"lavamonster")},$s.prototype.drawSkinCustomization=function(){if(this.flag_flying&&!this.flag_isGrabbed&&this.flag_usingAbility){Ot.save();var t,e=(ft-this.spawnTime)/1e3,a=D(e,2.1,.4,1.5),i=(D(e,2.1,-8,1.5),D(e,2.1,.4,1.5)),s=D(e,2.1,.3,1.5),r=.6*this.rad;if(t=ve("skins/volcano/lavamonster/wing_r1.png")){Ot.save();var n=-(-.3+a)*I(80);this.rad,Ot.rotate(n);var o=this.rad,l=1.6*r;imH=2*r+5;var h=1.6*r;Ot.drawImage(t,0+.65*h,o+imH*-(1.75-(i+i/4-s)),l,imH),Ot.restore()}(t=ve("skins/volcano/lavamonster/wing_l1.png"))&&(Ot.save(),n=-(-.3+a)*I(-80),this.rad,Ot.rotate(n),o=this.rad,l=1.6*r,imH=2*r+5,h=1.6*r,Ot.drawImage(t,0+-1.65*h,o+imH*-(1.75-(i+i/4)+s),l,imH),Ot.restore()),Ot.restore()}},$s.prototype.drawLowWater=function(){Ot.fillStyle=Z,Ot.beginPath(),Ot.arc(0,this.rad+5,5,0,2*Math.PI),Ot.fill()},window.LavaMonster=$s,u.setCustomClassForGameObjType($s,2,71),Ns=Es,tr.prototype=Object.create(Ns.prototype),tr.prototype.constructor=tr,tr.superClass=Ns,tr.prototype.getSkinName=function(){return"jungle/giant_flying_fox/giant_flying_fox"+(this.flag_usingAbility?1:"")},tr.prototype.drawSkinCustomization=function(){if(!this.flag_usingAbility)return;Ot.save();var t=this.rad-this.outlineW;let e="skins/jungle/giant_flying_fox/";var a=(ft-this.spawnTime)/1e3;let i=-(He?this.birdNoAnimationFlyWingAngle:D(a,.5,.2,1));var s;if(s=ve(e+"wing2.png?a=1")){Ot.save();let e=2.2*-t*1.518,a=.8*-t,r=2*t*1.518,n=2*t;Ot.rotate(-i),Ot.drawImage(s,e,a,r,n),Ot.restore()}if(s=ve(e+"wing1.png?a=1")){Ot.save();let e=-.1825*-t*1.518,a=.8*-t,r=2*t*1.518,n=2*t;Ot.rotate(i),Ot.drawImage(s,e,a,r,n),Ot.restore()}if(s=ve(e+"body.png?a=1")){Ot.save();let e=1.5*t,a=-e,i=-e,r=2*e,n=2*e;Ot.drawImage(s,a,i,r,n),Ot.restore()}if(s=ve(e+"head.png?a=1")){Ot.save();let e=1.5*t,a=-e,i=-e,r=2*e,n=2*e;Ot.drawImage(s,a,i,r,n),Ot.restore()}Ot.restore()},window.Giant_Flying_Fox=tr,u.setCustomClassForGameObjType(tr,2,88),Ns=Es,Mr.prototype=Object.create(Ns.prototype),Mr.prototype.constructor=Mr,Mr.superClass=Ns,Mr.prototype.getSkinName=function(){var t="";return this.flag_usingAbility&&!this.flag_underWater&&(t="2"),"jungle/bullfrog/bullfrog"+t},Mr.prototype.drawWhenUnderwater=function(){var t=(ft-this.spawnTime)/1e3;Ot.save(),Ot.globalAlpha=.2;var e=1*Math.sin(2*Math.PI/1.5*t);_(0,0,Math.max(0,this.rad+2*e),"#416A4B"),Ot.restore()},window.goliathBullFrog=Mr,u.setCustomClassForGameObjType(Mr,2,93),Ns=Es,er.prototype=Object.create(Ns.prototype),er.prototype.constructor=er,er.superClass=Ns,er.prototype.drawSkin=function(){var t=450/340,e=this.rad-this.outlineW;this.skinRad=e,this.skinScale=t,overSizeOffset=e/2,Ot.drawImage(this.loadedSkinImg,-e*t,-e*t*1.4,2*e*t,2*e*(1.2*t))},window.JungleMonster=er,u.setCustomClassForGameObjType(er,2,92),Ns=Es,ar.prototype=Object.create(Ns.prototype),ar.prototype.constructor=ar,ar.superClass=Ns,ar.prototype.getSkinName=function(){return"jungle/kingfisher/kingfisher"+(this.flag_usingAbility?"1":"")},ar.prototype.drawSkin=function(){var t=500/340,e=this.rad-this.outlineW;this.skinRad=e,this.skinScale=t,overSizeOffset=e/2,Ot.drawImage(this.loadedSkinImg,-e*t,-e*t,2*e*t,2*e*(1.2*t))},ar.prototype.drawSkinCustomization=function(){if(this.flag_usingAbility){var t="skins/jungle/kingfisher";if(2==this.specType){var e=500/340;if(this.flag_flying&&!this.flag_isGrabbed){Ot.save();var a=(ft-this.spawnTime)/1e3,i=He?this.birdNoAnimationFlyWingAngle:D(a,.35,.3,2);if(g=ve(t+"/wing2.png?a=1")){Ot.save();var s=-(-.2+i)*I(60),r=.8*this.rad;Ot.rotate(I(30)+s);var n=0,o=this.rad,l=2*r*.62,h=2.5*r,c=.2,d=1.7;Ot.translate(.1*this.rad,.25*this.rad),Ot.drawImage(g,n+l*-c,o+h*-d,l,h),Ot.restore()}(g=ve(t+"/wing1.png?a=1"))&&(Ot.save(),s=-(-.2+i)*I(-60),r=.8*this.rad,Ot.rotate(I(-30)+s),n=0,o=this.rad,l=2*r*.62,h=2.5*r,c=.8,d=1.7,Ot.translate(.1*-this.rad,.25*this.rad),Ot.drawImage(g,n+l*-c,o+h*-d,l,h),Ot.restore()),Ot.restore()}(p=ve(t+"/head.png"))&&(Ot.save(),r=this.rad,Ot.drawImage(p,-r*e,(.1*r-r+.2*this.rad*i)*e,2*r*e,2*r*e*1.2),Ot.restore())}else{var p,g;if(e=500/340,this.flag_flying&&!this.flag_isGrabbed)Ot.save(),a=(ft-this.spawnTime)/1e3,i=He?this.birdNoAnimationFlyWingAngle:D(a,.5,.3,2),(g=ve(t+"/wing2.png?a=1"))&&(Ot.save(),s=-(-.2+i)*I(90),r=.8*this.rad,Ot.rotate(I(45)+s),n=0,o=this.rad,l=2*r*.62,h=2.5*r,c=.2,d=1.7,Ot.drawImage(g,n+l*-c,o+h*-d,l,h),Ot.restore()),(g=ve(t+"/wing1.png?a=1"))&&(Ot.save(),s=-(-.2+i)*I(-90),r=.8*this.rad,Ot.rotate(I(-45)+s),n=0,o=this.rad,l=2*r*.62,h=2.5*r,c=.8,d=1.7,Ot.drawImage(g,n+l*-c,o+h*-d,l,h),Ot.restore()),Ot.restore();(p=ve(t+"/head.png"))&&(Ot.save(),r=this.rad,Ot.drawImage(p,-r*e,(.1*r-r)*e,2*r*e,2*r*e*1.2),Ot.restore())}}},window.Kingfisher=ar,u.setCustomClassForGameObjType(ar,2,83),Ns=Es,ir.prototype=Object.create(Ns.prototype),ir.prototype.constructor=ir,ir.superClass=Ns,ir.prototype.animalInfo=function(){var t={},e="";switch(this.animalSpecies){case 0:t.aniName="Green Parrot",e="(Green Parrot recharges their abilities faster!)";break;case 1:t.aniName="Yellow Parrot",e="(Yellow Parrots have longer flights!)";break;case 2:t.aniName="Cyan Parrot",e="(Cyan Parrots Have an stronger screech!)"}return t.upgradeText="UPGRADED to "+t.aniName+"!\nRelease W to release a screech or climb a tree and fly from them.\n"+e,t.aniCol="#19CE00",t.skinName="jungle/parrot/"+this.animalSpecies+"/parrot",t},ir.prototype.getSkinName=function(){return"jungle/parrot/"+this.animalSpecies+"/parrot"+(this.flag_usingAbility?"1":"")},ir.prototype.drawSkin=function(){var t=500/340,e=this.rad-this.outlineW;this.skinRad=e,this.skinScale=t,overSizeOffset=e/2,Ot.drawImage(this.loadedSkinImg,-e*t,-e*t,2*e*t,2*e*t)},ir.prototype.drawSkinCustomization=function(){if(this.flag_usingAbility){var t="skins/jungle/parrot/"+this.animalSpecies;if(this.flag_flying)e=500/340,Ot.save(),s=(ft-this.spawnTime)/1e3,r=He?this.birdNoAnimationFlyWingAngle:D(s,.5,.3,2),(a=ve(t+"/wing2.png?a=1"))&&(Ot.save(),n=-(-.2+r)*I(90),o=.8*this.rad,Ot.rotate(I(45)+n),l=0,h=this.rad,c=2*o*.62,d=2.5*o,p=.2,g=1.7,Ot.drawImage(a,l+c*-p,h+d*-g,c,d),Ot.restore()),(a=ve(t+"/wing1.png?a=1"))&&(Ot.save(),n=-(-.2+r)*I(-90),o=.8*this.rad,Ot.rotate(I(-45)+n),l=0,h=this.rad,c=2*o*.62,d=2.5*o,p=.8,g=1.7,Ot.drawImage(a,l+c*-p,h+d*-g,c,d),Ot.restore()),Ot.restore(),(i=ve(t+"/head.png"))&&(Ot.save(),o=this.rad,Ot.drawImage(i,-o*e,(.1*o-o)*e,2*o*e,2*o*e),Ot.restore());else{var e=500/340;Ot.save();var a,i,s=(ft-this.spawnTime)/1e3,r=He?this.birdNoAnimationFlyWingAngle:D(s,.35,.3,2);if(a=ve(t+"/wing2.png?a=1")){Ot.save();var n=-(-.2+r)*I(60),o=.8*this.rad;Ot.rotate(I(30)+n);var l=0,h=this.rad,c=2*o*.62,d=2.5*o,p=.2,g=1.7;Ot.translate(.1*this.rad,.25*this.rad),Ot.drawImage(a,l+c*-p,h+d*-g,c,d),Ot.restore()}if(a=ve(t+"/wing1.png?a=1")){Ot.save();n=-(-.2+r)*I(-60),o=.8*this.rad;Ot.rotate(I(-30)+n);l=0,h=this.rad,c=2*o*.62,d=2.5*o,p=.8,g=1.7;Ot.translate(.1*-this.rad,.25*this.rad),Ot.drawImage(a,l+c*-p,h+d*-g,c,d),Ot.restore()}if(Ot.restore(),i=ve(t+"/head.png")){Ot.save();o=this.rad;Ot.drawImage(i,-o*e,(.1*o-o+.2*this.rad*r)*e,2*o*e,2*o*e),Ot.restore()}}}},window.Parrot=ir,u.setCustomClassForGameObjType(ir,2,84),Ns=Es,sr.prototype=Object.create(Ns.prototype),sr.prototype.constructor=sr,sr.superClass=Ns,sr.prototype.drawSkin=function(){var t=520/340,e=this.rad-this.outlineW;this.skinRad=e,this.skinScale=t,overSizeOffset=e/2,Ot.drawImage(this.loadedSkinImg,-e*t,-e*t*1.41,2*e*t,2*e*(1.296*t))},window.Iguana=sr,u.setCustomClassForGameObjType(sr,2,86),Ns=Es,rr.prototype=Object.create(Ns.prototype),rr.prototype.constructor=rr,rr.superClass=Ns,rr.prototype.getSkinName=function(){return"jungle/quetzalcoatlus/quetzalcoatlus"+(this.flag_usingAbility?"1":"")},rr.prototype.drawSkin=function(){var t=500/340,e=this.rad-this.outlineW;this.skinRad=e,this.skinScale=t,overSizeOffset=e/2,Ot.drawImage(this.loadedSkinImg,-e*t,-e*t*1.02,2*e*t,2*e*(1.2*t))},rr.prototype.drawWing=function(t,e,a,i,s,r){var n=ve(t);n&&(Ot.save(),Ot.rotate(r),Ot.drawImage(n,e-i/2,a-s/2,i,s),Ot.restore())},rr.prototype.drawWing=function(t,e,a,i,s,r){var n=ve(t);n&&(Ot.save(),Ot.rotate(r),Ot.drawImage(n,e-i/2,a-s/2,i,s),Ot.restore())},rr.prototype.drawSkinCustomization=function(){if(!this.flag_usingAbility)return;Ot.save();var t=this.rad-this.outlineW;let e=this.flag_flying?.075:.15;var a=(ft-this.spawnTime)/1e3;let i="skins/jungle/quetzalcoatlus/";var s,r=t,n=(He?this.birdNoAnimationFlyWingAngle:D(a,1,e,2))+e,o=2*r*2.496,l=2*r,h=1.5*-r,c=-.0575*-r;if(this.drawWing(i+"wing2.png?a=1",h,c,o,l,-n),o=2*r*2.496,l=2*r,h=1.5*r,c=-.0575*-r,this.drawWing(i+"wing1.png?a=1",h,c,o,l,n),s=ve(i+"body.png?a=1")){Ot.save();let e=1.5*t,a=-e,i=-e,r=2*e,n=2.4*e;Ot.drawImage(s,a,i,r,n),Ot.restore()}if(s=ve(i+"head"+(this.flag_flying?"":"1")+".png?a=1")){Ot.save();let e=1.5*t,a=-e,i=this.flag_flying?.25*e:.05*-e,r=2*e,n=2.496*e;Ot.drawImage(s,a,i,r,n),Ot.restore()}Ot.restore()},window.Quetzalcoatlus=rr,u.setCustomClassForGameObjType(rr,2,91),Ns=Es,nr.prototype=Object.create(Ns.prototype),nr.prototype.constructor=nr,nr.superClass=Ns,nr.prototype.getSkinName=function(){return"beaver/beaver"},window.Beaver=nr,u.setCustomClassForGameObjType(nr,2,77),Ns=Ms,or.prototype=Object.create(Ns.prototype),or.prototype.constructor=or,or.superClass=Ns,or.prototype.updateZ=function(){this.z=-101},or.prototype.customDraw=function(t){if(Ot.save(),3==this.curBiome)this.drawOutlinedCircle("","#6A521A"),_(0+this.rPer,1,Math.max(0,.9*this.rad),"#564419"),_(0-this.rPer,1,Math.max(0,.75*this.rad),"#493A17"),_(0-this.rPer,1,Math.max(0,.4*this.rad),"#2C2310");else if(1!=this.curBiome)this.drawOutlinedCircle("","#9F8641"),Ot.globalAlpha=.6,_(0+this.rPer,1,Math.max(0,.9*this.rad),"#5C4E28"),Ot.globalAlpha=.7,_(0-this.rPer,1,Math.max(0,.8*this.rad),"#40371D"),Ot.globalAlpha=.9,_(0-this.rPer,1,Math.max(0,.8*this.rad),"#40371D"),Ot.globalAlpha=.5,_(0-3*this.rPer,1,Math.max(0,.5*this.rad),"black");else{var e=(ft-this.spawnTime)/1e3,a=2.5*Math.cos(2*Math.PI/1.2*e),i=2.5*Math.sin(2*Math.PI/1.2*e);this.drawOutlinedCircle("","#2CAAC4"),_(0+a/4.5+this.rPer,1+i/1.5,Math.max(0,this.rad-14),"#29A0BA"),_(0+a/1.5-2*this.rPer,i,Math.max(0,this.rad-18.5+i/5),"#2B8CAA"),_(0+a/1.5-2*this.rPer,i,Math.max(0,this.rad-24.5+i/11),"#28829E")}Ot.restore()},window.SinkHole=or,u.setCustomClassForGameObjType(or,72),Ns=Es,lr.prototype=Object.create(Ns.prototype),lr.prototype.constructor=lr,lr.superClass=Ns,lr.prototype.animalInfo=function(){var t={};switch(this.animalSpecies){case 0:t.aniName="Pigeon";break;case 1:t.aniName="Rare White Dove",t.upgradeText+="\n(Doves fly faster!)"}return t.aniCol="#FF9000",t.skinName="land/pigeon/"+this.animalSpecies+"/pigeon",t.upgradeText="UPGRADED to "+t.aniName+"!\nHold W to fly around. ",t},lr.prototype.getSkinName=function(){return"land/pigeon/"+this.animalSpecies+"/pigeon"+(0==this.specType?"":this.specType)},lr.prototype.drawSkinCustomization=function(){if(this.flag_usingAbility){var t="skins/land",e=500/340;if(this.flag_flying&&!this.flag_isGrabbed){Ot.save();var a,i=(ft-this.spawnTime)/1e3,s=He?this.birdNoAnimationFlyWingAngle:D(i,.5,.3,2);if(a=ve(t+"/pigeon/"+this.animalSpecies+"/pigeon_wing1.png?a=1")){Ot.save();var r=-(-.2+s)*I(90),n=.8*this.rad;Ot.rotate(I(45)+r);var o=0,l=this.rad,h=2*n*.62,c=2.5*n,d=.2,p=1.7;Ot.drawImage(a,o+h*-d,l+c*-p,h,c),Ot.restore()}(a=ve(t+"/pigeon/"+this.animalSpecies+"/pigeon_wing2.png?a=1"))&&(Ot.save(),r=-(-.2+s)*I(-90),n=.8*this.rad,Ot.rotate(I(-45)+r),o=0,l=this.rad,h=2*n*.62,c=2.5*n,d=.8,p=1.7,Ot.drawImage(a,o+h*-d,l+c*-p,h,c),Ot.restore()),Ot.restore()}if(0!=this.specType&&null!=this.specType){var g=ve(t+"/pigeon/"+this.animalSpecies+"/pigeon_head.png");g&&(Ot.save(),n=this.rad,Ot.drawImage(g,-n*e,(.1*n-n)*e,2*n*e,2*n*e),Ot.restore())}}},window.Pigeon=lr,u.setCustomClassForGameObjType(lr,2,74),Ns=Es,hr.prototype=Object.create(Ns.prototype),hr.prototype.constructor=hr,hr.superClass=Ns,hr.prototype.animalInfo=function(){var t={};switch(this.animalSpecies){case 0:t.aniName="Toco Toucan";break;case 1:t.aniName="Choco Toucan";break;case 2:t.aniName="Keel-Billed Toucan";break;case 3:t.aniName="Fiery-Billed Toucan";break;case 4:t.aniName="Lava Toucan";break;case 5:t.aniName="Pakistan Toucan";break;case 6:t.aniName="Ice Toucan"}return t.upgradeText="UPGRADED to "+t.aniName+"!\nHold right click (or W) to fly!\n(HINT: Start flying from a fruit tree or bush to throw fruit upon landing!)",t.aniCol="#FF9000",t.skinName="land/toucan/"+this.animalSpecies+"/toucan",t},hr.prototype.getSkinName=function(){return"land/toucan/"+this.animalSpecies+"/toucan"+(0==this.specType?"":this.specType)},hr.prototype.drawSkinCustomization=function(){if(this.flag_usingAbility){var t=500/340;if(this.flag_flying&&!this.flag_isGrabbed){Ot.save();var e,a=5==this.animalSpecies?"skins/land/toucan/5/":"skins/land/toucan/",i=(ft-this.spawnTime)/1e3,s=He?this.birdNoAnimationFlyWingAngle:D(i,.5,.3,2);if(e=ve(a+"toucan_wing1.png?a=1")){Ot.save();var r=-(-.2+s)*I(90),n=.8*this.rad;Ot.rotate(I(45)+r);var o=0,l=this.rad,h=2*n*.62,c=2.5*n,d=.2,p=1.7;Ot.drawImage(e,o+h*-d,l+c*-p,h,c),Ot.restore()}(e=ve(a+"toucan_wing2.png?a=1"))&&(Ot.save(),r=-(-.2+s)*I(-90),n=.8*this.rad,Ot.rotate(I(-45)+r),o=0,l=this.rad,h=2*n*.62,c=2.5*n,d=.8,p=1.7,Ot.drawImage(e,o+h*-d,l+c*-p,h,c),Ot.restore()),Ot.restore()}if(0!=this.specType&&null!=this.specType){var g="skins/land/toucan/"+this.animalSpecies+"/";this.hasZombieOverlay&&(g="skins/zombie/toucan/"+this.animalSpecies+"/");var u=ve(g+"toucan_head.png?a=1");u&&(Ot.save(),n=this.rad,Ot.drawImage(u,-n*t,(.1*n-n)*t,2*n*t,2*n*t),Ot.restore())}}},window.Toucan=hr,u.setCustomClassForGameObjType(hr,2,75),Ns=Es,cr.prototype=Object.create(Ns.prototype),cr.prototype.constructor=cr,cr.superClass=Ns,cr.prototype.animalInfo=function(){var t={};switch(this.animalSpecies){case 0:t.aniName="Tiger";break;case 1:t.aniName="White Tiger";break;case 2:t.aniName="Golden Tiger";break;case 3:t.aniName="Albino Tiger"}return t.aniDesc="",t.upgradeText="UPGRADED to "+t.aniName+"!\n Tigers can launch an ambush attack (HOLD W to grow a bush)!",t.aniCol="#FF9000",t.skinName="jungle/tiger/"+this.animalSpecies+"/tiger",t},cr.prototype.getSkinName=function(){return"jungle/tiger/"+this.animalSpecies+"/tiger"+(0==this.specType?"":this.specType)},window.Tiger=cr,u.setCustomClassForGameObjType(cr,2,54),Ns=Es,_r.prototype=Object.create(Ns.prototype),_r.prototype.constructor=_r,_r.superClass=Ns,_r.prototype.getSkinName=function(){return"land/boa/boaConstrictor"+(this.flag_usingAbility?"2":"")},_r.prototype.drawUnderSkinImg=function(){if(!this.flag_usingAbility){var t=this.rad-this.outlineW,e=500/340,a=ve("skins/land/boa/tongue.png"),i=(ft-this.spawnTime)/1e3,s=He?0:D(i,.5,5,.5),r=He?0:5;a&&Ot.drawImage(a,-t*e,-(t+r+s)*e,2*t*e,2*t*e)}},window.BoaConstrictor=_r,u.setCustomClassForGameObjType(_r,2,51),Ns=Es,Nr.prototype=Object.create(Ns.prototype),Nr.prototype.constructor=Nr,Nr.superClass=Ns,Nr.prototype.getSkinName=function(){return"land/cobra"+(this.flag_usingAbility?"2":"")},Nr.prototype.drawUnderSkinImg=function(){if(!this.flag_usingAbility){var t=this.rad-this.outlineW,e=500/340,a=ve("skins/land/boa/tongue.png"),i=(ft-this.spawnTime)/1e3,s=He?0:D(i,.5,5,.5),r=He?0:5;a&&Ot.drawImage(a,-t*e,-(t+r+s)*e,2*t*e,2*t*e)}},window.Cobra=Nr,u.setCustomClassForGameObjType(Nr,2,50),Ns=Es,dr.prototype=Object.create(Ns.prototype),dr.prototype.constructor=dr,dr.superClass=Ns,dr.prototype.getSkinName=function(){return"jungle/gaur/"+this.animalSpecies+"/gaur"+(this.flag_usingAbility?"_ability":"")},dr.prototype.drawOnTopOfSkinImg=function(){if(this.flag_usingAbility){var t=ve("skins/jungle/gaur/"+this.animalSpecies+"/gaur_head.png");if(t){var e=500/340;Ot.save();var a=this.rad;Ot.drawImage(t,.5*-a*e,-a*e*.2,a*e,a*e*1.19),Ot.restore()}}},dr.prototype.animalInfo=function(){var t={},e="";switch(this.animalSpecies){case 0:t.aniName="Gaur";break;case 1:t.aniName="Leucistic Gaur",e="\n(You're strong against predators!)"}return t.aniDesc="",t.upgradeText="UPGRADED to "+t.aniName+"!\n"+t.aniName+" is an extremly powerful animal that can kick, and use its horns to battle their opponent."+e,t.aniCol="#616161",t.skinName="jungle/gaur/"+this.animalSpecies+"/gaur",t},window.Gaur=dr,u.setCustomClassForGameObjType(dr,2,94),Ns=Es,pr.prototype=Object.create(Ns.prototype),pr.prototype.constructor=pr,pr.superClass=Ns,pr.prototype.getSkinName=function(){return"ocean/jellyfish/"+this.animalSpecies},pr.prototype.animalInfo=function(){var t={},e="";switch(this.animalSpecies){case 0:t.aniName="Jellyfish";break;case 1:t.aniName="Lion's Mane\nJellyfish",e="\nYou're huge and slow, use your body mechanism to defend yourself against predators!";break;case 2:t.aniName="White-Spotted\nJellyfish",e="\nWhite-Spotted Jellyfishes are beautiful and very fast!";break;case 3:t.aniName="Box Jellyfish",e="\nBox Jellyfishes are very dangerous and poisonous, but very vulnerable and tiny!"}return t.aniDesc="",t.upgradeText="UPGRADED to "+t.aniName.replace("\n"," ")+"!\nA slowly-turning animal that can grow quite large!"+e,t.aniCol="black",t.skinName="ocean/jellyfish/"+this.animalSpecies,t},window.Jellyfish=pr,u.setCustomClassForGameObjType(pr,2,23),Ns=Ms,gr.prototype=Object.create(Ns.prototype),gr.prototype.constructor=gr,gr.superClass=Ns,gr.prototype.updateZ=function(){this.z=1005+this.rad/100},gr.prototype.customDraw=function(t){if(He)e=1,n=(i=.85)+(s=.5*(1-i))+s*Math.sin(2*Math.PI/e*(ft/1e3)),o=Math.trunc(ft/120)%5,(r=ve("img/fire/0.png"))&&(l=0,h=.4*this.rad,c=2*this.rad*(2+2*n)/3,d=2*this.rad*n,p=.5,g=.95,Ot.save(),Ot.rotate(this.angle),Ot.drawImage(r,l+c*-p,h+d*-g,c,d),Ot.restore());else{var e=1,a=(i=.15)+(s=.5*(.8-i))+s*Math.sin(2*Math.PI/e*(ft/1e3));Ot.save(),Ot.globalAlpha*=a,Ot.restore();e=1;var i,s,r,n=(i=.85)+(s=.5*(1-i))+s*Math.sin(2*Math.PI/e*(ft/1e3)),o=Math.trunc(ft/120)%5;if(r=ve("img/fire/"+o+".png")){var l=0,h=.4*this.rad,c=2*this.rad*(2+2*n)/3,d=2*this.rad*n,p=.5,g=.95;Ot.save(),Ot.globalAlpha*=this.onFireEffA*n,Ot.rotate(this.angle),Ot.drawImage(r,l+c*-p,h+d*-g,c,d),Ot.restore()}}},window.Fire=gr,u.setCustomClassForGameObjType(gr,70),Ns=Ms,Dr.prototype=Object.create(Ns.prototype),Dr.prototype.constructor=Dr,Dr.superClass=Ns,Dr.prototype.updateZ=function(){this.z=1005+this.rad/100},Dr.prototype.customDraw=function(t){if(He)(r=ve("img/fireball/0.png"))&&(e=1,n=(i=.85)+(s=.5*(1-i))+s*Math.sin(2*Math.PI/e*(ft/1e3)),l=0,h=.4*this.rad,c=2*this.rad*(2+2*n)/3,d=3.5*this.rad*n,p=.5,g=.95,Ot.save(),Ot.rotate(this.angle),Ot.drawImage(r,l+c*-p,h+d*-g,c,d),Ot.restore());else{var e=1,a=(i=.15)+(s=.5*(.8-i))+s*Math.sin(2*Math.PI/e*(ft/1e3));Ot.save(),Ot.globalAlpha*=a,Ot.restore();e=1;var i,s,r,n=(i=.85)+(s=.5*(1-i))+s*Math.sin(2*Math.PI/e*(ft/1e3)),o=Math.trunc(ft/120)%5;if(r=ve("img/fireball/"+o+".png")){var l=0,h=.4*this.rad,c=2*this.rad*(2+2*n)/3,d=3.5*this.rad*n,p=.5,g=.95;Ot.save(),Ot.globalAlpha*=this.onFireEffA*n,Ot.rotate(this.angle),Ot.drawImage(r,l+c*-p,h+d*-g,c,d),Ot.restore()}}},window.FireBall=Dr,u.setCustomClassForGameObjType(Dr,18),Ns=Ms,Fr.prototype=Object.create(Ns.prototype),Fr.prototype.constructor=Fr,Fr.superClass=Ns,Fr.prototype.nickName="bettermope.io",Fr.prototype.fadeAway=!1,Fr.prototype.webTransparency=100,Fr.prototype.carcassType=0,Fr.prototype.updateZ=function(){this.z=-153+this.rad},Fr.prototype.getNameSize=function(){return 6},Fr.prototype.setNick=function(t){this.nickName=t,null==this.nickTXT?(this.nickTXT=new E(this.getNameSize(),"#FFFFFF"),this.nickTXT.strokeW=1.5,this.nickTXT.renderScale=5,this.nickTXT.setText(this.nickName)):(this.nickTXT.setFontSize(this.getNameSize()),this.nickTXT.setText(this.nickName))},Fr.prototype.customDraw=function(t){Ot.save();var e=.3;if(this.fadeAway){var a=this.webTransparency/100;Ot.globalAlpha=a,e=Math.min(e,a)}else Ot.globalAlpha=.8;var i=ve("img/carcass/"+this.carcassType+".png");if(i){var s=this.rad;Ot.rotate(this.angle),Ot.drawImage(i,-s,-s,2*s,2*s)}Ot.restore(),this.drawNickName(e)},Fr.prototype.drawNickName=function(t){this.nickName&&this.nickTXT&&!ze&&(Ot.save(),Ot.globalAlpha=t,this.nickTXT.x=0,this.nickTXT.y=this.rad,this.nickTXT.draw(),Ot.restore())},Fr.prototype.readCustomData_onNewlyVisible=function(t){var e=t.readString();this.carcassType=t.readUInt8(),this.fadeAway=1==t.readUInt8(),this.fadeAway&&(this.webTransparency=t.readUInt16()),this.setNick(e||"bettermope.io")},Fr.prototype.readCustomData_onUpdate=function(t){this.fadeAway&&(this.webTransparency=t.readUInt16())},window.AnimalCarcass=Fr,u.setCustomClassForGameObjType(Fr,74),Ns=Ms,Ur.prototype=Object.create(Ns.prototype),Ur.prototype.constructor=Ur,Ur.superClass=Ns,Ur.prototype.chilliType=0,Ur.prototype.updateZ=function(){this.z=-153},Ur.prototype.customDraw=function(t){Ot.save();var e=ve("img/chilli/"+this.chilliType+"/chilli"+(this.isEdibleOutlined()?"_e":"")+".png");if(e){var a=this.rad;Ot.rotate(this.angle),Ot.drawImage(e,-a,-a,2*a,2*a)}Ot.restore()},Ur.prototype.readCustomData_onNewlyVisible=function(t){this.chilliType=t.readUInt8()},window.Chilli=Ur,u.setCustomClassForGameObjType(Ur,75),Ns=Es,ur.prototype=Object.create(Ns.prototype),ur.prototype.constructor=ur,ur.superClass=Ns,ur.prototype.objSkinSpotsCanvas=null,ur.prototype.getSkinName=function(){return this.animalInfo().skinName},ur.prototype.animalInfo=function(){var t={},e="";switch(this.animalSpecies){case 0:t.aniName="Cheetah",t.upgradeText="UPGRADED to Cheetah!\n Press W to get a speed boost!",e="cheetah";break;case 1:t.aniName="Jaguar",t.upgradeText="UPGRADED to JAGUAR!\n Press W to get a speed boost!\n(Jaguars can climb hills!)",e="jaguar";break;case 2:t.aniName="Leopard",t.upgradeText="UPGRADED to LEOPARD!\n Press W to get a speed boost!\n(Leopards can dive longer)",e="leopard";break;case 3:t.aniName="Black Panther",t.upgradeText="UPGRADED to BigCat!\n Press W to get a speed boost!\n(Black Panthers are fast on mud)",e="blackpanther"}return t.aniCol="#CAC05B",t.skinName="land/bigcat/"+e,t},window.BigCat=ur,u.setCustomClassForGameObjType(ur,2,9),Ns=Ms,Er.prototype=Object.create(Ns.prototype),Er.prototype.constructor=Er,Er.prototype.propType=null,Er.superClass=Ns,Er.prototype.setObjTypes=function(t,e){this.oType=t,this.propType=e},Er.prototype.updateZ=function(){this.z=1002},Er.prototype.customDraw=function(t){switch(this.propType){case 1:_(0,0,this.rad,"red");break;case 3:var e="img/prop/3/"+this.specType+".png";if(i=ve(e)){var a=this.rad;Ot.save(),Ot.drawImage(i,0,2.5*-a,2*a,2.5*a),Ot.restore()}break;case 5:var i;a=1.5*this.rad,(i=ve(e="img/steam.png"))&&(Ot.save(),Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(i,-a,-a,2*a,2*a),Ot.restore())}},window.Prop=Er,u.setCustomClassForGameObjType(Er,g),Ns=Er,mr.prototype=Object.create(Ns.prototype),mr.prototype.constructor=mr,mr.prototype.capAngle=0,mr.prototype.capAngleDelta=0,mr.prototype.ocapAngle=0,mr.prototype.nickName=null,mr.superClass=Ns,mr.prototype.customDraw=function(t){var e=.1*this.capAngleDelta;this.capAngleDelta-=e,this.capAngle+=e,Ot.save();let a="img/prop/2/";var i;if(i=ve(a+"Tank_Body.png")){var s=1.55*this.rad;Ot.save(),Ot.rotate(this.angle),Ot.drawImage(i,-s,-s,2*s,2*s),Ot.restore()}(i=ve(a+"Tank_Cap.png"))&&(s=2*this.rad,Ot.save(),Ot.rotate(this.capAngle),Ot.drawImage(i,-s,-s,2*s,2*s),Ot.restore()),this.nickTXT&&(this.nickTXT.x=0,this.nickTXT.y=this.rad+9,this.nickTXT.draw()),Ot.restore()},mr.prototype.updateZ=function(){this.z=2002},mr.prototype.readCustomData_onUpdate=function(t){var e=2*t.readUInt8(),a=I(e+90);this.angleDelta=A(this.angle,a),this.oAngle=this.angle;var i=2*t.readUInt8(),s=I(i-90);this.capAngleDelta=A(this.capAngle,s),this.oCapAngle=this.capAngle,this.firstPosUpd&&(this.oAngle=this.angle=a,this.angleDelta=0,this.oCapAngle=this.capAngle=s,this.capAngleDelta=0);let r=t.readString();r!=this.nickName&&this.setNick(r)},mr.prototype.setNick=function(t,e="#FFFFFF"){if(this.id!=ea)for(var a in window.GameConfig.badWords)t=h(t,window.GameConfig.badWords[a]);if(this.nickName=t,null==this.nickTXT){let t="#FFFFFF";""!==e&&"undefined"!==e&&"null"!==e&&(t=e),this.nickTXT=new E(14,t),this.nickTXT.strokeW=1.5,this.nickTXT.multiLine=!0,this.nickTXT.renderScale=5,this.nickTXT.setText(this.nickName)}else this.nickTXT.setFontSize(14),this.nickTXT.setText(this.nickName)},window.Tank=mr,u.setCustomClassForGameObjType(mr,g,2),Ns=Er,fr.prototype=Object.create(Ns.prototype),fr.prototype.constructor=fr,fr.prototype.bladeAngle=0,fr.prototype.BladeSpeed=0,fr.prototype.nickName=null,fr.superClass=Ns,fr.prototype.customDraw=function(t){this.bladeAngle+=this.BladeSpeed,Ot.save(),_(0,0,this.rad,"black");let e="img/prop/4/";var a;if(a=ve(e+"base.png")){var i=1.162*this.rad*3.5,s=3.5*this.rad;Ot.save(),Ot.rotate(this.angle),Ot.drawImage(a,-s,1.2*-i,2*s,2*i),Ot.restore()}(a=ve(e+"blade.png"))&&(s=2*this.rad,Ot.save(),Ot.translate(.07*-this.rad,0),Ot.rotate(this.bladeAngle),Ot.drawImage(a,-s,-s,2*s,2*s),Ot.restore()),this.nickTXT&&(this.nickTXT.x=0,this.nickTXT.y=this.rad+9,this.nickTXT.draw()),Ot.restore()},fr.prototype.updateZ=function(){this.z=2002},fr.prototype.readCustomData_onUpdate=function(t){var e=2*t.readUInt8(),a=I(e+90);this.angleDelta=A(this.angle,a),this.oAngle=this.angle;var i=2*t.readUInt8(),s=I(i-90);this.capAngleDelta=A(this.capAngle,s),this.oCapAngle=this.capAngle,this.firstPosUpd&&(this.oAngle=this.angle=a,this.angleDelta=0,this.oCapAngle=this.capAngle=s,this.capAngleDelta=0);let r=t.readString();r!=this.nickName&&this.setNick(r)},fr.prototype.setNick=function(t,e="#FFFFFF"){if(this.id!=ea)for(var a in window.GameConfig.badWords)t=h(t,window.GameConfig.badWords[a]);if(this.nickName=t,null==this.nickTXT){let t="#FFFFFF";""!==e&&"undefined"!==e&&"null"!==e&&(t=e),this.nickTXT=new E(14,t),this.nickTXT.strokeW=1.5,this.nickTXT.multiLine=!0,this.nickTXT.renderScale=5,this.nickTXT.setText(this.nickName)}else this.nickTXT.setFontSize(14),this.nickTXT.setText(this.nickName)},window.Helicopter=fr,u.setCustomClassForGameObjType(fr,g,4),window.InterfaceButton=Br,Or.prototype={mode:0,state:0,myPlayer:null},Or.prototype.chatAllowed=!0,Or.prototype.isHalloween=!1,Or.prototype.stamp=0,Or.prototype.interface=function(){},Or.prototype.drawMap=function(){},Or.prototype.interfaceReset=function(){},Or.prototype.main=function(t){},Or.prototype.onInit=function(t){},Or.prototype.drawCustomObjs=function(t){},Or.prototype.worldUpdate=function(t){},Or.prototype.setPlayer=function(){this.myPlayer=xe[ea]},window.GameMode=Or;var Rr=!1;function Wr(t){this.mode=t,this.stamp=+new Date,this.chatAllowed=!0,this.createInterfaceButtons()}Ns=Or,Wr.prototype=Object.create(Ns.prototype),Wr.prototype.constructor=Wr,Wr.superClass=Ns,Wr.prototype.safeArea=null,Wr.prototype.wastedPopups=[],Wr.prototype.playerDisplayNum=0,Wr.prototype.interface=function(){if(-1!=this.state&&this.mode==ye){if(ia)for(var t=this.wastedPopups.length-1;t>=0;t--){var e=this.wastedPopups[t];e.draw(),e.timedOut&&this.wastedPopups.splice(t,1)}null!=this.endScreenCanvas&&(this.endScreenCanvas.width&&Ot.drawImage(this.endScreenCanvas,ge/2-this.endScreenCanvas.width/2,ue/2-this.endScreenCanvas.height/2-15*Rt,this.endScreenCanvas.width,this.endScreenCanvas.height),Ai(!0)),this.drawInterfaceButtons()}},Wr.prototype.interfaceReset=function(){if(this.endScreenCanvas=null,this.dangerCircleMiniMapCanvas=null,this.wastedPopups=[],this.lastWastedPopupT=0,this.playercount=0,this.safeArea=null,this.interfaceButtons)for(var t=0;t<this.interfaceButtons.length;t++)this.interfaceButtons[t].onInterfaceReset();this.interfaceButtons=[]},Wr.prototype.onInit=function(){},Wr.prototype.playercount=0,Wr.prototype.setPlayerCount=function(t){this.playercount=t},Wr.prototype.showPlayerCount=function(){Ot.save();var t=ge/2,e=50*ie,a=300*ie;Ot.globalAlpha=.35,Ot.fillStyle="black";var i=30*ie;Ot.fillRect(t-a/2,i,a,e),Ot.globalAlpha=1,Ot.fillStyle="white",Ot.font=30*ie+"px Arial",Ot.lineWidth=1,Ot.textAlign="center",Ot.textBaseline="middle",Ot.shadowOffsetX=1,Ot.shadowOffsetY=1,Ot.shadowColor="black",i+=25*ie;var s=" player";this.playercount>1&&(s+="s"),this.state==HungerGames_inProgress?s+=" alive!":this.state!=Gr&&this.state!=HungerGames_ready||(s+=" joined"),Ot.fillText(this.playercount+s,t,i),Ot.restore()},Wr.prototype.lbCanvas=null,Wr.prototype.leaderboard=function(t){if(null==this.lbCanvas&&(this.lbCanvas=document.createElement("canvas")),t){console.log("hi");var e=this.lbCanvas.getContext("2d"),a=55;a+=22*t.length,this.lbCanvas.width=270,this.lbCanvas.height=a,e.globalAlpha=.2,e.fillStyle="#000000",e.fillRect(0,0,this.lbCanvas.width,this.lbCanvas.height),e.globalAlpha=1,e.fillStyle="#FFFFFF";var i,s=as.name;for(e.font="24px Arial",He||(e.shadowOffsetX=1,e.shadowOffsetY=1),e.shadowColor="black",e.fillText(s,this.lbCanvas.width/2-e.measureText(s).width/2,40),e.textAlign="left",e.font="17px Arial",i=0;i<t.length;++i)s=ze?"":t[i].name||"bettermope.io",s+=" ("+x(t[i].xp)+")",e.fillStyle="#FFFFFF",e.fillText(s,15,65+22*i)}},Wr.prototype.drawLeaderboard=function(){ia&&Dt&&Dt.width&&Ot.drawImage(Dt,10*Rt,10*Rt,Dt.width*ie,Dt.height*ie)},Wr.prototype.btnPlayAgain=null,Wr.prototype.showStats=!0,Wr.prototype.interfaceButtons=[],Wr.prototype.createInterfaceButtons=function(){this.interfaceButtons=[]},Wr.prototype.drawInterfaceButtons=function(){if(this.interfaceButtons)for(var t=0;t<this.interfaceButtons.length;t++){var e=this.interfaceButtons[t];e.isVisible&&e.draw()}},Wr.prototype.onResize=function(){this.drawInterfaceButtons()},Wr.prototype.readPlayerStats=function(t){var e=[];return e.rank=t.readUInt16(),e.timeAlive=t.readUInt16(),e.totalKills=t.readUInt16(),e.topRank=t.readUInt16(),e.maxXP=t.readUInt32(),e.killedBy=t.readString(),e},Wr.prototype.playerInfo=function(t){if(Rr&&!sa){var e=this.readPlayerStats(t);this.buildEndScreenHTML(e)}else Rr||(this.endScreenCanvas=null)},Wr.prototype.worldUpdate=function(t){},Wr.prototype.drawMap=function(){},Wr.prototype.pieChartCanvas=null,Wr.prototype.teamColors={0:"white",1:"#B6CF40"},Wr.prototype.endScreenDisplayed=!1,Wr.prototype.buildEndScreenHTML=function(t){if(!this.endScreenDisplayed){this.endScreenDisplayed=!0;var e="";e+="<div class='msg'>YOU WERE #"+t.rank+"</div>",e+="<div class='row'>",e+="<div class='label'>Killed by:</div>",e+="<div class='value2'>"+t.killedBy+"</div>",e+="</div>",e+="<div class='row'>",e+="<div class='col1'>",e+="<div class='label'>Time alive:</div>",e+="<div class='value'>"+U(t.timeAlive)+"</div>",e+="</div>",e+="<div class='col2'>",e+="<div class='label'>Total kills:</div>",e+="<div class='value'>"+t.totalKills+"</div>",e+="</div>",e+="</div>",e+="<div class='row'>",e+="<div class='col1'>",e+="<div class='label'>Top rank:</div>",e+="<div class='value'>"+t.topRank+"</div>",e+="</div>",e+="<div class='col2'>",e+="<div class='label'>Max xp:</div>",e+="<div class='value'>"+x(t.maxXP)+"</div>",e+="</div>",e+="</div>",e+="<div style='clear:both;'></div>",e+="<div class='btnDiv'>",e+="<button id='btnMopeOptions' class='btn'>      CONTINUE      </button>",e+="</div>",e+="<div style='clear:both;'></div>";var a=document.getElementById("endScreen");a&&(a.innerHTML=e,a.style.display="block",document.getElementById("mopeMenu"),btnMopeOptions.onclick=Ci,document.getElementById("moneyRectangle").style.marginTop="55px"),ia&&!Rr||(document.getElementById("startMenuWrapper").style.display="block")}},Wr.prototype.endScreenCanvas=null,Wr.prototype.buildEndScreen=function(t,e){null==this.endScreenCanvas&&(this.endScreenCanvas=document.createElement("canvas"));var a=this.endScreenCanvas.getContext("2d");this.endScreenCanvas.width=430,this.endScreenCanvas.height=250,a.globalAlpha=.2,a.fillStyle="#000000",a.fillRect(0,0,this.endScreenCanvas.width,this.endScreenCanvas.height),a.fillStyle="#000000",a.fillRect(5,5,this.endScreenCanvas.width-10,this.endScreenCanvas.height-10);var i=5;a.globalAlpha=1,a.fillStyle="#FFFFFF",a.font="30px Arial",i+=55;var s="Final Stats";a.font="30px Arial",a.fillText(s,this.endScreenCanvas.width/2-a.measureText(s).width/2,i),a.font="20px Arial",i+=45,s="You were #"+e.rank,a.fillText(s,this.endScreenCanvas.width/2-a.measureText(s).width/2,i),i+=40,U(e.timeAlive);var r=20;Si(a,"Killed by",e.killedBy,r,i),i+=40,Si(a,"Time Alive",U(e.timeAlive),r,i),r+=210,Si(a,"Total Kills",e.totalKills,r,i),i+=40,r=20,Si(a,"Top rank",e.topRank,r,i),r+=210,Si(a,"Max XP",x(e.maxXP),r,i),i+=50},Wr.prototype.lastWastedPopupT=0,Wr.prototype.onPlayerWasted=function(t){if((ft-this.lastWastedPopupT)/1e3>.7){this.lastWastedPopupT=ft;var e=new vs(t+" wasted!",40,"red",1500);this.wastedPopups.push(e)}},window.FreeForAll=Wr,Ns=Or,Lr.prototype=Object.create(Ns.prototype),Lr.prototype.constructor=Lr,Lr.superClass=Ns,Lr.prototype.safeArea=null,Lr.prototype.wastedPopups=[],Lr.prototype.playerDisplayNum=0,Lr.prototype.interface=function(){if(-1!=this.state&&this.mode==ye){if(ia)for(var t=this.wastedPopups.length-1;t>=0;t--){var e=this.wastedPopups[t];e.draw(),e.timedOut&&this.wastedPopups.splice(t,1)}null!=this.endScreenCanvas&&(this.endScreenCanvas.width&&Ot.drawImage(this.endScreenCanvas,ge/2-this.endScreenCanvas.width/2,ue/2-this.endScreenCanvas.height/2,this.endScreenCanvas.width,this.endScreenCanvas.height),ia&&!Rr||Ai(!0)),this.drawInterfaceButtons(),this.gameMode_screenMsg()}};var jr=null;Lr.prototype.interfaceReset=function(){if(console.log("reseting interface"),this.endScreenCanvas=null,this.dangerCircleMiniMapCanvas=null,this.wastedPopups=[],this.lastWastedPopupT=0,this.playercount=0,this.safeArea=null,jr=null,zr=null,this.interfaceButtons)for(var t=0;t<this.interfaceButtons.length;t++)this.interfaceButtons[t].onInterfaceReset();this.interfaceButtons=[]},Lr.prototype.onInit=function(){},Lr.prototype.playercount=0,Lr.prototype.setPlayerCount=function(t){this.playercount=t},Lr.prototype.showPlayerCount=function(){Ot.save();var t=ge/2,e=50*ie,a=300*ie;Ot.globalAlpha=.35,Ot.fillStyle="black";var i=30*ie;Ot.fillRect(t-a/2,i,a,e),Ot.globalAlpha=1,Ot.fillStyle="white",Ot.font=30*ie+"px Arial",Ot.lineWidth=1,Ot.textAlign="center",Ot.textBaseline="middle",Ot.shadowOffsetX=1,Ot.shadowOffsetY=1,Ot.shadowColor="black",i+=25*ie;var s=" player";this.playercount>1&&(s+="s"),this.state==HungerGames_inProgress?s+=" alive!":this.state!=Gr&&this.state!=HungerGames_ready||(s+=" joined"),Ot.fillText(this.playercount+s,t,i),Ot.restore()},Lr.prototype.lbCanvas=null,Lr.prototype.leaderboard=function(t){if(null==this.lbCanvas&&(this.lbCanvas=document.createElement("canvas")),t){var e=this.lbCanvas.getContext("2d"),a=55;a+=22*t.length,this.lbCanvas.width=270,this.lbCanvas.height=a,e.globalAlpha=.2,e.fillStyle="#000000",e.fillRect(0,0,this.lbCanvas.width,this.lbCanvas.height),e.globalAlpha=1,e.fillStyle="#FFFFFF";var i,s=as.name;for(e.font="24px Arial",He||(e.shadowOffsetX=1,e.shadowOffsetY=1),e.shadowColor="black",e.fillText(s,this.lbCanvas.width/2-e.measureText(s).width/2,40),e.textAlign="left",e.font="17px Arial",i=0;i<t.length;++i)s=ze?"":t[i].name||"bettermope.io",s+=" ("+x(t[i].xp)+")",e.fillStyle="#FFFFFF",e.fillText(s,15,65+22*i)}},Lr.prototype.drawLeaderboard=function(){ia&&null!=this.pieChartCanvas&&this.pieChartCanvas.width&&Ot.drawImage(this.pieChartCanvas,20*Rt,20*Rt,this.pieChartCanvas.width,this.pieChartCanvas.height)},Lr.prototype.btnPlayAgain=null,Lr.prototype.showStats=!0,Lr.prototype.interfaceButtons=[],Lr.prototype.createInterfaceButtons=function(){this.interfaceButtons=[]},Lr.prototype.drawInterfaceButtons=function(){if(this.interfaceButtons)for(var t=0;t<this.interfaceButtons.length;t++){var e=this.interfaceButtons[t];e.isVisible&&e.draw()}},Lr.prototype.onResize=function(){this.drawInterfaceButtons()},Lr.prototype.readPlayerStats=function(t){var e=[];return e.rank=t.readUInt16(),e.timeAlive=t.readUInt16(),e.totalKills=t.readUInt16(),e.topRank=t.readUInt16(),e.maxXP=t.readUInt32(),e.killedBy=t.readString(),e},Lr.prototype.playerInfo=function(t){if(Rr&&!sa){var e=this.readPlayerStats(t);this.buildEndScreenHTML(e)}else Rr||(this.endScreenCanvas=null)};var Gr=0;Lr.prototype.worldUpdate=function(t){if(2==(be=t.readUInt8())){var e=ui/200,a=t.readUInt32()*e,i=1.25*t.readUInt32(),s=5*t.readUInt32();jr={x:a,y:i,rad:s*(ui/me)}}else jr=null},Lr.prototype.handleMessage=function(t){var e=t.readUInt8();switch(console.log("battleroyal_msg :"+e),e){case 83:var a=t.readString();this.setStatusBarMessage(a,15);break;case 82:this.alivePlayers=t.readUInt16(),this.playerCountMsg=t.readString(),this.setPlayerCountMsg();break;case 84:var i=U(d=t.readUInt16());4==be?(a="Game restarts in "+i,d<3&&(a="Starting new game"),this.setMessage(a,500)):(a="Battle begins in "+i,d<3&&(a=""==i?"Starting new battle!":"Starting new battle! ("+i+")"),this.setMessage(a,500),0==d&&gi());break;case 33:t.readUInt16(),Rr=!0,this.showStats=!0,oi=!1,resetAfk();break;case 34:respawnXp=0,new Date,oi=!1,resetAfk();break;case 36:var s=t.readUInt8(),r=[];for(c=0;c<s;++c)r.push({name:t.readString(),xp:t.readUInt32()});this.leaderboard(r);break;case 38:this.playersJoined=t.readUInt16(),this.playersJoined>0&&this.setPlayerCount(this.playersJoined);break;case 87:a="Heatwave expanding in "+(i=U(d=t.readUInt16())),d<1&&(a="Heatwave expands now!"),this.setMessage(a,500);break;case 40:Rr?this.setMessage("You have been eliminated!",500):this.setMessage("Stay in safe area!",500);break;case 41:be=this.state=t.readUInt8(),this.playersJoined=t.readUInt16(),this.playersJoined>0&&this.setPlayerCount(this.playersJoined),this.state==Gr?this.setMessage("Waiting for players",1e3):this.state==battleRoyal_gameReset&&(console.log("client objs reset!"),Se=[],xe={},Me=[]);break;case 42:1==t.readUInt8()?this.setMessage("You WON!",15e3):this.setMessage("You LOST!",15e3);break;case 43:an()&&ja.close();break;case 85:var n=t.readString();n&&n.length>0&&this.onPlayerWasted(n);break;case 45:console.log("Msg_battleroyal_endScreen");var o=null,l=0,h=[];if((l=Mt?t.readUInt16():(o=this.readPlayerStats(t)).totalPlayers)>0){l>5&&(l=5);for(var c=0;c<l;++c)h.push({playerName:t.readString(),wins:t.readUInt8()})}null==h&&null==o||(this.endScreenDisplayed=!1,this.buildEndScreenHTML(h,o));break;case 46:var d;0==(d=t.readUInt16())?this.setMessage("Battle Ended",500):(i=U(d),Rr||this.setMessage("Battle Ending in "+i,500));case 48:{var p=t.readUInt16();let e=[];for(c=0;c<p;c++)e.push(t.readString());o=this.readPlayerStats(t),this.buildEndScreen(e,o)}}};var zr=null;Lr.prototype.drawZombiePlayers=function(){if(this.zombiePlayers)for(t=0;t<this.zombiePlayers.length;t++)Pi(this.zombiePlayers[t],"#adff32",1)},Lr.prototype.drawMap=function(){this.screenMessage(),this.drawZombiePlayers()},Lr.prototype.pieChartCanvas=null,Lr.prototype.teamColors={0:"white",1:"#B6CF40"},Lr.prototype.buildPieChart=function(){if(null==this.pieChartCanvas&&(this.pieChartCanvas=document.createElement("canvas")),null!=this.pieChartCanvas){var t=this.pieChartCanvas.getContext("2d"),e={0:this.nonZombiePlayersCount,1:this.zombieCount};bt=0;var a=new Vr({pad:30,canvas:this.pieChartCanvas,data:e,colors:this.teamColors});this.pieChartCanvas.width=210,this.pieChartCanvas.height=210,a.draw(),t.globalAlpha=.2,t.globalAlpha=.5,t.fillStyle="white",t.font="20px Arial",str=as.name,t.fillText(str,this.pieChartCanvas.width/2-t.measureText(str).width/2-15,200)}},Lr.prototype.endScreenDisplayed=!1,Lr.prototype.buildEndScreenHTML=function(t){if(!this.endScreenDisplayed){this.endScreenDisplayed=!0;var e="";e+="<div class='msg'>YOU WERE #"+t.rank+"</div>",e+="<div class='row'>",e+="<div class='label'>Killed by:</div>",e+="<div class='value2'>"+t.killedBy+"</div>",e+="</div>",e+="<div class='row'>",e+="<div class='col1'>",e+="<div class='label'>Time alive:</div>",e+="<div class='value'>"+U(t.timeAlive)+"</div>",e+="</div>",e+="<div class='col2'>",e+="<div class='label'>Total kills:</div>",e+="<div class='value'>"+t.totalKills+"</div>",e+="</div>",e+="</div>",e+="<div class='row'>",e+="<div class='col1'>",e+="<div class='label'>Top rank:</div>",e+="<div class='value'>"+t.topRank+"</div>",e+="</div>",e+="<div class='col2'>",e+="<div class='label'>Max xp:</div>",e+="<div class='value'>"+x(t.maxXP)+"</div>",e+="</div>",e+="</div>",e+="<div style='clear:both;'></div>",e+="<div class='btnDiv'>",e+="<button id='btnMopeOptions' class='btn'>      CONTINUE      </button>",e+="</div>",e+="<div style='clear:both;'></div>";var a,i,s=document.getElementById("endScreen");s&&(s.innerHTML=(a=e,(i=document.createElement("div")).innerText=a,i.innerHTML),s.style.display="block"),ia||Ai(!0)}},Lr.prototype.endScreenCanvas=null,Lr.prototype.buildEndScreen=function(t,e){console.log(t),null==this.endScreenCanvas&&(this.endScreenCanvas=document.createElement("canvas"));var a=this.endScreenCanvas.getContext("2d");this.endScreenCanvas.width=430,this.endScreenCanvas.height=250+30*t.length+20,a.globalAlpha=.2,a.fillStyle="#000000",a.fillRect(0,0,this.endScreenCanvas.width,this.endScreenCanvas.height),a.fillStyle="#000000",a.fillRect(5,5,this.endScreenCanvas.width-10,this.endScreenCanvas.height-10);var i=5;a.globalAlpha=1,a.fillStyle="#FFFFFF",a.font="30px Arial",i+=55;var s="Final Stats";a.font="30px Arial",a.fillText(s,this.endScreenCanvas.width/2-a.measureText(s).width/2,i),i+=10,a.font="20px Arial";for(var r=0;r<t.length;r++)i+=30,s="#"+(r+1)+" - "+t[r],a.fillText(s,this.endScreenCanvas.width/2-a.measureText(s).width/2,i);a.font="20px Arial",i+=45,s=1==e.rank?"You WON!":"You were #"+e.rank,a.fillText(s,this.endScreenCanvas.width/2-a.measureText(s).width/2,i),i+=40;var n=20;1!=e.rank&&(Si(a,"Killed by",e.killedBy,n,i),i+=40),Si(a,"Time Alive",U(e.timeAlive),n,i),n+=210,Si(a,"Total Kills",e.totalKills,n,i),i+=40,n=20,n+=115,Si(a,"Max XP",x(e.maxXP),n,i),i+=50};var Hr=function(t,e,a,i,s,r,n){t.save(),t.globalAlpha=s,t.fillStyle=i,t.rotate(a),t.save(),t.strokeStyle="white",t.beginPath(),t.arc(0,0,e,0,.5*Math.PI,!1),t.stroke(),t.restore(),t.save(),t.beginPath(),t.arc(0,0,e,0,.5*Math.PI,!1),t.lineTo(0,r),t.lineTo(n,r),t.lineTo(n,0),t.closePath(),t.fill(),t.restore(),t.restore()};function Lr(t){this.mode=2,this.chatAllowed=!0,this.createInterfaceButtons()}function Xr(){this.mode=3,this.createInterfaceButtons()}Lr.prototype.lastWastedPopupT=0,Lr.prototype.onPlayerWasted=function(t){if((ft-this.lastWastedPopupT)/1e3>.7){this.lastWastedPopupT=ft;var e=new vs(t+" wasted!",40,"red",1500);this.wastedPopups.push(e)}},Lr.prototype.screenTextEndT=0,Lr.prototype.screenTextMsg="",Lr.prototype.setMessage=function(t,e){this.screenTextMsg=t,this.screenTextEndT=+new Date+e},Lr.prototype.screenMessage=function(){var t=(this.screenTextEndT-ft)/1e3/1;if((t=0>t?0:1<t?1:t)>0){Ot.save(),Ot.font=40*ie+"px Arial";var e=ge/2,a=60*ie,i=0;i=Math.max(i,1.5*Ot.measureText(this.screenTextMsg).width*ie),Ot.globalAlpha=.1,Ot.fillStyle="black";var s=ue-.2*ue;Ot.fillRect(e-i/2,s-a/2,i,a),Ot.globalAlpha=1,Ot.globalAlpha=t,Ot.globalAlpha=1,Ot.fillStyle="white",Ot.lineWidth=1,Ot.textAlign="center",Ot.textBaseline="middle",Ot.shadowOffsetX=1,Ot.shadowOffsetY=1,Ot.shadowColor="black",Ot.fillText(this.screenTextMsg,ge/2,s),Ot.restore()}},new Array,Lr.prototype.setStatusBarMessage=function(t,e){var a=ge/2,i=ue-.15*ue,s=ge/2-100,r=+new Date+1e3*e;this.msg_statusbar={txt:t,txt_size:40,txt_alpha:1,txt_color:"white",x:a,y:i,bg_w:s,bg_h:60,bg_color:"black",bg_alpha:.1,dur:r}},Lr.prototype.msg_statusbar=null,Lr.prototype.msg_playerCount=null,Lr.prototype.setPlayerCountMsg=function(){var t,e=ge/2;t=2!=be?this.playerCountMsg+"\n"+this.alivePlayers+" players joined!":this.playerCountMsg+"\n"+this.alivePlayers+" players alive!";var a=+new Date+6e4;this.msg_playerCount={txt:t,txt_size:20,txt_alpha:1,txt_color:"white",x:e,y:30,bg_w:100,bg_h:70,bg_color:"black",bg_alpha:.1,dur:a}},Lr.prototype.gameMode_screenMsg=function(){this.msg_statusbar&&(this.drawMessage(this.msg_statusbar),this.msg_statusbar.dur-ft<0&&(this.msg_statusbar=null)),this.msg_playerCount&&this.drawMessage(this.msg_playerCount)},Lr.prototype.drawMessage=function(t){t&&t.txt&&this.drawMessageBar(t.txt,t.txt_size,t.txt_alpha,t.txt_color,t.x,t.y,t.bg_w,t.bg_h,t.bg_color,t.bg_alpha,t.dur)},Lr.prototype.drawMessageBar=function(t,e,a,i,s,r,n,o,l,h,c){Ot.save(),Ot.globalAlpha=h,Ot.fillStyle=l,e*=ie,Ot.font=e+"px Arial";for(var d=s,p=r,g=t.split("\n"),u=e*g.length*1.5*ie,m=0,f=0;f<g.length;++f)m=Math.max(m,Ot.measureText(g[f]).width);for(m=1.5*m*ie,Ot.fillRect(d-m/2,p-u/2,m,u),Ot.globalAlpha=a,Ot.fillStyle=i,Ot.lineWidth=1,Ot.textAlign="center",Ot.textBaseline="middle",Ot.shadowOffsetX=1,Ot.shadowOffsetY=1,Ot.shadowColor="black",g.length>1?p-=10*ie:p+=5*ie,f=0;f<g.length;f++)Ot.fillText(g[f],d,p),p+=e*(f+1);Ot.restore()},window.HungerGames=Lr,Ns=Or,Xr.prototype=Object.create(Ns.prototype),Xr.prototype.constructor=Xr,Xr.superClass=Ns,Xr.prototype.safeArea=null,Xr.prototype.teamColors={0:"#cccccc",1:"#ffff00",2:"#01effc",3:"#bb00ff"},Xr.prototype.wastedPopups=[],Xr.prototype.playerDisplayNum=0,Xr.prototype.main=function(t){if(54===t.readUInt8()){var e=t.readString();this.buildYouWon(e,15)}},Xr.prototype.canvasYouWon=null,Xr.prototype.canvasYouWonEndT=0,Xr.prototype.topperInfoX=10*Rt,Xr.prototype.topperInfoY=15*Rt,Xr.prototype.top1v1_wins="",Xr.prototype.top1v1_name="",Xr.prototype.topperInfoTxt=null,Xr.prototype.buildTopperInfo=function(){var t=""+this.top1v1_name;0==t.lenght&&(t="bettermope.io");var e=(this.top1v1_isHistoric?" ALL TIME ":"")+"1v1 Pro: "+t+" (wins: "+this.top1v1_wins+")";null==this.topperInfoTxt?(this.topperInfoTxt=new E(20,"#FFFFFF"),this.topperInfoTxt.strokeW=2,this.topperInfoTxt.multiLine=!0,this.topperInfoTxt.renderScale=2,this.topperInfoTxt.setText(e),this.topperInfoTxt.setPos=function(t,e){this.x+=t/2}):(this.topperInfoTxt.setFontSize(20),this.topperInfoTxt.setText(e),this.topperInfoTxt.setPos=function(t,e){this.x+=t/2})},Xr.prototype.buildYouWon=function(t,e){if(this.canvasYouWonEndT=+new Date+1e3*e,null==this.canvasYouWon&&(this.canvasYouWon=document.createElement("canvas")),null!=this.canvasYouWon){var a=this.canvasYouWon.getContext("2d");this.canvasYouWon.width=430,this.canvasYouWon.height=140,a.globalAlpha=.2,a.fillStyle="#000000",a.fillRect(0,0,this.canvasYouWon.width,this.canvasYouWon.height),a.fillStyle="#000000",a.fillRect(5,5,this.canvasYouWon.width-10,this.canvasYouWon.height-10);var i=5;a.globalAlpha=1,a.fillStyle="#FFFFFF",a.font="30px Arial",i+=55;var s="YOU WON";a.font="30px Arial",a.fillText(s,this.canvasYouWon.width/2-a.measureText(s).width/2,i),i+=45,a.font="20px Arial",a.fillText(t,this.canvasYouWon.width/2-a.measureText(t).width/2,i)}},Xr.prototype.interface=function(){if(-1!=this.state&&this.mode==ye){if(ia)for(var t=this.wastedPopups.length-1;t>=0;t--){var e=this.wastedPopups[t];e.draw(),e.timedOut&&this.wastedPopups.splice(t,1)}null!=this.endScreenCanvas&&(this.endScreenCanvas.width&&Ot.drawImage(this.endScreenCanvas,ge/2-this.endScreenCanvas.width/2,ue/2-this.endScreenCanvas.height/2+15*Rt,this.endScreenCanvas.width,this.endScreenCanvas.height),ia&&!Rr||Ai(!0)),this.canvasYouWonEndT>+new Date&&null!=this.canvasYouWon&&this.canvasYouWon.width&&Ot.drawImage(this.canvasYouWon,ge/2-this.canvasYouWon.width/2,.2*ue,this.canvasYouWon.width,this.canvasYouWon.height),ia&&(null!=this.pieChartCanvas&&this.pieChartCanvas.width&&Ot.drawImage(this.pieChartCanvas,20*Rt,20*Rt,this.pieChartCanvas.width,this.pieChartCanvas.height),Ct&&(this.setBonusRoundTimer("Bonus Round\n"+Math.round(St)+"s"),null!=this.bonusRoundTimer&&(this.bonusRoundTimer.x=ge/2,this.bonusRoundTimer.y=.1*ue,this.bonusRoundTimer.draw()))),this.drawInterfaceButtons()}},Xr.prototype.drawMap=function(){this.buildPieChart(),this.drawTeamPlayers(),this.drawStonesOnMiniMap(),this.buildInviteScreen()},Xr.prototype.interfaceReset=function(){if(this.endScreenCanvas=null,this.dangerCircleMiniMapCanvas=null,this.wastedPopups=[],this.lastWastedPopupT=0,this.playercount=0,this.safeArea=null,this.interfaceButtons)for(var t=0;t<this.interfaceButtons.length;t++)this.interfaceButtons[t].onInterfaceReset();this.interfaceButtons=[]},Xr.prototype.onInit=function(){},Xr.prototype.playercount=0,Xr.prototype.setPlayerCount=function(t){this.playercount=t},Xr.prototype.showPlayerCount=function(){Ot.save();var t=ge/2,e=50*ie,a=300*ie;Ot.globalAlpha=.35,Ot.fillStyle="black";var i=30*ie;Ot.fillRect(t-a/2,i,a,e),Ot.globalAlpha=1,Ot.fillStyle="white",Ot.font=30*ie+"px Arial",Ot.lineWidth=1,Ot.textAlign="center",Ot.textBaseline="middle",Ot.shadowOffsetX=1,Ot.shadowOffsetY=1,Ot.shadowColor="black",i+=25*ie;var s=" player";this.playercount>1&&(s+="s"),this.state==HungerGames_inProgress?s+=" alive!":this.state!=Gr&&this.state!=HungerGames_ready||(s+=" joined"),Ot.fillText(this.playercount+s,t,i),Ot.restore()},Xr.prototype.lbCanvas=null,Xr.prototype.drawLeaderboard=function(){this.stonesCanvas&&Ot.drawImage(this.stonesCanvas,10*Rt,200*Rt,this.stonesCanvas.width*ie,this.stonesCanvas.height*ie)},Xr.prototype.btnPlayAgain=null,Xr.prototype.showStats=!0,Xr.prototype.interfaceButtons=[],Xr.prototype.createInterfaceButtons=function(){this.interfaceButtons=[]},Xr.prototype.drawInterfaceButtons=function(){if(this.interfaceButtons)for(var t=0;t<this.interfaceButtons.length;t++){var e=this.interfaceButtons[t];e.isVisible&&e.draw()}},Xr.prototype.removeExpiredRequestButtons=function(){for(d=0;d<this.interfaceButtons.length;d++){var t=this.interfaceButtons[d];if(void 0!==t.reqID){var e=!0,a=!1;for(r=0;r<At.length;r++)if(At[r].id==t.reqID){a=!0;break}if(a||(e=!1),!e||wt){F("removing button");var i=this.interfaceButtons.indexOf(t);-1!=i&&this.interfaceButtons.splice(i,1)}}}},Xr.prototype.onResize=function(){this.drawInterfaceButtons()},Xr.prototype.readPlayerStats=function(t){var e=[];return e.rank=t.readUInt16(),e.timeAlive=t.readUInt16(),e.totalKills=t.readUInt16(),e.topRank=t.readUInt16(),e.maxXP=t.readUInt32(),e.killedBy=t.readString(),e},Xr.prototype.playerInfo=function(t){if(Rr&&!sa){var e=this.readPlayerStats(t);this.buildEndScreenHTML(e)}else Rr||(this.endScreenCanvas=null)},Xr.prototype.worldUpdate=function(t){for(this.team1=t.readUInt16(),this.team2=t.readUInt16(),this.team3=t.readUInt16(),this.teamPlayerCount=t.readUInt16(),this.teamPlayers=[],Vi=0;Vi<this.teamPlayerCount;Vi++){var e=t.readUInt16()/4,a=t.readUInt16()/4,i=t.readUInt16()/10;this.teamPlayers.push({x:e,y:a,rad:i})}for(this.totalStones=t.readUInt8(),this.teamStones=[],Vi=0;Vi<this.totalStones;Vi++){var s=t.readUInt8();e=t.readUInt16()/4,a=t.readUInt16()/4,i=t.readUInt16()/10,this.teamStones.push({teamID:s,x:e,y:a,rad:i})}},Yr.prototype.bonusRoundTimer=null,Xr.prototype.pieChartCanvas=null,Xr.prototype.setBonusRoundTimer=function(t){var e=""+t;null==this.bonusRoundTimer?(this.bonusRoundTimer=new E(40,"#FFFFFF"),this.bonusRoundTimer.strokeW=2,this.bonusRoundTimer.multiLine=!0,this.bonusRoundTimer.renderScale=5,this.bonusRoundTimer.setText(e)):(this.bonusRoundTimer.setFontSize(40),this.bonusRoundTimer.setText(e))},Xr.prototype.buildPieChart=function(){if(null==this.pieChartCanvas&&(this.pieChartCanvas=document.createElement("canvas")),null!=this.pieChartCanvas){var t=this.pieChartCanvas.getContext("2d"),e={1:this.team1,2:this.team2,3:this.team3},a=new Vr({pad:30,canvas:this.pieChartCanvas,data:e,colors:this.teamColors});this.pieChartCanvas.width=210,this.pieChartCanvas.height=210,a.draw(),t.globalAlpha=.2,t.globalAlpha=.5,t.fillStyle="white",t.font="20px Arial",str=as.name,t.fillText(str,this.pieChartCanvas.width/2-t.measureText(str).width/2-15,200)}},Xr.prototype.inviteScreenCanvas=null,Xr.prototype.endScreenCanvas=null,Xr.prototype.endScreenDisplayed=!1,Xr.prototype.buildEndScreenHTML=function(t){if(!this.endScreenDisplayed){this.endScreenDisplayed=!0;var e="";e+="<div class='msg'>YOU WERE #"+t.rank+"</div>",e+="<div class='row'>",e+="<div class='label'>Killed by:</div>",e+="<div class='value2'>"+t.killedBy+"</div>",e+="</div>",e+="<div class='row'>",e+="<div class='col1'>",e+="<div class='label'>Time alive:</div>",e+="<div class='value'>"+U(t.timeAlive)+"</div>",e+="</div>",e+="<div class='col2'>",e+="<div class='label'>Total kills:</div>",e+="<div class='value'>"+t.totalKills+"</div>",e+="</div>",e+="</div>",e+="<div class='row'>",e+="<div class='col1'>",e+="<div class='label'>Top rank:</div>",e+="<div class='value'>"+t.topRank+"</div>",e+="</div>",e+="<div class='col2'>",e+="<div class='label'>Max xp:</div>",e+="<div class='value'>"+x(t.maxXP)+"</div>",e+="</div>",e+="</div>",e+="<div style='clear:both;'></div>",e+="<div class='btnDiv'>",e+="<button id='btnContinue' class='btn'>CONTINUE</button>",e+="</div>",e+="<div style='clear:both;'></div>";var a=document.getElementById("endScreen");a&&(a.innerHTML=e,a.style.display="block",document.getElementById("btnContinue").onclick=Ci),ia||Ai(!0)}},Xr.prototype.buildEndScreen=function(t,e){if(null==this.endScreenCanvas&&(this.endScreenCanvas=document.createElement("canvas")),null!=this.endScreenCanvas){var a=this.endScreenCanvas.getContext("2d");this.endScreenCanvas.width=430,this.endScreenCanvas.height=250,a.globalAlpha=.2,a.fillStyle="#000000",a.fillRect(0,0,this.endScreenCanvas.width,this.endScreenCanvas.height),a.fillStyle="#000000",a.fillRect(5,5,this.endScreenCanvas.width-10,this.endScreenCanvas.height-10);var i=5;a.globalAlpha=1,a.fillStyle="#FFFFFF",a.font="30px Arial",i+=55;var s="YOU DIED!";a.font="30px Arial",a.fillText(s,this.endScreenCanvas.width/2-a.measureText(s).width/2,i),a.font="20px Arial",i+=45,s="You were #"+e.rank,a.fillText(s,this.endScreenCanvas.width/2-a.measureText(s).width/2,i),i+=40;var r=U(e.timeAlive),n=20;Si(a,"Killed by",e.killedBy,n,i),Si(a,"Time Alive",r,n,i+=40),n+=210,Si(a,"Total Kills",e.totalKills,n,i),i+=40,n=20,Si(a,"Top rank",e.topRank,n,i),n+=210,Si(a,"Max XP",x(e.maxXP),n,i),i+=50}},Xr.prototype.buildInviteScreen=function(){if(0!=At.length){if(null==this.inviteScreenCanvas&&(this.inviteScreenCanvas=document.createElement("canvas")),null!=this.inviteScreenCanvas){var t,e=this.inviteScreenCanvas.getContext("2d");t=200+80*At.length+10,this.inviteScreenCanvas.width=430,this.inviteScreenCanvas.height=t;var a=300;this.screenPos=a,e.globalAlpha=.2,e.fillStyle="#000000",e.fillRect(0,0,this.inviteScreenCanvas.width,this.inviteScreenCanvas.height),e.fillStyle="#000000",e.fillRect(5,5,this.inviteScreenCanvas.width-10,this.inviteScreenCanvas.height-10);var i=5;e.globalAlpha=1,e.fillStyle="#FFFFFF",e.font="30px Arial",i+=55;var s="1v1 REQUEST";for(e.font="30px Arial",e.fillText(s,this.inviteScreenCanvas.width/2-e.measureText(s).width/2,i),a=100,r=0;r<At.length;r++){var n=At[r];e.save(),e.fillStyle="red",e.globalAlpha=.5,e.fillRect(this.inviteScreenCanvas.width-60,10,50,50),e.restore(),e.save(),s=""+n.dur,e.font="30px Arial",e.fillText(s,this.inviteScreenCanvas.width-35-e.measureText(s).width/2,45),e.restore(),e.font="20px Arial",s=n.requestee+" invites you for 1v1 ",e.fillText(s,this.inviteScreenCanvas.width/2-e.measureText(s).width/2,a);var o=20;Si(e,"Animal","",o,i=a+40);var l=y(n.aniType),h=ve("./skins/"+l.skinName+".png");h&&(e.save(),e.drawImage(h,o+130,i-30,50,50),e.restore()),o+=210,Si(e,"1v1 Wins",n.wins,o,i),Si(e,"Team","",o=20,i+=40),e.save();var c=o+155,d=i-5;e.fillStyle=this.teamColors[n.teamID],e.beginPath(),e.arc(c,d,10,0,2*Math.PI),e.fill(),e.restore(),o+=210,Si(e,"Rank",n.rank,o,i),a+=100;var p=this.create1v1RequestButton(n,"Accept");p.yPos=a,p.update=function(){this.x=ge/2-140,this.y=Bn.screenPos+this.yPos+10};var g=this.create1v1RequestButton(n,"Reject");g.yPos=a,g.update=function(){this.x=ge/2-40,this.y=Bn.screenPos+this.yPos+10};var u=this.create1v1RequestButton(n,"Ignore");u.yPos=a,u.update=function(){this.x=ge/2+60,this.y=Bn.screenPos+this.yPos+10},a+=80}}}else this.inviteScreenCanvas=null},Xr.prototype.create1v1RequestButton=function(t,e){var a=!1;for(Vi=0;Vi<this.interfaceButtons.length;Vi++)if((i=this.interfaceButtons[Vi]).reqID==t.id&&i.label==e)return a=!0,i;if(!a){var i=new Br(0,0,80,40,e,20);return i.reqID=t.id,i.reqAction=i.onClick=function(){this.isHighLighted=!1;var t=0;switch(this.label){case"Accept":t=1;break;case"Reject":t=0;break;case"Ignore":t=2}var e=new $r(3);e.writeUInt8(53),e.writeUInt8(t),e.writeUInt8(this.reqID),en(e)},i.onInterfaceReset=function(){this.isVisible=!0},i.isVisible=!0,this.interfaceButtons.push(i),i}},Xr.prototype.lastWastedPopupT=0,Xr.prototype.onPlayerWasted=function(t){if((ft-this.lastWastedPopupT)/1e3>.7){this.lastWastedPopupT=ft;var e=new vs(t+" wasted!",40,"red",1500);this.wastedPopups.push(e)}};var Yr,Vr=function(t){this.options=t,this.radius=t.radius,this.pad=t.pad,this.canvas=t.canvas,this._ctx=this.canvas.getContext("2d"),this.colors=t.colors,this.radius=Math.min(this.canvas.width/2,this.canvas.height/2),this.draw=function(){var t=0;for(var e in this._ctx.save(),this._ctx.globalAlpha=.3,this.drawCircle(this.canvas.width/2-this.pad/2,this.canvas.height/2-this.pad/2,this.radius-this.pad,"white"),this._ctx.restore(),this.options.data){var a=this.options.data[e];t+=a}var i=0;for(e in this.options.data){this._ctx.save(),this._ctx.lineWidth=4,this._ctx.strokeStyle="white",this._ctx.globalAlpha=.3;var s=0;bt==e&&(this._ctx.globalAlpha=.6,s=8),a=this.options.data[e];var r=2*Math.PI*a/t;this.drawPieSlice(this.canvas.width/2-this.pad/2,this.canvas.height/2-this.pad/2,this.radius-this.pad,i,i+r,this.colors[e],s),this._ctx.restore(),i+=r}},this.drawPieSlice=function(t,e,a,i,s,r,n){this._ctx.fillStyle=r,this._ctx.beginPath(),this._ctx.moveTo(t,e),this._ctx.arc(t,e,a+n,i,s),this._ctx.closePath(),this._ctx.fill(),n>0&&this._ctx.stroke()},this.drawCircle=function(t,e,a,i){this._ctx.fillStyle=i,this._ctx.beginPath(),this._ctx.moveTo(t,e),this._ctx.arc(t,e,a,0,2*Math.PI),this._ctx.closePath(),this._ctx.fill()}};function qr(){qr.superClass.call(this,78),this.teamID=0,this.doesDrawEffectScale=!0,this.drawEffectScale_Slow=!0}function Kr(){Kr.superClass.call(this),this.hasAdLoaded=!1}function Jr(){Jr.superClass.call(this),this.hasAdLoaded=!1}function Zr(t){var e=Ht("audio/click.mp3");if(e)try{e.play()}catch(t){}newMsg=new $r(2),newMsg.writeUInt8(24),newMsg.writeUInt8(hi.indexOf(t)),en(newMsg),ci&&(Ce=!1),oi=!1,ci=!1}function Qr(t){this.data=t,this.offset=0,this.readUInt8=function(){var t=this.data.getUint8(this.offset);return this.offset+=1,t},this.readUInt16=function(){try{var t=this.data.getUint16(this.offset,!1);return this.offset+=2,t}catch(t){return 0}},this.readInt16=function(){try{var t=this.data.getInt16(this.offset,!1);return this.offset+=2,t}catch(t){return 0}},this.readUInt32=function(){var t=this.data.getUint32(this.offset,!1);return this.offset+=4,t},this.readString=function(){for(var t,e=this.readUInt16(),a="",i=0;i<e;i++)t=this.readUInt8(),i!=e-1&&(a+=String.fromCharCode(t));return decodeURIComponent(escape(a))},this.readMsgReaderBitsGroup=function(){},this.readBitGroup=function(){return new tn(this)}}function $r(t){this.len=0,this.dataView=new DataView(new ArrayBuffer(t)),this.writeUInt8=function(t){this.dataView.setUint8(this.len,t),this.len+=1},this.writeUInt16=function(t){this.dataView.setUint16(this.len,t,!1),this.len+=2},this.writeInt16=function(t){this.dataView.setInt16(this.len,t,!1),this.len+=2},this.writeUInt32=function(t){this.dataView.setUint32(this.len,t,!1),this.len+=4},this.writeString=function(t){t=S(t),len=t.length,this.writeUInt16(t.length);for(var e=0;e<len;e++)this.writeUInt8(t.charCodeAt(e))}}function tn(t){this.bytesArray=new Uint8Array(20),this.bytesLen=0,this.rBitIndex=1,this.rByteIndex=0,this.getBool=function(){var t=this.bytesArray[this.rByteIndex],e=P(t,this.rBitIndex)>0;return this.rBitIndex+=1,this.rBitIndex>7&&(this.rBitIndex=1,this.rByteIndex+=1),e},this.getInt0to3=function(){return this.getIntWithXBits(2)},this.getIntWithXBits=function(t){for(var e,a,i=0,s=0;s<t;s++){e=i,a=s,i=this.getBool()?e|1<<a:e&~(1<<a)}return i},this.byteToStr=function(t){for(var e="",a=0;a<8;a++)e+=P(t,a)>0?"1":"0";return e};var e=!0;do{var a=t.readUInt8();this.bytesArray[this.bytesLen++]=a,e=P(a,0)>0}while(e)}function en(t){ja.send(t.dataView.buffer)}function an(){return null!=ja&&ja.readyState==ja.OPEN}Xr.prototype.drawStonesOnMiniMap=function(){if(this.teamStones)for(t=0;t<this.teamStones.length;t++){var e=this.teamStones[t],a=this.teamColors[e.teamID];Ot.save(),Ot.globalAlpha=1,Ot.lineWidth=1,Ot.strokeStyle="white",Ot.fillStyle=a,Ft.width,e.x,Ft.width,e.y,Ft.height,Pi(e,a,1.25),Ot.fill(),Ot.stroke(),Ot.restore()}this.drawStoneCounts()},Xr.prototype.stonesCanvas=null,Xr.prototype.drawStoneCounts=function(){var e=0,a=0,i=0;if(this.teamStones)for(t=0;t<this.teamStones.length;t++)switch(this.teamStones[t].teamID){case 1:e++;break;case 2:a++;break;case 3:i++}if(null==this.stonesCanvas&&(this.stonesCanvas=document.createElement("canvas")),this.stonesCanvas){var s=this.stonesCanvas.getContext("2d");this.stonesCanvas.width=300,this.stonesCanvas.height=300,s.font="30px Arial",this.drawStoneCount(s,1,e,10),this.drawStoneCount(s,2,a,60),this.drawStoneCount(s,3,i,110)}},Xr.prototype.playerUI=[],Xr.prototype.drawPlayerUI=function(t){},Xr.prototype.drawStoneCount=function(t,e,a,i){t.save(),t.globalAlpha=.5;var s=ve("img/teamStone/stone"+e+".png");s&&(this.rad,t.drawImage(s,10,i,40,40),i+=50,t.fillStyle="black",t.fillText(a+"",60,i-18)),t.restore()},Xr.prototype.drawTeamPlayers=function(){if(this.teamPlayers){var e=this.teamColors[bt];for(t=0;t<this.teamPlayers.length;t++)Pi(this.teamPlayers[t],e,1)}},window.TeamMode=Xr,Ns=Ms,qr.prototype=Object.create(Ns.prototype),qr.prototype.constructor=qr,qr.superClass=Ns,qr.prototype.updateZ=function(){this.z=1002},qr.prototype.customDraw=function(t){Ot.save(),Ot.globalAlpha=1;var e=ve("img/teamStone/stone"+this.teamID+".png");if(e){var a=this.rad;Ot.rotate(this.rPer*Math.PI*2),Ot.drawImage(e,-a,-a,2*a,2*a)}Ot.restore()},qr.prototype.readCustomData_onUpdate=function(t){this.teamID=t.readUInt8()},qr.prototype.readCustomData_onNewlyVisible=function(t){this.teamID=t.readUInt8()},window.TeamStone=qr,u.setCustomClassForGameObjType(qr,78),Ns=Fs,(Yr=Kr).prototype=Object.create(Ns.prototype),Yr.prototype.constructor=Yr,Yr.superClass=Ns,Yr.prototype.arenaState=0,Yr.prototype.fightNumber=0,Yr.prototype.timer=0,Yr.prototype.timerTxt=null,Yr.prototype.p1Name=null,Yr.prototype.p2Name=null,Yr.prototype.p1Bites=0,Yr.prototype.p2Bites=0,Yr.prototype.arenaRad=0,Yr.prototype.isCountdownTimer=!0,Yr.prototype.p1ID=0,Yr.prototype.p2ID=0,Kr.prototype.setTimer=function(t){var e=(this.isCountdownTimer?"":"FIGHT #"+this.fightNumber+"\nTIME\n")+t,a=16;this.isCountdownTimer&&(a=Number(t)?30:16),null==this.timerTxt?(this.timerTxt=new E(a,"#FFFFFF"),this.timerTxt.strokeW=2,this.timerTxt.multiLine=!0,this.timerTxt.renderScale=5,this.timerTxt.setText(e)):(this.timerTxt.setFontSize(a),this.timerTxt.setText(e))},Kr.prototype.setP1=function(t){var e=""+t;null==this.p1Name?(this.p1Name=new E(12,"red"),this.p1Name.strokeW=2,this.p1Name.multiLine=!0,this.p1Name.renderScale=2,this.p1Name.setText(e)):(this.p1Name.setFontSize(12),this.p1Name.setText(e))},Kr.prototype.setP2=function(t){var e=""+t;null==this.p2Name?(this.p2Name=new E(12,"blue"),this.p2Name.strokeW=2,this.p2Name.multiLine=!0,this.p2Name.renderScale=2,this.p2Name.setText(e)):(this.p2Name.setFontSize(12),this.p2Name.setText(e))},Kr.prototype.updateZ=function(){this.z=100002},Kr.prototype.customDraw=function(t){this.arenaRadUpdate(),Ot.save(),Ot.globalAlpha=.3,Ot.beginPath(),Ot.arc(0,0,this.rad+2,0,2*Math.PI,!1),Ot.arc(0,0,this.rad,0,2*Math.PI,!0),Ot.fillStyle="#32ff00",Ot.closePath(),Ot.fill(),Ot.restore(),Ot.save(),Ot.globalAlpha=.095,Ot.beginPath(),Ot.arc(0,0,this.rad,0,2*Math.PI,!1),Ot.arc(0,0,this.arenaRad,0,2*Math.PI,!0),Ot.fillStyle="red",Ot.closePath(),Ot.fill(),Ot.restore(),Ot.save(),Ot.globalAlpha=.3,Ot.beginPath(),Ot.arc(0,0,this.arenaRad,0,2*Math.PI,!1),Ot.arc(0,0,this.arenaRad-2,0,2*Math.PI,!0),Ot.fillStyle="#32ff00",Ot.closePath(),Ot.fill(),Ot.restore(),null!=this.timerTxt&&(0==this.arenaState?(this.timerTxt.x=0,this.timerTxt.y=0,this.timerTxt.draw()):1==this.arenaState?(this.timerTxt.x=0,this.timerTxt.y=.8*-this.rad,this.timerTxt.draw()):2==this.arenaState&&(this.timerTxt.x=0,this.timerTxt.y=0,this.timerTxt.draw())),null!=this.p1Name&&(this.p1Name.x=-this.rad/2,this.p1Name.y=.7*-this.rad,this.p1Name.draw()),null!=this.p2Name&&(this.p2Name.x=this.rad/2,this.p2Name.y=.7*-this.rad,this.p2Name.draw()),0!=ea&&(this.p1ID==ea||this.p2ID==ea)&&this.arenaState},Kr.prototype.hasAdLoaded=!1,Kr.prototype.readCustomData_onNewlyVisible=function(t){Kr.superClass.prototype.readCustomData_onNewlyVisible.call(this,t),this.p1ID=t.readUInt32(),this.p2ID=t.readUInt32(),this.p1=t.readString(),this.p2=t.readString(),this.p1Wins=t.readUInt8(),this.p2Wins=t.readUInt8(),this.fightNumber=t.readUInt16(),this.setNames(),this.arenaState=t.readUInt8();var e=t.readUInt16()/100;this.oArenaRad=this.arenaRad,this.nArenaRad=e},Kr.prototype.arenaRadUpdate=function(){var t=(ft-this.updateTime)/1e3/V;t=0>t?0:1<t?1:t,this.arenaRad+=.1*(this.nArenaRad-this.arenaRad)},Kr.prototype.readCustomData_onUpdate=function(t){Kr.superClass.prototype.readCustomData_onUpdate.call(this,t),this.arenaState=t.readUInt8();var e=t.readUInt16()/100;this.oArenaRad=this.arenaRad,this.nArenaRad=e,this.p1Bites=t.readUInt16(),this.p2Bites=t.readUInt16(),0==this.arenaState?(this.timer=t.readUInt16()/100,this.isCountdownTimer=!0,this.timer<23&&this.updateTimer()):1==this.arenaState?(this.timer=t.readUInt16()/100,this.isCountdownTimer=!1,this.updateTimer()):2==this.arenaState&&(this.winner=t.readUInt8(),this.winBonus=t.readUInt32(),this.winnerMsg=t.readString(),this.displayEndScreen()),this.setNames()},Kr.prototype.endScreenState=-1,Kr.prototype.endScreenChangeT=0,Kr.prototype.displayEndScreen=function(){ft>=this.endScreenChangeT&&(this.endScreenState++,this.endScreenChangeT=ft+3e3),null!=this.timerTxt&&(0==this.endScreenState?(this.timerTxt.setFontSize(40),this.timerTxt.setText("\nKO!")):1==this.endScreenState?(this.timerTxt.setFontSize(20),this.timerTxt.setText(this.winnerName+"\nWON!")):2==this.endScreenState&&(this.timerTxt.setFontSize(20),this.timerTxt.setText(this.winnerMsg+"\nWIN BONUS: "+x(this.winBonus))))},Kr.prototype.challenger=null,Kr.prototype.opponent=null,Kr.prototype.setNames=function(){var t=""+this.p1;0==t.length&&(t="bettermope.io");var e=""+this.p2;0==e.length&&(e="bettermope.io");var a="\n(wins: "+this.p1Wins+")",i="\n(wins: "+this.p2Wins+")",s="\nbites: "+this.p1Bites,r="\nbites: "+this.p2Bites;this.arenaState<2?(this.challenger=t+a,this.opponent=e+i,this.setP1(t+a+s),this.setP2(e+i+r)):2==this.arenaState&&(1==this.winner?(this.winnerName=t,this.setP1(t+a+s),this.p2Name=null):2==this.winner&&(this.winnerName=e,this.setP2(e+i+r),this.p1Name=null))},Kr.prototype.updateTimer=function(){this.timer=Math.round(this.timer);var t=this.timer;if(this.isCountdownTimer)switch(this.timer){case 23:t="";break;case 22:case 21:t="WELCOME TO 1V1 ARENA";break;case 20:case 19:t="FIGHT #"+this.fightNumber;break;case 18:case 17:t="CHALLENGER";break;case 16:case 15:t=this.challenger;break;case 14:case 13:t="OPPONENT";break;case 12:case 11:t=this.opponent;break;case 2:t="ROUND 1";break;case 1:t="GET SET";break;case 0:t="FIGHT"}this.setTimer(t)},window.AbilityObj1v1Arena=Kr,u.setCustomClassForGameObjType(Kr,c,68),Ns=Fs,(Yr=Jr).prototype=Object.create(Ns.prototype),Yr.prototype.constructor=Yr,Yr.superClass=Ns,Yr.prototype.alltimeGoals=0,Yr.prototype.xpGained=0,Yr.prototype.goalScorer="",Yr.prototype.timerTxt=null,Yr.prototype.timer=0,Jr.prototype.updateZ=function(){this.z=100002},Jr.prototype.customDraw=function(t){if(this.updateTimer(),this.timer>3){Ot.save();var e=Ot.globalAlpha;Ot.globalAlpha=.25*e,Ot.beginPath(),Ot.arc(0,0,this.rad,0,2*Math.PI,!1),Ot.arc(0,0,this.rad-20,0,2*Math.PI,!0),Ot.fillStyle="#ff9000",Ot.closePath(),Ot.fill(),Ot.restore()}null!=this.timerTxt&&(this.timerTxt.x=0,this.timerTxt.y=-this.rad,this.timerTxt.draw())},Jr.prototype.readCustomData_onNewlyVisible=function(t){Jr.superClass.prototype.readCustomData_onNewlyVisible.call(this,t),this.alltimeGoals=t.readUInt16(),this.goalScorer=t.readString(),this.timer=t.readUInt16()/100},Jr.prototype.readCustomData_onUpdate=function(t){Jr.superClass.prototype.readCustomData_onUpdate.call(this,t),this.timer=t.readUInt16()/100},Jr.prototype.setTimer=function(t){var e=t;null==this.timerTxt?(this.timerTxt=new E(16,"#ffd800"),this.timerTxt.strokeW=2,this.timerTxt.multiLine=!0,this.timerTxt.renderScale=3,this.timerTxt.setText(e)):(this.timerTxt.setFontSize(16),this.timerTxt.setText(e))},Jr.prototype.updateTimer=function(){this.timer=Math.round(this.timer);var t=this.timer;switch(this.timer){case 10:case 9:case 8:t="GOAAAAAL!!!";break;case 7:case 6:case 5:t=this.goalScorer;break;case 4:case 3:case 2:case 1:t="GOAL #"+this.alltimeGoals;break;default:t=""}this.setTimer(t)},window.AbilityObjGoalScored=Jr,u.setCustomClassForGameObjType(Jr,c,71),Ht("audio/click.mp3"),wn(),Fn(),newMiniMapObjs=[];var sn=!1;function rn(t){ee=Zt,ae=Qt,$t=t.readUInt16()/4,te=t.readUInt16()/4,camzoom_n=t.readUInt16()/1e3,_t=t.readUInt8(),3==ye&&(bt=t.readUInt8()),Kt&&(Kt=!1,Zt=ee=$t,Qt=ae=te,Jt=camzoom_n);var e=t.readUInt8(),a=P(e,0),i=P(e,1),s=P(e,2);if(We=P(e,3),ha=P(e,7),sn=1==t.readUInt8(),!a){var r=_e=abil_active=!1,n=0;i&&(r=P(e,4),_e=P(e,5),abil_active=P(e,6),n=t.readUInt8());var o=Fe=abil_dive_active=!1;if(s){var l=t.readUInt8();o=P(l,0),Fe=P(l,1),abil_dive_active=P(l,2)}We?(Ia.abil_usable=r,Ia.abil_recharging=_e,Ia.abil_possible=i,Ia.abil_active=abil_active,Ia.abil_Type=n,ka.abil_usable=o,ka.abil_recharging=Fe,ka.abil_possible=s,ka.abil_active=abil_dive_active,ka.abil_Type=b,Fe&&(ka.abil_rechargeTotalT=Ue,ka.abil_rechargeEndT=Ee),_e&&(Ia.abil_rechargeTotalT=Ne,Ia.abil_rechargeEndT=De)):(ka.abil_usable=r,ka.abil_recharging=_e,ka.abil_possible=i,ka.abil_active=abil_active,ka.abil_Type=n,Ia.abil_usable=o,Ia.abil_recharging=Fe,Ia.abil_possible=s,Ia.abil_active=abil_dive_active,Ia.abil_Type=b,_e&&(ka.abil_rechargeTotalT=Ne,ka.abil_rechargeEndT=De),Fe&&(Ia.abil_rechargeTotalT=Ue,Ia.abil_rechargeEndT=Ee));var h=Be=abil_q_active=!1,c=t.readUInt8();abil_q_possible=P(c,0),abil_q_possible&&(h=P(c,1),Be=P(c,2),abil_q_active=P(c,3),Ta.abil_Type=t.readUInt8()),Ta.abil_usable=h,Ta.abil_recharging=Be,Ta.abil_possible=abil_q_possible,Ta.abil_active=abil_q_active,Be&&(Ta.abil_rechargeTotalT=Oe,Ta.abil_rechargeEndT=Re);var d=t.readUInt8();if(kt=P(d,0),It&&(It.isVisible=kt),vt=P(d,1),kt&&(Tt=P(d,2),wt=P(d,3)),wt)oi=!1,At=[];else{Pt=t.readUInt8();var p=t.readUInt8();if(At=[],p>0)for(Vi=0;Vi<p;Vi++){var g={id:t.readUInt8(),requestee:t.readString(),aniType:t.readUInt8(),wins:t.readUInt16(),teamID:t.readUInt8(),rank:t.readUInt16(),kills:t.readUInt8(),dur:t.readUInt16()/100};At.push(g)}}waterBarPerc_n=t.readUInt8(),ca=t.readUInt8();var u=t.readUInt32();!function(t,e){var a=t-vi;if(t-vi!=0&&(ft-Ti)/1e3>.7){vi=t,Ti=ft;var i=new ws(a);wi.push(i)}}(u,xp),xp=u,pa=t.readUInt8()}}var nn=null;function on(t,e,a,i,s,r){if(!He){Ot.save();var n=a-t,o=i-e,l=ge/2/Jt,h=ue/2/Jt;t=Math.max(t,Zt-l-s+0),e=Math.max(e,Qt-h-r+0),a=Math.min(a,Zt+l-s-0),i=Math.min(i,Qt+h-r-0),Ot.strokeStyle="black",Ot.globalAlpha=.055;var c=a-t;fillH=i-e;for(var d=-.5+t+(n-t)%30;d<t+c;d+=30)Ot.beginPath(),Ot.moveTo(d,e),Ot.lineTo(d,e+fillH),Ot.stroke();for(dy=-.5+e+(o-e)%30;dy<e+fillH;dy+=30)Ot.beginPath(),Ot.moveTo(t,dy),Ot.lineTo(t+c,dy),Ot.stroke();Ot.restore()}}var ln=[3,8,44,58,76,85,94];let hn;new Date,hn=[];var cn=[];for(Vi=0;Vi<3;Vi++){var dn=new E(20,"#FFFFFF");cn.push(dn)}function pn(t){if(console.log(t),an()){playerName=nickInput.value.replace(/(<([^>]+)>)/gi,"").substring(0,20);var e=new URL(window.location.href).searchParams.get("nick");e&&e.length>0&&(e="#"+e+"$",playerName=e);var a=new $r(9+S(playerName).length+2);if(a.writeUInt8(2),a.writeString(playerName),a.writeUInt16(ge),a.writeUInt16(ue),a.writeUInt8(1==t?1:0),a.writeUInt8(document.getElementById("colorChoice").selectedIndex),en(a),e&&e.length>0&&(playerName="bettermope.io"),!t&&window.localStorage)try{window.localStorage.setItem("nick",playerName+"")}catch(t){}}}function gn(){if("none"!=document.getElementById("startMenuWrapper").style.display&&(document.getElementById("optionsDiv").style.display="none",!Mt)){resetAfk();var t=Ht("audio/click.mp3");if(t)try{t.play()}catch(t){}!Za&&ra&&pn(!1)}}window.requestAnimationFrame?window.requestAnimationFrame((function t(a){ft=+new Date,window.requestAnimationFrame(t),1!=Ot.globalAlpha&&(Ot.setTransform(1,0,0,1,0,0),Ot.globalAlpha=1),Ot.clearRect(0,0,ge,ue);var i=(ft-yt)/1e3/.2;Zt=(i=0>i?0:1<i?1:i)*($t-ee)+ee,Qt=i*(te-ae)+ae,Jt=(25*Jt+camzoom_n)/26,Mn(),Ot.save();var s=ge/2,r=ue/2;if(Ot.translate(s*(1-Jt)+(s-Zt)*Jt,r*(1-Jt)+(r-Qt)*Jt),Ot.scale(Jt,Jt),Ot.save(),na){Ot.save();var n=10;n=1500,Ot.lineWidth=n,Ot.globalAlpha=1,Ot.strokeStyle="#252525",Ot.strokeRect(-n/2,-n/2,me+n,fe+n),Ot.restore(),Ot.save(),n=5,Ot.lineWidth=n,Ot.globalAlpha=1,Ot.strokeStyle="#1F1F1F",Ot.strokeRect(-n/2,-n/2,me+n,fe+n),Ot.restore()}else on(_n(0),Nn(0),_n(ge),Nn(ue),0,0);if(Ot.restore(),function(){for(var t=Se.slice(),a={},i=0;i<ln.length;i++){var s=new Ds;a[ln[i]]=s,t.push(s)}for(d=t.length-1;d>=0;d--){var r=t[d];for(e=0;e<ln.length;e++){var n=ln[e];if(n==r.oType&&!(r instanceof Ds)){a[n].addBatchedObj(r),t.splice(d,1);break}}}for(Me=[],d=0;d<t.length;d++)t[d].updateZ(),2==t[d].oType&&t[d].flag_climbingTree&&(t[d].z+=2e3);t.sort((function(t,e){return t.z==e.z?t.id-e.id:t.z-e.z}));var o=[];for(d=0;d<t.length;d++)(r=t[d]).customInterfaceDraw?o.push(r):r.draw();if(null!=Bn&&Bn.drawCustomObjs(o),!ze)for(d=0;d<t.length;d++)void 0!==t[d].chatLines&&t[d].drawChat();for(d=0;d<Me.length;d++){var l=Me[d];xe.hasOwnProperty(l.id)&&delete xe[l.id];var h=Se.indexOf(l);-1!=h&&Se.splice(h,1)}}(),Ot.restore(),Ot.save(),Ot.restore(),ia&&(null!=Bn&&Bn.drawLeaderboard(),function(){if(Ot.save(),ge/Rt>=500&&Ft&&Ft.width&&ia){let a=ge-(10*Rt+Ft.width*ie),i=10*Rt,s=ui*ie,r=mi*ie;Ot.globalAlpha=.7,Ot.drawImage(Ft,a,i,s,r),Ot.strokeStyle="0F0F0F",Ot.lineWidth=6,Ot.strokeRect(a,i,s,r);var t=xe[ea];t&&Pi(t,"white",1);for(var e=0;e<newMiniMapObjs.length;e++)Pi(newMiniMapObjs[e],newMiniMapObjs[e].color,1);jr&&function(){zr||(zr=document.createElement("canvas")),zr.width=ui,zr.height=mi;var t=zr.getContext("2d");t.clearRect(0,0,zr.width,zr.height),t.save(),Math.max(3,jr.rad);var e=jr.x,a=jr.y;t.translate(e,a),t.save(),function(t,e,a,i,s,r){t.strokeStyle="red",t.lineWidth=5,t.beginPath(),t.arc(0,0,Math.max(0,i),0,2*Math.PI),t.stroke()}(t,0,0,jr.rad),t.restore();var i=ie*ui*1.5,s=ie*mi*1.5,r=.6,n="red";Hr(t,jr.rad,0*Math.PI,n,r,i,s),Hr(t,jr.rad,.5*Math.PI,n,r,i,s),Hr(t,jr.rad,1*Math.PI,n,r,i,s),Hr(t,jr.rad,1.5*Math.PI,n,r,i,s),t.restore(),zr&&Ot.drawImage(zr,ge-(10*Rt+Ft.width*ie),10*Rt,ui*ie,mi*ie)}()}Ot.restore()}(),null!=Bn&&Bn.drawMap()),function(){Ot.save(),Ot.translate(0,-ue/1.7);for(var t=0;t<ki.length;t++)(u=ki[t]).draw(),u.timedOut&&ki.splice(t,1);if(Ot.restore(),!ia)return;da+=.1*(waterBarPerc_n-da),xpPer+=.03*(pa-xpPer),(s=xe[ea])&&(aa=s.animalType);var e=1,a=da<=25;a&&(e=.7+.3*Math.sin(2*Math.PI/1.2*(ft/1e3)));var i,s,r=Math.min(450,.9*ge)*ie,n=30*ie,o=ge/2,l=ue-60*ie;Ot.globalAlpha=.35*e,Ot.fillStyle="#000000",Ot.fillRect(o-r/2,l-n/2,r,n),Ot.globalAlpha=e,Ot.fillStyle=4==ca?tt:5==ca?Q:2==ca?Z:ha||1==ca?"#8CCEF4":J,Ot.fillRect(o-r/2,l-n/2,r*(da/100),n),Ot.fillStyle=ce?a?st:"orange":a?st:"white",Ot.globalAlpha=1*e,i=1==ca?a?"LOW AIR":"AIR":2==ca?a?"LOW LAVA":"LAVA":3==ca?a?"LOW ICE":"ICE":4==ca?a?"LOW DEEP WATER":"DEEP WATER":5==ca?a?"LOW INFERNAL LAVA":"INFERNAL LAVA":a?"LOW WATER":"WATER",ua.setText(i),ua.setFontSize(22*ie),ua.setColor(a?st:"white"),ua.x=o,ua.y=l,Ot.globalAlpha*=a?1:.5,ua.draw(),Ot.globalAlpha=.35,Ot.fillStyle="#000000",l=ue-n/2-5,r=.9*ge,Ot.fillRect(o-r/2,l-n/2,r,n),Ot.globalAlpha=1,Ot.fillStyle="#F3C553",Ot.fillRect(o-r/2,l-n/2,r*(xpPer/100),n),Ot.globalAlpha=1;let h="Animal";for((s=xe[ea])&&s.animalType==m&&(h="Milestone"),fa.setText(x(xp)+" xp  ("+x(Te)+" xp Next "+h+")"),fa.setFontSize(22*ie),fa.x=o,fa.y=l,fa.draw(),Ot.globalAlpha=1,t=0;t<va.length;t++)va[t].draw();if(kt&&(null==It?((It=new Br(0,0,60,60,"Invite for 1v1",30)).showLabeleOnHover=!0,It.textShadow=!0,It.drawTextOnHowever=function(){this.drawText(this.w/2,this.h+this.h/2)},It.onClick=function(){if(!this.clicked){this.isVisible=!1,this.clicked=!0,this.isHighLighted=!1;var t=new $r(2);t.writeUInt8(52),t.writeUInt8(0),en(t)}},It.onMouseMove=function(){},It.update=function(){this.x=ge/2-this.w/2,this.y=45*ie+this.h/2},It.onInterfaceReset=function(){this.isVisible=!1,It=null},It.onAfterDraw=function(){var t=ve("img/icons/1v1.png");if(t){Ot.save();var e=.8*this.w,a=(this.w-e)/2;Ot.drawImage(t,this.x+a,this.y+a,e,e),Ot.restore()}},Bn.interfaceButtons.push(It)):null!=It&&kt&&(It.alpha=Tt?1:.1,It.isVisible&&(It.clicked=!1),It.draw())),Wt&&(Ea+=.1*((Ma?1:0)-Ea))>.005&&ia){Ot.globalAlpha=.3*Ea,Ot.beginPath(),Ot.arc(Na,Da,50*Rt,0,2*Math.PI),Ot.fillStyle="#000000",Ot.fill(),Ot.globalAlpha=.5*Ea,Ot.beginPath(),Ot.arc(Fa,Ua,50*Rt*.57,0,2*Math.PI),Ot.fillStyle="#000000",Ot.fill();var c=.3*Oa;Oa-=c,Ba+=c,Ra+=.1*(Wa-Ra),Ot.save(),Ot.translate(ge/2,ue/2),Ot.rotate(Ba),Ot.globalAlpha=.5*Ea,Ot.beginPath(),Ot.fillStyle="#000000";var d=40*Rt;xe[ea]&&(d=(9+xe[ea].rad)*Jt),d*=.1+.9*Ra;var p=15*Rt,g=30*Rt*(.2+.8*Ra);Ot.moveTo(d+g,0),Ot.lineTo(d,p/2),Ot.lineTo(d,-p/2),Ot.closePath(),Ot.fill(),Ot.restore()}for(t=wi.length-1;t>=0;t--){var u;(u=wi[t]).draw(),u.timedOut&&wi.splice(t,1)}Ot.restore(),null!=nn&&(Ot.save(),nn.width&&Ot.drawImage(nn,ge/2-nn.width/2,ue/2-nn.height/2,nn.width,nn.height),Ot.restore())}(),function(){if((ri+=.05*((si-ft>0?1:0)-ri))>.01&&!He&&ni){Ot.save(),Ot.translate(ge/2,ue*(.9+.3*(1-ri)));var t=ve("./img/howToPlay1.png");if(t){var e=.2*ue/t.height*ri;Ot.drawImage(t,-.5*t.width*e,-1*t.height*e,t.width*e,t.height*e)}Ot.restore()}if((li+=.1*((oi?1:0)-li))>.01){if(hi.length>0){Ot.save(),Ot.translate(0,ue*(-.5*(1-li)));var a=150*ie,i=a+20;let t=0,e=[...hi];for(;e.length>0;){let l=0;l=hi.length>6?Math.min(5,e.length):e.length;let h=e.splice(0,l);for(var s=Math.max(0,h.length-1)*(10+a)+(i-a),r=ge/2-s/2,n=0;n<h.length;n++)(o=h[n]).buttonScaleF=0==n&&0==t?i/a:1,o.w=a,o.h=a,o.x=r,o.y=t+.25*ue,r+=o.w/2*o.buttonScaleF+a/2+10;t+=a+20}for(Ot.globalAlpha=li,n=0;n<hi.length;n++){var o;(o=hi[n]).draw()}}var l=Math.max(0,pi-ft)/1e3,h=1;0!=l&&l<8&&(h=.7+.3*Math.sin(2*Math.PI/1.2*(ft/1e3))),Ot.save(),Ot.globalAlpha=li*h,Ot.fillStyle=0!=l&&l<8?"red":"white",Ot.font=25*ie+"px Arial",Ot.lineWidth=1,Ot.textAlign="center",Ot.textBaseline="middle",He||(Ot.shadowOffsetX=1,Ot.shadowOffsetY=1,Ot.shadowColor="black");var c=hi[0].y-hi[0].w/2,d=l>0?" (auto in "+Math.trunc(l)+"s)":"";Ot.fillText(ci?"Choose which animal to spawn as:":"Choose an upgrade:"+d,ge/2,c-25*Rt),Ot.restore(),Ot.restore()}null!=Bn&&Bn.interface(),Di(),null!=_i&&_i.width&&Ot.drawImage(_i,ge/2-_i.width/2,Ni,_i.width,_i.height),function(){if(null!=Bn&&Bn.interfaceButtons)for(var t=0;t<Bn.interfaceButtons.length;t++){var e=Bn.interfaceButtons[t];e.isVisible&&e.draw()}}(),null!=Wi&&(Wi.x=Ui,Wi.y=Ei,Wi.draw())}(),function(){As+=.1*((Ps?1:0)-As);let t=2*Math.PI/ks.length,e=100*As,a=250*As,i=t*(1-As);if(Ot.save(),Ss.setFontSize(30*ie),Ss.x=ge/2,Ss.y=ue/2,As>.01){Ot.globalAlpha=As,Ss.draw();for(var s=0;s<ks.length;s++)ks[s].draw(t*s+i,e,a)}Ot.restore()}(),ia&&function(){if(++xi%500==0&&(xi=0,Mi=1==Mi?0:1),kt&&0!=Pt||(Mi=1),Pt>0){var t=0,e="";0==Mi?(t=Pt,e="1v1 WINS"):1==Mi&&(t=0,e="GOALS"),t>0&&(Ot.save(),ma.setText(e+": "+t),ma.setFontSize(30*ie),ma.setColor("white"),ma.x=ge/2,ma.y=ue-95*ie,Ot.globalAlpha=1,ma.draw(),Ot.restore())}}(),Qa&&(ti.setFontSize(28*ie),ti.x=ge/2,ti.y=.2*ue,$a?ti.setText("Game starting after ad..."):ti.setText("Connecting to game..."),ti.draw(),!$a)){var o=ge/2,l=.25*ue+120*ie,h=ve("skins/mouse.png");if(h){Ot.save(),Ot.translate(o,l),this.rad;var c=ft%800/800;Ot.rotate(c*Math.PI*2),Ot.drawImage(h,-75,-75,150,150),Ot.restore()}}if(yn>370){Ze+=1,ft-Qe>1e3&&(Qe=+new Date,cn[0].setText(`${Et/10} mspt(avg) / ${Ze} fps`),Ze=0),cn[1].setText(`${Bt} in server / ${Ut} total players`);let t=20*ie,e=t+5;for(var p=0;p<cn.length;p++){let a=cn[p];a.setFontSize(t);let i=0,s=0;ia?(i=ge-(20+a.width)/2,s=(mi+25*Rt)*ie+e*p):(i=ge-5-a.width/2,s=2+a.height/2+e*p),a.x=i,a.y=s,a.draw()}}})):setInterval(draw,1e3/60),document.getElementById("startButton").onclick=gn,document.getElementById("btnSpectate").onclick=function(){console.log("spectate mode enabled!"),Ai(!1),Mt=!0,Ii("SPECTATE MODE").text.setFontSize(50),null!=Bn&&(null==xt&&((xt=new Br(0,0,120,50,"BACK",30)).update=function(){this.x=ge/2-this.w/2,this.y=.1*ue},xt.visible=!0,xt.onClick=function(){if(Ai(!0),console.log("spectate mode turned off"),Mt=!1,Ai(!0),null!=xt){var t=Bn.interfaceButtons.indexOf(xt);-1!=t&&Bn.interfaceButtons.splice(t,1),xt=null}},Bn.interfaceButtons.push(xt)),document.getElementById("spawnXpLabel").style.display="none")};var un=!1,mn=!1;function fn(){if(_t||null==Bn||Bn.chatAllowed){var t=document.getElementById("chatinput");if(_t&&(t.maxLength=300),!un&&ia)t.style.visibility="visible",t.focus(),un=!0,t.onblur=function(){un&&fn()};else if(un){var e=t.value+"";un=!1,t.style.visibility="hidden",t.blur(),e.length>0&&ia&&(newMsg=new $r(4+S(e).length),newMsg.writeUInt8(19),newMsg.writeString(e),en(newMsg)),t.value=""}}}document.onkeydown=function(t){resetAfk();var e=t.keyCode||t.which;if(!un&&ia)switch(e){case 32:t.preventDefault(),xn(vn,!0);break;case 87:t.preventDefault(),xn(Tn,!0);break;case 83:t.preventDefault(),xn(Pn,!0);break;case 27:(i||_t)&&(t.preventDefault(),gi(mn=!mn));break;case 81:t.preventDefault(),xn(Sn,!0);break;case 69:t.preventDefault(),xn(Cn,!0);break;case 68:t.preventDefault(),xn(An,!0)}},document.onkeyup=function(t){if(13==(e=t.keyCode||t.which)){if(!ia&&!oi)return void document.getElementById("startButton").click();if(oi)return void Zr(hi[0])}if(ia){var e;if(13==(e=t.keyCode||t.which))return void fn();if(!un&&ia)switch(e){case 32:t.preventDefault(),xn(vn,!1);break;case 87:t.preventDefault(),xn(Tn,!1);break;case 38:t.preventDefault(),xn(kn,!1);break;case 40:t.preventDefault(),xn(In,!1);break;case 81:t.preventDefault(),xn(Sn,!1);break;case 69:t.preventDefault(),xn(Cn,!1);break;case 68:t.preventDefault(),xn(An,!1)}}},window.onresize=wn;var yn=100,bn=100;function wn(){yn=window.innerWidth,bn=window.innerHeight,Di(),L&&(yn=document.body.clientWidth,bn=document.body.clientHeight),Math.max(.75,(window.innerHeight/1080+window.innerWidth/1920)/2),Rt=window.devicePixelRatio,ge=yn*Rt,ue=bn*Rt,Nt.width=ge,Nt.height=ue,Nt.style.width=yn+"px",Nt.style.height=bn+"px",ie=.85*Rt*Math.max(yn/1920,bn/1080),document.getElementById("chatinput").style.marginTop=bn/2-50+"px";var t=Wt&&bn<500?1.4:1;Pa.w=Pa.h=200*ie*t,ka.w=ka.h=200*ie*t,Ia.w=Ia.h=150*ie*t,Ta.w=Ta.h=200*ie*t,Aa.w=60*Rt*t,Aa.h=30*Rt*t,Pa.x=25*Rt*t+Pa.w/2,Pa.y=ue-(40*Rt+Pa.w/2),Ye&&(Pa.x=ge-Pa.x),ka.x=Pa.x,ka.y=Wt?Pa.y-(10*Rt*t+ka.w/2+Pa.w/2):Pa.y;var e=Pa.x;let a=.95*ka.w;e+=Ye?-a:a,Ia.x=e,Ia.y=ka.y,Ta.x=ka.x,Ta.y=ka.y-1.05*ka.w,Aa.x=Math.min(ge/2+100*Rt*t,.8*ge),Aa.y=15*Rt+Aa.h/2,Ca.setPosAndSize(Aa.x-(Aa.w/2+10*Rt*t),Aa.y,60*Rt*t,30*Rt*t,1,.5),Sa.setPosAndSize(Ca.x,Ca.y+Ca.h/2+10*Rt*t,60*Rt*t,30*Rt*t,.5,0);for(var s=0;s<va.length;s++)va[s].visible=Wt;Ta.visible=!0,ka.visible=!0,Ia.visible=!0,Ca.visible=Ca.touchEnabled=Wt,Sa.visible=Sa.touchEnabled=Wt&&i,an()&&(mes=new $r(5),mes.writeUInt8(17),mes.writeUInt16(ge),mes.writeUInt16(ue),en(mes)),null!=Bn&&Bn.onResize()}var vn=1,Tn=2,kn=3,In=4,Pn=5,An=6,Cn=7,Sn=8;function xn(t,e){switch(t){case vn:ce!=e&&an()&&ia&&(e&&Dn(),(a=new $r(2)).writeUInt8(21),a.writeUInt8(e?1:0),en(a)),ce=e;break;case Sn:pe!=e&&an()&&ia&&(e&&Dn(),(a=new $r(2)).writeUInt8(30),a.writeUInt8(e?1:0),en(a)),pe=e;break;case Tn:de!=e&&an()&&ia&&(e&&Dn(),(a=new $r(2)).writeUInt8(20),a.writeUInt8(e?1:0),en(a)),de=e;break;case kn:(i||_t)&&ia&&((a=new $r(1)).writeUInt8(26),en(a));break;case In:(i||_t)&&ia&&((a=new $r(1)).writeUInt8(27),en(a));break;case Pn:var a;ia&&((a=new $r(1)).writeUInt8(28),en(a))}}function Mn(){ne=(se-(ge/2-Zt*Jt))/Jt,oe=(re-(ue/2-Qt*Jt))/Jt}function _n(t){return(t-(ge/2-Zt*Jt))/Jt}function Nn(t){return(t-(ue/2-Qt*Jt))/Jt}function Dn(){if(mn){var t=xe[ea];if(!t)return;ne=t.x,oe=t.y+2}an()&&ia&&(Math.abs(le-ne)>.1||Math.abs(he-oe)>.1)&&(le=ne,he=oe,mes=new $r(7),mes.writeUInt8(5),mes.writeInt16(ne),mes.writeInt16(oe),en(mes))}function Fn(){wn(),bt=0,xe={},Se=[],Me=[],waterBarPerc_n=da=0,pa=xpPer=xp=0,Dt=null,Mt=!1,xt=null,wa="";var t=document.getElementById("spawnXpLabel");t.style.display=wa?"block":"none",t.textContent=wa;for(var e=0;e<va.length;e++)va[e].pressed=!1;Ma=!1,oi=!1,li=0,hi=[],ci=!1,Ps=!1,As=0,ks=[],wi=[],vi=0,Ti=0,wt=!1,vt=!1,Pt=0,At=[],It=null,Ct=!1,St=0,_t=!1,nn=null,ke=Array.apply(null,new Array(100)).map(Number.prototype.valueOf,0),Ie=Array.apply(null,new Array(100)).map(Number.prototype.valueOf,0),Pe=Array.apply(null,new Array(100)).map(Number.prototype.valueOf,0),Ae=Array.apply(null,new Array(100)).map(Number.prototype.valueOf,0),On()}Nt.addEventListener("gesturestart",(function(t){t.preventDefault()})),Nt.ontouchstart=function(t){if(resetAfk(),1==t.touches.length&&(console.log("Resetting all buttons (joytick bug fix)"),function(){for(var t=0;t<va.length;t++){var e=va[t];e.pressed=!1,e.pressedTouchID=-1}Ma=!1}()),ia){for(var e=0;e<t.changedTouches.length;e++)for(var a=t.changedTouches[e],i=0;i<va.length;i++){var s=va[i];if(s.testPosHitsButton(a.clientX*Rt,a.clientY*Rt)&&!s.pressed&&s.touchEnabled)return t.preventDefault(),s.pressed=!0,s.pressedTouchID=a.identifier,void s.onButtonTouchStart()}if(!Xe&&!Ma)return a=t.changedTouches[0],Ma=!0,Na=a.clientX*Rt,Da=a.clientY*Rt,Fa=Na,Ua=Da,void(_a=a.identifier);se=t.touches[0].clientX*Rt,re=t.touches[0].clientY*Rt,Mn()}},Nt.ontouchmove=function(t){resetAfk(),t.preventDefault(),console.log("touch changed: "+t.changedTouches.length);for(var e=0;e<t.changedTouches.length;e++){var a=t.changedTouches[e];if(a.identifier!=ka.pressedTouchID){if(Xe)se=a.clientX*Rt,re=a.clientY*Rt,Mn();else if(Ma&&a.identifier==_a){var i=a.clientX*Rt-Na,s=a.clientY*Rt-Da,r=Math.sqrt(i*i+s*s);if(r>0){var n=i/r,o=s/r,l=Math.min(1,r/(50*Rt)),h=Math.pow(l,3);h<.1&&(h=0);var c=300*Rt*h,d=Math.atan2(o,n);Oa=A(Ba,d),Wa=l,Fa=Na+50*Rt*n*l,Ua=Da+50*Rt*o*l,se=ge/2+n*c,re=ue/2+o*c,Mn()}}}else if(-1==Pa.pressedTouchID){var p=Pa.testPosHitsButton(a.clientX*Rt,a.clientY*Rt),g=Pa.pressed;Pa.pressed=p,p&&!g?xn(vn,!0):!p&&g&&xn(vn,!1)}}},Nt.ontouchend=function(t){for(var e=0;e<t.changedTouches.length;e++){var a=t.changedTouches[e];if(Ma&&a.identifier==_a)Ma=!1,_a=-1;else for(var i=0;i<va.length;i++){var s=va[i];if(s.pressed&&s.pressedTouchID==a.identifier&&s.touchEnabled)return s.pressed=!1,s.pressedTouchID=-1,void(ia&&s.onButtonTouchEnd())}}},Nt.ontouchcancel=function(t){console.log("touch cancel"),Nt.ontouchend(t)},Nt.ontouchleave=function(t){console.log("touch leave")},Nt.onmousemove=function(t){se=t.clientX*Rt,re=t.clientY*Rt,Mn(),la||resetAfk();for(var e=0;e<ks.length;e++)(a=ks[e]).hovering=a.hoveringCheck(se,re);if(oi&&ft-di>650)for(e=0;e<hi.length;e++)(a=hi[e]).isHighLighted=a.testPosHitsButton(se,re);if(null!=Bn&&Bn.interfaceButtons)for(e=0;e<Bn.interfaceButtons.length;e++){var a;(a=Bn.interfaceButtons[e]).isVisible&&(a.testPosHitsButton(se,re)?(a.isHighLighted=!0,a.onMouseMove()):a.isHighLighted=!1)}t.preventDefault()},Nt.onmousedown=function(t){resetAfk(),1==t.which&&xn(vn,!0),3==t.which&&xn(Tn,!0),t.preventDefault()},Nt.onmouseup=function(t){if(1==t.which){if(xn(vn,!1),se=t.clientX*Rt,re=t.clientY*Rt,oi&&ft-di>650)for(var e=0;e<hi.length;e++)if((a=hi[e]).testPosHitsButton(se,re)){Zr(a);break}if(Ps&&ft-Cs>650)for(e=0;e<ks.length;e++)(a=ks[e]).hoveringCheck(se,re)&&a.onClick();if(null!=Bn&&Bn.interfaceButtons)for(se=t.clientX*Rt,re=t.clientY*Rt,e=0;e<Bn.interfaceButtons.length;e++){var a;if((a=Bn.interfaceButtons[e]).isVisible&&a.testPosHitsButton(se,re)){a.onClick();break}}}3==t.which&&xn(Tn,!1),t.preventDefault()},Nt.onblur=function(t){xn(vn,!1),xn(Tn,!1)},window.onfocus=function(t){resetAfk()},window.onmouseout=function(t){null==t.toElement&&null==t.relatedTarget&&(xn(vn,!1),xn(Tn,!1))},document.oncontextmenu=document.body.oncontextmenu=function(){return!ia},setInterval(Dn,20),resetAfk=function(){oa=+new Date,la&&(la=!1,Y||(window.onbeforeunload=null),Ai(!0),document.getElementById("connecting").style.visibility="visible",window.location.reload())},setInterval((function(){+new Date-oa>6e4*(ia?2400:10)&&!la&&ra&&(console.log("Disconnected for afk..."),la=!0,an()&&ja.close())}),5e3),window.onload=function(){if(wn(),window.localStorage){var t=document.getElementById("nickInput");t.value=window.localStorage.getItem("nick"),t.setSelectionRange(0,t.value.length),Wt||t.focus()}},Nt.addEventListener?(Nt.addEventListener("mousewheel",En,!1),Nt.addEventListener("DOMMouseScroll",En,!1)):Nt.attachEvent("onmousewheel",En);var Un=0;function En(t){t=window.event||t;var e=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail));1==e?Un+=1:Un-=1,Un>100?Un=100:Un<-100&&(Un=-100)}var Bn=null;function On(){console.log("setting game mode interface:"),function(){var t=document.getElementById("endScreen");t&&(this.endScreenDisplayed=!0,t.innerHTML="",t.style.display="none",t.style.marginTop="0px")}(),null!=Bn&&Bn.interfaceReset(),Bn=null,0==ye||4==ye?(Bn=new Wr(ye)).state=be:3==ye?(Bn=new Xr).state=be:2==ye&&((Bn=new Lr).state=be)}})();